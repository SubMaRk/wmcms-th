/*!
 * B-JUI  v1.3 beta2 (http://b-jui.com)
 * Git@OSC (http://git.oschina.net/xknaan/B-JUI)
 * Copyright 2014 K'naan.
 * Licensed under Apache (http://www.apache.org/licenses/LICENSE-2.0)
 */

/* ========================================================================
 * B-JUI: bjui-core.js  v1.3 beta2
 * @author K'naan
 * -- Modified from dwz.core.js (author:ZhangHuihua@msn.com)
 * http://git.oschina.net/xknaan/B-JUI/blob/master/BJUI/js/bjui-core.js
 * ========================================================================
 * Copyright 2014 K'naan.
 * Licensed under Apache (http://www.apache.org/licenses/LICENSE-2.0)
 * ======================================================================== */
var ue;+function(d){function l(){this.datas=[]}var h={JSPATH:"BJUI/",PLUGINPATH:"BJUI/plugins/",IS_DEBUG:!1,KeyPressed:{ctrl:!1,shift:!1},keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,CTRL:17,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{initUI:"bjui.initUI",beforeInitUI:"bjui.beforeInitUI",afterInitUI:"bjui.afterInitUI",ajaxStatus:"bjui.ajaxStatus",resizeGrid:"bjui.resizeGrid",beforeAjaxLoad:"bjui.beforeAjaxLoad",beforeLoadNavtab:"bjui.beforeLoadNavtab",beforeLoadDialog:"bjui.beforeLoadDialog",afterLoadNavtab:"bjui.afterLoadNavtab",afterLoadDialog:"bjui.afterLoadDialog",beforeCloseNavtab:"bjui.beforeCloseNavtab",beforeCloseDialog:"bjui.beforeCloseDialog",afterCloseNavtab:"bjui.afterCloseNavtab",afterCloseDialog:"bjui.afterCloseDialog"},pageInfo:{pageCurrent:"pageCurrent",pageSize:"pageSize",orderField:"orderField",orderDirection:"orderDirection"},alertMsg:{displayPosition:"topcenter",alertTimeout:6E3},ajaxTimeout:3E4,statusCode:{ok:200,error:300,timeout:301},keys:{statusCode:"statusCode",message:"message"},ui:{windowWidth:0,showSlidebar:!0,clientPaging:!0,overwriteHomeTab:!1},debug:function(d){this.IS_DEBUG&&("undefined"!=typeof console?console.log(d):alert(d))},loginInfo:{url:"login.html",title:"Login",width:420,height:260,mask:!0},loadLogin:function(){var d=this.loginInfo;h.dialog({id:"bjui-login",url:d.url,title:d.title,width:d.width,height:d.height,mask:d.mask})},init:function(l){l=d.extend({},l);d.extend(h.statusCode,l.statusCode);d.extend(h.pageInfo,l.pageInfo);d.extend(h.alertMsg,l.alertMsg);d.extend(h.loginInfo,l.loginInfo);d.extend(h.ui,l.ui);l.JSPATH&&(this.JSPATH=l.JSPATH);l.PLUGINPATH&&(this.PLUGINPATH=l.PLUGINPATH);l.ajaxTimeout&&(this.ajaxTimeout=l.ajaxTimeout);this.IS_DEBUG=l.debug||!1;this.initEnv();d.cookie&&d.cookie("bjui_theme")||!l.theme||d(this).theme("setTheme",l.theme)},initEnv:function(){d(window).resize(function(){var l=d(this).width();h.ui.windowWidth&&600<h.ui.windowWidth&&h.ui.windowWidth<l&&(l=h.ui.windowWidth);h.initLayout(l);setTimeout(function(){d(this).trigger(h.eventType.resizeGrid)},30)});setTimeout(function(){var l=d(window).width();h.ui.windowWidth&&600<h.ui.windowWidth&&h.ui.windowWidth<l&&(l=h.ui.windowWidth);h.initLayout(l);d(document).initui()},10)},initLayout:function(l){var a=l-(h.ui.showSlidebar?d("#bjui-sidebar").width()+6:6),b=d(window).height()-d("#bjui-header").height()-d("#bjui-footer").outerHeight(),e=d("#bjui-navtab").find(".tabsPageHeader").height();h.ui.windowWidth&&d("#bjui-window").width(l);h.windowWidth=l;d("#bjui-container").height(b);d("#bjui-navtab").width(a);d("#bjui-leftside, #bjui-sidebar, #bjui-sidebar-s, #bjui-splitBar, #bjui-splitBarProxy").css({height:"100%"});d("#bjui-navtab .tabsPageContent").height(b-e);setTimeout(function(){d("#bjui-navtab \x3e .tabsPageContent \x3e .navtabPage").resizePageH();d("#bjui-navtab \x3e .tabsPageContent \x3e .navtabPage").find(".bjui-layout").resizePageH()},10);var a=d("body").data("bjui.navbar.width"),e=d("#bjui-header"),b=e.find(".bjui-navbar-toggle"),e=e.find(".bjui-navbar-logo"),c=d("#bjui-navbar-collapse"),g=c.find(".bjui-navbar-right");a||(a={logoW:e.outerWidth(),navW:g.outerWidth()},d("body").data("bjui.navbar.width",a));a&&(l-a.logoW<a.navW?(b.show(),c.addClass("collapse menu")):(b.hide(),c.removeClass("collapse menu in")));var f=d("#bjui-hnav-navbar-box");l=f.find("\x3e #bjui-hnav-navbar");var m=f.prev(),k=f.next(),n=f.width(),v=0;l.find("\x3e li").each(function(a){a=d(this);v+=a.outerWidth();v>n?(k.show(),f.data("hnav.move",!0).data("hnav.liw",v)):(m.hide(),k.hide(),f.removeData("hnav.move"))})},regional:{},setRegional:function(d,a){h.regional[d]=a},getRegional:function(d){if(0<=String(d).indexOf(".")){var a;d=String(d).split(".");for(var b=0;b<d.length;b++)a=a?a[d[b]]:h.regional[d[b]];return a}return h.regional[d]},doRegional:function(h,a){d.each(a,function(a,d){h=h.replaceAll("#"+a+"#",d)});return h},isIE:function(d){var a=document.createElement("b");a.innerHTML="\x3c!--[if IE "+d+"]\x3e\x3ci\x3e\x3c/i\x3e\x3c![endif]--\x3e";return 1===a.getElementsByTagName("i").length},StrBuilder:function(){return new l}};l.prototype.add=function(d){"undefined"!==typeof d&&this.datas.push(d);return this};l.prototype.toString=function(d){d=this.datas.join(d||"");this.clear();return d};l.prototype.isEmpty=function(){return 0==this.datas.length};l.prototype.clear=function(){this.datas=[];this.datas.length=0};window.BJUI=h}(jQuery);+function(d){d(function(){BJUI.setRegional("alertmsg",{title:{error:"\u9519\u8bef\u63d0\u793a",info:"\u4fe1\u606f\u63d0\u793a",warn:"\u8b66\u544a\u4fe1\u606f",correct:"\u6210\u529f\u4fe1\u606f",confirm:"\u786e\u8ba4\u4fe1\u606f"},btnMsg:{ok:"\u786e\u5b9a",yes:"\u662f",no:"\u5426",cancel:"\u53d6\u6d88"}});BJUI.setRegional("dialog",{close:"\u5173\u95ed",maximize:"\u6700\u5927\u5316",restore:"\u8fd8\u539f",minimize:"\u6700\u5c0f\u5316",title:"\u5f39\u51fa\u7a97\u53e3"});BJUI.setRegional("orderby",{asc:"\u5347\u5e8f",desc:"\u964d\u5e8f"});BJUI.setRegional("pagination",{total:"\u603b\u8bb0\u5f55\u6570/\u603b\u9875\u6570",first:"\u9996\u9875",last:"\u672b\u9875",prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875",jumpto:"\u8f93\u5165\u8df3\u8f6c\u9875\u7801\uff0c\u56de\u8f66\u786e\u8ba4",jump:"\u8df3\u8f6c",page:"\u9875",refresh:"\u5237\u65b0"});BJUI.setRegional("datagrid",{asc:"\u5347\u5e8f",desc:"\u964d\u5e8f",showhide:"\u663e\u793a/\u9690\u85cf \u5217",filter:"\u8fc7\u6ee4",clear:"\u6e05\u9664",lock:"\u9501\u5b9a\u5217",unlock:"\u89e3\u9664\u9501\u5b9a",add:"\u6dfb\u52a0",edit:"\u7f16\u8f91",save:"\u4fdd\u5b58",update:"\u66f4\u65b0",cancel:"\u53d6\u6d88",del:"\u5220\u9664",prev:"\u4e0a\u4e00\u6761",next:"\u4e0b\u4e00\u6761",refresh:"\u5237\u65b0",query:"\u67e5\u8be2","import":"\u5bfc\u5165","export":"\u5bfc\u51fa",all:"\u5168\u90e8","true":"\u662f","false":"\u5426",noData:"\u6ca1\u6709\u6570\u636e\uff01",expandMsg:"\u70b9\u6211\u5c55\u5f00\u884c\uff01",shrinkMsg:"\u70b9\u6211\u6536\u7f29\u884c\uff01",selectMsg:"\u672a\u9009\u4e2d\u4efb\u4f55\u884c\uff01",editMsg:"\u8bf7\u5148\u4fdd\u5b58\u7f16\u8f91\u884c\uff01",saveMsg:"\u6ca1\u6709\u9700\u8981\u4fdd\u5b58\u7684\u884c\uff01",delMsg:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u884c\u5417\uff1f",delMsgM:"\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u884c\uff1f"});BJUI.setRegional("findgrid",{choose:"\u9009\u62e9\u9009\u4e2d\u9879",append:"\u8ffd\u52a0\u9009\u62e9",empty:"\u6e05\u7a7a\u73b0\u6709\u503c"});BJUI.setRegional("progressmsg","\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u7b49...");BJUI.setRegional("datepicker",{close:"\u5173\u95ed",prev:"\u4e0a\u6708",next:"\u4e0b\u6708",clear:"\u6e05\u7a7a",ok:"\u786e\u5b9a",dayNames:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split(""),monthNames:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" ")});BJUI.setRegional("navtabCM",{refresh:"\u5237\u65b0\u672c\u6807\u7b7e",close:"\u5173\u95ed\u672c\u6807\u7b7e",closeother:"\u5173\u95ed\u5176\u4ed6\u6807\u7b7e",closeall:"\u5173\u95ed\u6240\u6709\u6807\u7b7e"});BJUI.setRegional("dialogCM",{refresh:"\u5237\u65b0\u672c\u7a97\u53e3",close:"\u5173\u95ed\u672c\u7a97\u53e3",closeother:"\u5173\u95ed\u5176\u4ed6\u7a97\u53e3",closeall:"\u5173\u95ed\u6240\u6709\u7a97\u53e3"});BJUI.setRegional("upload",{upConfirm:"\u5f00\u59cb\u4e0a\u4f20",upPause:"\u6682\u505c\u4e0a\u4f20",upCancel:"\u53d6\u6d88\u4e0a\u4f20"});BJUI.setRegional("statusCode_503","\u670d\u52a1\u5668\u5f53\u524d\u8d1f\u8f7d\u8fc7\u5927\u6216\u8005\u6b63\u5728\u7ef4\u62a4\uff01");BJUI.setRegional("ajaxnosend","\u4e0e\u670d\u52a1\u5668\u7684\u901a\u4fe1\u4e2d\u65ad\uff0c\u8bf7\u68c0\u67e5URL\u94fe\u63a5\u6216\u670d\u52a1\u5668\u72b6\u6001\uff01");BJUI.setRegional("sessiontimeout","\u4f1a\u8bdd\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u9646\uff01");BJUI.setRegional("plhmsg","\u5360\u4f4d\u7b26\u5bf9\u5e94\u7684\u9009\u62e9\u5668\u65e0\u6709\u6548\u503c\uff01");BJUI.setRegional("nocheckgroup",'\u672a\u5b9a\u4e49\u9009\u4e2d\u9879\u7684\u7ec4\u540d[\u590d\u9009\u6846\u7684"data-group"]\uff01');BJUI.setRegional("notchecked","\u672a\u9009\u4e2d\u4efb\u4f55\u4e00\u9879\uff01");BJUI.setRegional("selectmsg","\u8bf7\u9009\u62e9\u4e00\u4e2a\u9009\u9879\uff01");BJUI.setRegional("validatemsg","\u63d0\u4ea4\u7684\u8868\u5355\u4e2d [{0}] \u4e2a\u5b57\u6bb5\u6709\u9519\u8bef\uff0c\u8bf7\u66f4\u6b63\u540e\u518d\u63d0\u4ea4\uff01");BJUI.setRegional("idChecked","\u4e0d\u89c4\u8303\uff0cID\u9700\u4ee5\u5b57\u6bcd\u5f00\u5934\uff0c\u7ec4\u6210\u90e8\u5206\u5305\u62ec\uff080-9\uff0c\u5b57\u6bcd\uff0c\u4e2d\u6a2a\u7ebf\uff0c\u4e0b\u5212\u7ebf\uff09");BJUI.setRegional("uititle","B-JUI");BJUI.setRegional("maintab","\u6211\u7684\u4e3b\u9875");d.validator&&d.validator.config({defaultMsg:"{0}\u683c\u5f0f\u4e0d\u6b63\u786e",loadingMsg:"\u6b63\u5728\u9a8c\u8bc1...",rules:{digits:[/^\d+$/,"\u8bf7\u8f93\u5165\u6574\u6570"],number:[/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u6570\u5b57"],letters:[/^[a-z]+$/i,"{0}\u53ea\u80fd\u8f93\u5165\u5b57\u6bcd"],tel:[/^(?:(?:0\d{2,3}[\- ]?[1-9]\d{6,7})|(?:[48]00[\- ]?[1-9]\d{6}))$/,"\u7535\u8bdd\u683c\u5f0f\u4e0d\u6b63\u786e"],mobile:[/^1[3-9]\d{9}$/,"\u624b\u673a\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e"],email:[/^[\w\+\-]+(\.[\w\+\-]+)*@[a-z\d\-]+(\.[a-z\d\-]+)*\.([a-z]{2,4})$/i,"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"],qq:[/^[1-9]\d{4,}$/,"QQ\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e"],date:[/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65e5\u671f\uff0c\u4f8b\uff1ayyyy-MM-dd"],time:[/^(2[0123]|(1|0?)[0-9]){1}:([0-5][0-9]){1}:([0-5][0-9]){1}$/,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65f6\u95f4\uff0c\u4f8b\uff1aHH:mm:ss"],datetime:[/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(2[0123]|(1|0?)[0-9]){1}:([0-5][0-9]){1}:([0-5][0-9]){1}$/,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65e5\u671f\u65f6\u95f4\uff0c\u4f8b\uff1ayyyy-MM-dd HH:mm:ss"],ID_card:[/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[A-Z])$/,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8eab\u4efd\u8bc1\u53f7\u7801"],url:[/^(https?|ftp):\/\/[^\s]+$/i,"\u7f51\u5740\u683c\u5f0f\u4e0d\u6b63\u786e"],postcode:[/^[1-9]\d{5}$/,"\u90ae\u653f\u7f16\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"],chinese:[/^[\u0391-\uFFE5]+$/,"\u8bf7\u8f93\u5165\u4e2d\u6587"],username:[/^\w{3,12}$/,"\u8bf7\u8f93\u51653-12\u4f4d\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf"],password:[/^[0-9a-zA-Z]{6,16}$/,"\u5bc6\u7801\u75316-16\u4f4d\u6570\u5b57\u3001\u5b57\u6bcd\u7ec4\u6210"],pattern:function(d,h){return h?d.value.parseDate(h)?!0:this.renderMsg("\u9519\u8bef\u7684\u65e5\u671f\u65f6\u95f4\u683c\u5f0f\uff01",h):!0},accept:function(d,h){if(!h)return!0;var l=h[0];return"*"===l||(new RegExp(".(?:"+(l||"png|jpg|jpeg|gif")+")$","i")).test(d.value)||this.renderMsg("\u53ea\u63a5\u53d7{1}\u540e\u7f00",l.replace("|",","))}}});d.validator&&d.validator.config({messages:{required:"{0}\u4e0d\u80fd\u4e3a\u7a7a",remote:"{0}\u5df2\u88ab\u4f7f\u7528",integer:{"*":"\u8bf7\u8f93\u5165\u6574\u6570","+":"\u8bf7\u8f93\u5165\u6b63\u6574\u6570","+0":"\u8bf7\u8f93\u5165\u6b63\u6574\u6570\u62160","-":"\u8bf7\u8f93\u5165\u8d1f\u6574\u6570","-0":"\u8bf7\u8f93\u5165\u8d1f\u6574\u6570\u62160"},match:{eq:"{0}\u4e0e{1}\u4e0d\u4e00\u81f4",neq:"{0}\u4e0e{1}\u4e0d\u80fd\u76f8\u540c",lt:"{0}\u5fc5\u987b\u5c0f\u4e8e{1}",gt:"{0}\u5fc5\u987b\u5927\u4e8e{1}",lte:"{0}\u5fc5\u987b\u5c0f\u4e8e\u6216\u7b49\u4e8e{1}",gte:"{0}\u5fc5\u987b\u5927\u4e8e\u6216\u7b49\u4e8e{1}"},range:{rg:"\u8bf7\u8f93\u5165{1}\u5230{2}\u7684\u6570",gte:"\u8bf7\u8f93\u5165\u5927\u4e8e\u6216\u7b49\u4e8e{1}\u7684\u6570",lte:"\u8bf7\u8f93\u5165\u5c0f\u4e8e\u6216\u7b49\u4e8e{1}\u7684\u6570"},checked:{eq:"\u8bf7\u9009\u62e9{1}\u9879",rg:"\u8bf7\u9009\u62e9{1}\u5230{2}\u9879",gte:"\u8bf7\u81f3\u5c11\u9009\u62e9{1}\u9879",lte:"\u8bf7\u6700\u591a\u9009\u62e9{1}\u9879"},length:{eq:"\u8bf7\u8f93\u5165{1}\u4e2a\u5b57\u7b26",rg:"\u8bf7\u8f93\u5165{1}\u5230{2}\u4e2a\u5b57\u7b26",gte:"\u8bf7\u81f3\u5c11\u8f93\u5165{1}\u4e2a\u5b57\u7b26",lte:"\u8bf7\u6700\u591a\u8f93\u5165{1}\u4e2a\u5b57\u7b26",eq_2:"",rg_2:"",gte_2:"",lte_2:""}}})})}(jQuery);+function(d){BJUI.setRegional("alertmsg",{title:{error:"Error",info:"Info",warn:"Warning",correct:"Correct",confirm:"Confirm"},btnMsg:{ok:"OK",yes:"YES",no:"NO",cancel:"Cancel"}});BJUI.setRegional("dialog",{close:"Close",maximize:"Maximize",restore:"Restore",minimize:"Minimize",title:"Popup window"});BJUI.setRegional("orderby",{asc:"Asc",desc:"Desc"});BJUI.setRegional("pagination",{first:"First page",last:"Last page",prev:"Prev page",next:"Next page",jumpto:"Jump page number",jump:"Jump"});BJUI.setRegional("datagrid",{asc:"ASC",desc:"DESC",showhide:"Show/Hide columns",filter:"Filter",clear:"Clear",lock:"Lock",unlock:"Unlock",add:"Add",edit:"Edit",save:"Save",update:"Update",cancel:"Cancel",del:"Delete",prev:"Prev",next:"Next",refresh:"Refresh",query:"Query","import":"Import","export":"Export",all:"All","true":"True","false":"False",noData:"No data!",expandMsg:"Click here to expand the tr!",shrinkMsg:"Click here to shrink the tr!",selectMsg:"Not selected any rows!",saveMsg:"No rows need to save!",editMsg:"Please save the edited row!",delMsg:"Sure you want to delete this row?",delMsgM:"Sure you want to delete selected rows?"});BJUI.setRegional("findgrid",{choose:"Choose the selected item",append:"Append choose the selected item",empty:"Empty existing values"});BJUI.setRegional("progressmsg","Data loading, please waiting...");BJUI.setRegional("datepicker",{close:"Close",prev:"Prev month",next:"Next month",clear:"Clear",ok:"OK",dayNames:"Sun Mon Tue Wed Thu Fri Sat".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});BJUI.setRegional("navtabCM",{refresh:"Refresh navtab",close:"Close navtab",closeother:"Close other navtab",closeall:"Close all navtab"});BJUI.setRegional("dialogCM",{refresh:"Refresh dialog",close:"Close dialog",closeother:"Close other dialog",closeall:"Close all dialog"});BJUI.setRegional("upload",{upConfirm:"Start upload",upPause:"Pause upload",upCancel:"Cancel upload"});BJUI.setRegional("statusCode_503","HTTP status 503, the current server load is too large or is down for maintenance!");BJUI.setRegional("ajaxnosend","Communication with the server is interrupted, please check the URL link or server status!");BJUI.setRegional("sessiontimout","Session timeout, please login!");BJUI.setRegional("plhmsg","Placeholder corresponding selector None Valid!");BJUI.setRegional("nocheckgroup",'Undefined group name selected item [check box "data-group"]!');BJUI.setRegional("notchecked","Unchecked any one!");BJUI.setRegional("selectmsg","Please select one option!");BJUI.setRegional("validatemsg","Submitted form data has [{0}] field an error, please after modified submitting!");BJUI.setRegional("idChecked","is not standardized, ID need to start with a letter, components include (0-9, letters, hyphens, underscore)");BJUI.setRegional("uititle","B-JUI");BJUI.setRegional("maintab","My home");window.FRAG={dialog:'\x3cdiv class\x3d"bjui-dialog bjui-dialog-container" style\x3d"top:150px; left:300px;"\x3e    \x3cdiv class\x3d"dialogHeader" onselectstart\x3d"return false;" oncopy\x3d"return false;" onpaste\x3d"return false;" oncut\x3d"return false;"\x3e        \x3ca class\x3d"close" href\x3d"javascript:;" title\x3d"#close#"\x3e\x3ci class\x3d"fa fa-times-circle"\x3e\x3c/i\x3e\x3c/a\x3e        \x3ca class\x3d"maximize" href\x3d"javascript:;" title\x3d"#maximize#"\x3e\x3ci class\x3d"fa fa-plus-circle"\x3e\x3c/i\x3e\x3c/a\x3e        \x3ca class\x3d"restore" href\x3d"javascript:;" title\x3d"#restore#"\x3e\x3ci class\x3d"fa fa-history"\x3e\x3c/i\x3e\x3c/a\x3e        \x3ca class\x3d"minimize" href\x3d"javascript:;" title\x3d"#minimize#"\x3e\x3ci class\x3d"fa fa-minus-circle"\x3e\x3c/i\x3e\x3c/a\x3e        \x3ch1\x3e\x3cspan\x3e\x3ci class\x3d"fa fa-th-large"\x3e\x3c/i\x3e\x3c/span\x3e \x3cspan class\x3d"title"\x3e#title#\x3c/span\x3e\x3c/h1\x3e    \x3c/div\x3e    \x3cdiv class\x3d"dialogContent unitBox"\x3e\x3c/div\x3e    \x3cdiv class\x3d"resizable_h_l" tar\x3d"nw"\x3e\x3c/div\x3e    \x3cdiv class\x3d"resizable_h_r" tar\x3d"ne"\x3e\x3c/div\x3e    \x3cdiv class\x3d"resizable_h_c" tar\x3d"n"\x3e\x3c/div\x3e    \x3cdiv class\x3d"resizable_c_l" tar\x3d"w" style\x3d"height:100%;"\x3e\x3c/div\x3e    \x3cdiv class\x3d"resizable_c_r" tar\x3d"e" style\x3d"height:100%;"\x3e\x3c/div\x3e    \x3cdiv class\x3d"resizable_f_l" tar\x3d"sw"\x3e\x3c/div\x3e    \x3cdiv class\x3d"resizable_f_r" tar\x3d"se"\x3e\x3c/div\x3e    \x3cdiv class\x3d"resizable_f_c" tar\x3d"s"\x3e\x3c/div\x3e\x3c/div\x3e',taskbar:'\x3cdiv id\x3d"bjui-taskbar" style\x3d"left:0px; display:none;"\x3e    \x3cdiv class\x3d"taskbarContent"\x3e        \x3cul\x3e\x3c/ul\x3e    \x3c/div\x3e    \x3cdiv class\x3d"taskbarLeft taskbarLeftDisabled"\x3e\x3ci class\x3d"fa fa-angle-double-left"\x3e\x3c/i\x3e\x3c/div\x3e    \x3cdiv class\x3d"taskbarRight"\x3e\x3ci class\x3d"fa fa-angle-double-right"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e',splitBar:'\x3cdiv id\x3d"bjui-splitBar"\x3e\x3c/div\x3e',splitBarProxy:'\x3cdiv id\x3d"bjui-splitBarProxy"\x3e\x3c/div\x3e',resizable:'\x3cdiv id\x3d"bjui-resizable" class\x3d"bjui-resizable"\x3e\x3c/div\x3e',alertBackground:'\x3cdiv class\x3d"bjui-alertBackground"\x3e\x3c/div\x3e',maskBackground:'\x3cdiv class\x3d"bjui-maskBackground bjui-ajax-mask"\x3e\x3c/div\x3e',maskProgress:'\x3cdiv class\x3d"bjui-maskProgress bjui-ajax-mask"\x3e\x3ci class\x3d"fa fa-cog fa-spin"\x3e\x3c/i\x3e\x26nbsp;\x26nbsp;#progressmsg#\x3cdiv class\x3d"progressBg"\x3e\x3cdiv class\x3d"progress"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',progressBar_custom:'\x3cdiv id\x3d"bjui-progressBar-custom" class\x3d"progressBar"\x3e\x3ci class\x3d"fa fa-cog fa-spin"\x3e\x3c/i\x3e \x3cspan\x3e\x3c/span\x3e\x3c/div\x3e',dialogMask:'\x3cdiv class\x3d"bjui-dialogBackground"\x3e\x3c/div\x3e',orderby:'\x3ca href\x3d"javascript:;" class\x3d"order asc" data-order-direction\x3d"asc" title\x3d"#asc#"\x3e\x3ci class\x3d"fa fa-angle-up"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;" class\x3d"order desc" data-order-direction\x3d"desc" title\x3d"#desc#"\x3e\x3ci class\x3d"fa fa-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e',slidePanel:'\x3cdiv class\x3d"panel panel-default"\x3e    \x3cdiv class\x3d"panel-heading"\x3e        \x3ch4 class\x3d"panel-title"\x3e\x3ca data-toggle\x3d"collapse" data-parent\x3d"#bjui-accordionmenu" href\x3d"##id#" class\x3d"#class#"\x3e#icon#\x26nbsp;#title#\x3cb\x3e#righticon#\x3c/b\x3e\x3c/a\x3e\x3c/h4\x3e    \x3c/div\x3e    \x3cdiv id\x3d"#id#" class\x3d"panel-collapse collapse#bodyclass#"\x3e        \x3cdiv class\x3d"panel-body"\x3e        \x3c/div\x3e    \x3c/div\x3e\x3c/div\x3e',pagination:'\x3cul class\x3d"pagination"\x3e    \x3cli class\x3d"j-first"\x3e        \x3ca class\x3d"first" href\x3d"javascript:;"\x3e\x3ci class\x3d"fa fa-step-backward"\x3e\x3c/i\x3e #first#\x3c/a\x3e        \x3cspan class\x3d"first"\x3e\x3ci class\x3d"fa fa-step-backward"\x3e\x3c/i\x3e #first#\x3c/span\x3e    \x3c/li\x3e    \x3cli class\x3d"j-prev"\x3e        \x3ca class\x3d"previous" href\x3d"javascript:;"\x3e\x3ci class\x3d"fa fa-backward"\x3e\x3c/i\x3e #prev#\x3c/a\x3e        \x3cspan class\x3d"previous"\x3e\x3ci class\x3d"fa fa-backward"\x3e\x3c/i\x3e #prev#\x3c/span\x3e    \x3c/li\x3e    #pageNumFrag#    \x3cli class\x3d"j-next"\x3e        \x3ca class\x3d"next" href\x3d"javascript:;"\x3e#next# \x3ci class\x3d"fa fa-forward"\x3e\x3c/i\x3e\x3c/a\x3e        \x3cspan class\x3d"next"\x3e#next# \x3ci class\x3d"fa fa-forward"\x3e\x3c/i\x3e\x3c/span\x3e    \x3c/li\x3e    \x3cli class\x3d"j-last"\x3e        \x3ca class\x3d"last" href\x3d"javascript:;"\x3e#last# \x3ci class\x3d"fa fa-step-forward"\x3e\x3c/i\x3e\x3c/a\x3e        \x3cspan class\x3d"last"\x3e#last# \x3ci class\x3d"fa fa-step-forward"\x3e\x3c/i\x3e\x3c/span\x3e    \x3c/li\x3e    \x3cli class\x3d"jumpto"\x3e\x3cspan class\x3d"p-input"\x3e\x3cinput class\x3d"form-control input-sm-pages" type\x3d"text" size\x3d"2.6" value\x3d"#pageCurrent#" title\x3d"#jumpto#"\x3e\x3c/span\x3e\x3ca class\x3d"goto" href\x3d"javascript:;" title\x3d"#jump#"\x3e\x3ci class\x3d"fa fa-chevron-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e',gridPaging:'\x3cul class\x3d"pagination"\x3e    \x3cli class\x3d"page-total"\x3e        \x3cspan title\x3d"#total#"\x3e#count#\x3c/span\x3e    \x3c/li\x3e    \x3cli class\x3d"page-jumpto"\x3e\x3cspan class\x3d"page-input"\x3e\x3cinput class\x3d"form-control input-sm-pages" type\x3d"text" size\x3d"3.2" value\x3d"#pageCurrent#" title\x3d"#jumpto#"\x3e\x3c/span\x3e\x3c/li\x3e    \x3cli class\x3d"page-first btn-nav"\x3e        \x3ca href\x3d"javascript:;" title\x3d"#first#"\x3e\x3ci class\x3d"fa fa-step-backward"\x3e\x3c/i\x3e\x3c/a\x3e    \x3c/li\x3e    \x3cli class\x3d"page-prev btn-nav"\x3e        \x3ca href\x3d"javascript:;" title\x3d"#prev#"\x3e\x3ci class\x3d"fa fa-backward"\x3e\x3c/i\x3e\x3c/a\x3e    \x3c/li\x3e    #pageNumFrag#    \x3cli class\x3d"page-next btn-nav"\x3e        \x3ca href\x3d"javascript:;" title\x3d"#next#"\x3e\x3ci class\x3d"fa fa-forward"\x3e\x3c/i\x3e\x3c/a\x3e    \x3c/li\x3e    \x3cli class\x3d"page-last btn-nav"\x3e        \x3ca href\x3d"javascript:;" title\x3d"#last#"\x3e\x3ci class\x3d"fa fa-step-forward"\x3e\x3c/i\x3e\x3c/a\x3e    \x3c/li\x3e\x3c/ul\x3e',gridPageNum:'\x3cli class\x3d"page-num#active#"\x3e\x3ca href\x3d"javascript:;"\x3e#num#\x3c/a\x3e\x3c/li\x3e',gridMenu:'\x3cdiv class\x3d"datagrid-menu-box"\x3e    \x3cul\x3e        \x3cli class\x3d"datagrid-li-asc"\x3e\x3ca href\x3d"javascript:;"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-sort-amount-asc"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#asc#\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e        \x3cli class\x3d"datagrid-li-desc"\x3e\x3ca href\x3d"javascript:;"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-sort-amount-desc"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#desc#\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e        \x3cli class\x3d"datagrid-li-filter"\x3e\x3ca href\x3d"javascript:;"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-filter"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#filter#\x3c/span\x3e\x3cspan class\x3d"arrow"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e        \x3cli class\x3d"datagrid-li-showhide"\x3e\x3ca href\x3d"javascript:;"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-check-square-o"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#showhide#\x3c/span\x3e\x3cspan class\x3d"arrow"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e        \x3cli class\x3d"datagrid-li-lock"\x3e\x3ca href\x3d"javascript:;"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-lock"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#lock#\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e        \x3cli class\x3d"datagrid-li-unlock disable"\x3e\x3ca href\x3d"javascript:;"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-unlock"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#unlock#\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e    \x3c/ul\x3e\x3c/div\x3e',gridFilter:'\x3cdiv class\x3d"datagrid-filter-box"\x3e\x3cfieldset\x3e\x3clegend\x3e#label#\x3c/legend\x3e\x3cspan class\x3d"filter-a"\x3e\x3c/span\x3e\x3cspan class\x3d"filter-and"\x3e\x3cselect data-toggle\x3d"selectpicker" data-container\x3d"true" data-width\x3d"100%"\x3e\x3coption value\x3d"and"\x3eAND\x3c/option\x3e\x3coption value\x3d"or"\x3eOR\x3c/option\x3e\x3c/select\x3e\x3c/span\x3e\x3cspan class\x3d"filter-b"\x3e\x3c/span\x3e\x3cspan class\x3d"filter-ok"\x3e\x3cbutton type\x3d"button" class\x3d"btn-green ok" data-icon\x3d"check"\x3e#filter#\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn-orange clear" data-icon\x3d"remove"\x3e#clear#\x3c/button\x3e\x3c/span\x3e\x3c/fieldset\x3e\x3c/div\x3e',gridShowhide:'\x3cli data-index\x3d"#index#" class\x3d"datagrid-col-check"\x3e\x3ca href\x3d"javascript:;"\x3e\x3ci class\x3d"fa fa-check-square-o"\x3e\x3c/i\x3e#label#\x3c/a\x3e\x3c/li\x3e',gridEditBtn:'\x3cbutton type\x3d"button" class\x3d"btn btn-green edit"\x3e\x3ci class\x3d"fa fa-edit"\x3e\x3c/i\x3e #edit#\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-green update"\x3e\x3ci class\x3d"fa fa-edit"\x3e\x3c/i\x3e #update#\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-green save"\x3e\x3ci class\x3d"fa fa-check"\x3e\x3c/i\x3e #save#\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-orange cancel"\x3e\x3ci class\x3d"fa fa-undo"\x3e\x3c/i\x3e #cancel#\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-red delete"\x3e\x3ci class\x3d"fa fa-remove"\x3e\x3c/i\x3e #del#\x3c/button\x3e',gridDialogEditBtns:'\x3cul\x3e    \x3cli class\x3d"pull-left"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-orange prev" data-icon\x3d"arrow-up"\x3e#prev#\x3c/button\x3e\x3c/li\x3e    \x3cli class\x3d"pull-left"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-orange next" data-icon\x3d"arrow-down"\x3e#next#\x3c/button\x3e\x3c/li\x3e    \x3cli\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-red cancel" data-icon\x3d"remove"\x3e#cancel#\x3c/button\x3e\x3c/li\x3e    \x3cli\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-default save" data-icon\x3d"save"\x3e#save#\x3c/button\x3e\x3c/li\x3e\x3c/ul\x3e',gridExpandBtn:'\x3cspan title\x3d"#expandMsg#"\x3e\x3ci class\x3d"fa fa-plus"\x3e\x3c/i\x3e\x3c/span\x3e',gridShrinkBtn:'\x3cspan title\x3d"#shrinkMsg#"\x3e\x3ci class\x3d"fa fa-minus"\x3e\x3c/i\x3e\x3c/span\x3e',alertBoxFrag:'\x3cdiv id\x3d"bjui-alertMsgBox" class\x3d"bjui-alert"\x3e\x3cdiv class\x3d"alertContent"\x3e\x3cdiv class\x3d"#type#"\x3e\x3cdiv class\x3d"alertInner"\x3e\x3ch1\x3e\x3ci class\x3d"fa #fa#"\x3e\x3c/i\x3e#title#\x3c/h1\x3e\x3cdiv class\x3d"msg"\x3e#message#\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"toolBar"\x3e\x3cul\x3e#btnFragment#\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',alertBtnFrag:'\x3cli\x3e\x3cbutton class\x3d"btn btn-#class#" rel\x3d"#callback#" type\x3d"button"\x3e#btnMsg#\x3c/button\x3e\x3c/li\x3e',calendarFrag:'\x3cdiv id\x3d"bjui-calendar"\x3e    \x3cdiv class\x3d"main"\x3e        \x3ca class\x3d"close" href\x3d"javascript:;" title\x3d"#close#"\x3e\x3ci class\x3d"fa fa-times-circle"\x3e\x3c/i\x3e\x3c/a\x3e        \x3cdiv class\x3d"head"\x3e            \x3ctable width\x3d"100%" border\x3d"0" cellpadding\x3d"0" cellspacing\x3d"2"\x3e                \x3ctr\x3e                    \x3ctd width\x3d"20"\x3e\x3ca class\x3d"prev" href\x3d"javascript:;" title\x3d"#prev#"\x3e\x3ci class\x3d"fa fa-arrow-left"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/td\x3e                    \x3ctd\x3e\x3cselect name\x3d"year"\x3e\x3c/select\x3e\x3c/td\x3e                    \x3ctd\x3e\x3cselect name\x3d"month"\x3e\x3c/select\x3e\x3c/td\x3e                    \x3ctd width\x3d"20"\x3e\x3ca class\x3d"next" href\x3d"javascript:;" title\x3d"#next#"\x3e\x3ci class\x3d"fa fa-arrow-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/td\x3e                \x3c/tr\x3e            \x3c/table\x3e        \x3c/div\x3e        \x3cdiv class\x3d"body"\x3e            \x3cdl class\x3d"dayNames"\x3e\x3cdt\x3e7\x3c/dt\x3e\x3cdt\x3e1\x3c/dt\x3e\x3cdt\x3e2\x3c/dt\x3e\x3cdt\x3e3\x3c/dt\x3e\x3cdt\x3e4\x3c/dt\x3e\x3cdt\x3e5\x3c/dt\x3e\x3cdt\x3e6\x3c/dt\x3e\x3c/dl\x3e            \x3cdl class\x3d"days"\x3e\x3c!-- date list --\x3e\x3c/dl\x3e            \x3cdiv style\x3d"clear:both;height:0;line-height:0"\x3e\x3c/div\x3e        \x3c/div\x3e        \x3cdiv class\x3d"foot"\x3e            \x3ctable class\x3d"time"\x3e                \x3ctr\x3e                    \x3ctd\x3e                        \x3cinput type\x3d"text" class\x3d"hh" maxlength\x3d"2" data-type\x3d"hh" data-start\x3d"0" data-end\x3d"23"\x3e:\x3cinput                         type\x3d"text" class\x3d"mm" maxlength\x3d"2" data-type\x3d"mm" data-start\x3d"0" data-end\x3d"59"\x3e:\x3cinput                         type\x3d"text" class\x3d"ss" maxlength\x3d"2" data-type\x3d"ss" data-start\x3d"0" data-end\x3d"59"\x3e                    \x3c/td\x3e                    \x3ctd\x3e\x3cul\x3e\x3cli class\x3d"up" data-add\x3d"1"\x3e\x26and;\x3c/li\x3e\x3cli class\x3d"down"\x3e\x26or;\x3c/li\x3e\x3c/ul\x3e\x3c/td\x3e                \x3c/tr\x3e            \x3c/table\x3e            \x3cbutton type\x3d"button" class\x3d"clearBtn btn btn-orange"\x3e#clear#\x3c/button\x3e            \x3cbutton type\x3d"button" class\x3d"okBtn btn btn-default"\x3e#ok#\x3c/button\x3e        \x3c/div\x3e        \x3cdiv class\x3d"tm"\x3e            \x3cul class\x3d"hh"\x3e                \x3cli\x3e0\x3c/li\x3e                \x3cli\x3e1\x3c/li\x3e                \x3cli\x3e2\x3c/li\x3e                \x3cli\x3e3\x3c/li\x3e                \x3cli\x3e4\x3c/li\x3e                \x3cli\x3e5\x3c/li\x3e                \x3cli\x3e6\x3c/li\x3e                \x3cli\x3e7\x3c/li\x3e                \x3cli\x3e8\x3c/li\x3e                \x3cli\x3e9\x3c/li\x3e                \x3cli\x3e10\x3c/li\x3e                \x3cli\x3e11\x3c/li\x3e                \x3cli\x3e12\x3c/li\x3e                \x3cli\x3e13\x3c/li\x3e                \x3cli\x3e14\x3c/li\x3e                \x3cli\x3e15\x3c/li\x3e                \x3cli\x3e16\x3c/li\x3e                \x3cli\x3e17\x3c/li\x3e                \x3cli\x3e18\x3c/li\x3e                \x3cli\x3e19\x3c/li\x3e                \x3cli\x3e20\x3c/li\x3e                \x3cli\x3e21\x3c/li\x3e                \x3cli\x3e22\x3c/li\x3e                \x3cli\x3e23\x3c/li\x3e            \x3c/ul\x3e            \x3cul class\x3d"mm"\x3e                \x3cli\x3e0\x3c/li\x3e                \x3cli\x3e5\x3c/li\x3e                \x3cli\x3e10\x3c/li\x3e                \x3cli\x3e15\x3c/li\x3e                \x3cli\x3e20\x3c/li\x3e                \x3cli\x3e25\x3c/li\x3e                \x3cli\x3e30\x3c/li\x3e                \x3cli\x3e35\x3c/li\x3e                \x3cli\x3e40\x3c/li\x3e                \x3cli\x3e45\x3c/li\x3e                \x3cli\x3e50\x3c/li\x3e                \x3cli\x3e55\x3c/li\x3e            \x3c/ul\x3e            \x3cul class\x3d"ss"\x3e                \x3cli\x3e0\x3c/li\x3e                \x3cli\x3e10\x3c/li\x3e                \x3cli\x3e20\x3c/li\x3e                \x3cli\x3e30\x3c/li\x3e                \x3cli\x3e40\x3c/li\x3e                \x3cli\x3e50\x3c/li\x3e            \x3c/ul\x3e        \x3c/div\x3e    \x3c/div\x3e\x3c/div\x3e',spinnerBtn:'\x3cul class\x3d"bjui-spinner"\x3e\x3cli class\x3d"up" data-add\x3d"1"\x3e\x26and;\x3c/li\x3e\x3cli class\x3d"down"\x3e\x26or;\x3c/li\x3e\x3c/ul\x3e',lookupBtn:'\x3ca class\x3d"bjui-lookup" href\x3d"javascript:;" data-toggle\x3d"lookupbtn"\x3e\x3ci class\x3d"fa fa-search"\x3e\x3c/i\x3e\x3c/a\x3e',findgridBtn:'\x3ca class\x3d"bjui-lookup" href\x3d"javascript:;" data-toggle\x3d"findgridbtn"\x3e\x3ci class\x3d"fa fa-search"\x3e\x3c/i\x3e\x3c/a\x3e',dateBtn:'\x3ca class\x3d"bjui-lookup" href\x3d"javascript:;" data-toggle\x3d"datepickerbtn"\x3e\x3ci class\x3d"fa fa-calendar"\x3e\x3c/i\x3e\x3c/a\x3e',navtabCM:'\x3cul id\x3d"bjui-navtabCM"\x3e    \x3cli rel\x3d"reload"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-refresh"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#refresh#\x3c/span\x3e\x3c/li\x3e    \x3cli rel\x3d"closeCurrent"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-remove"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#close#\x3c/li\x3e    \x3cli rel\x3d"closeOther"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-remove"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#closeother#\x3c/li\x3e    \x3cli rel\x3d"closeAll"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-remove"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#closeall#\x3c/li\x3e\x3c/ul\x3e',dialogCM:'\x3cul id\x3d"bjui-dialogCM"\x3e    \x3cli rel\x3d"reload"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-refresh"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#refresh#\x3c/span\x3e\x3c/li\x3e    \x3cli rel\x3d"closeCurrent"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-remove"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#close#\x3c/span\x3e\x3c/li\x3e    \x3cli rel\x3d"closeOther"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-remove"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#closeother#\x3c/span\x3e\x3c/li\x3e    \x3cli rel\x3d"closeAll"\x3e\x3cspan class\x3d"icon"\x3e\x3ci class\x3d"fa fa-remove"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e#closeall#\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e',externalFrag:'\x3ciframe src\x3d"{url}" style\x3d"width:100%;height:{height};" frameborder\x3d"no" border\x3d"0" marginwidth\x3d"0" marginheight\x3d"0"\x3e\x3c/iframe\x3e',uploadTemp:'\x3cdiv id\x3d"{fileId}" class\x3d"item"\x3e    \x3cdiv class\x3d"info"\x3e        \x3cspan class\x3d"up_filename"\x3e{fileName}\x3c/span\x3e\x3cspan class\x3d"up_confirm" title\x3d"#upConfirm#"\x3e\x3ci class\x3d"fa fa-play-circle-o"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"up_pause" title\x3d"#upPause#"\x3e\x3cspan class\x3d"glyphicon glyphicon-pause"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"up_cancel" title\x3d"#upCancel#"\x3e\x3ci class\x3d"fa fa-times-circle-o"\x3e\x3c/i\x3e\x3c/span\x3e    \x3c/div\x3e    \x3cdiv class\x3d"preview"\x3e\x3cspan class\x3d"img"\x3e\x3c/span\x3e\x3c/div\x3e    \x3cdiv class\x3d"progress"\x3e\x3cdiv class\x3d"bar"\x3e\x3c/div\x3e\x3c/div\x3e    \x3cspan class\x3d"percent"\x3e{percent}\x3c/span\x3e    \x3cspan class\x3d"filesize"\x3e\x3cspan class\x3d"uploadedsize"\x3e{uploadedSize}\x3c/span\x3e/\x3cspan class\x3d"totalsize"\x3e{fileSize}\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e',uploadFrag:'\x3cinput class\x3d"bjui-upload-select-file" style\x3d"display:none;" type\x3d"file" name\x3d"fileselect[]" #multi# accept\x3d"#accept#"\x3e\x3ca href\x3d"javascript:void(0)" class\x3d"btn btn-default bjui-upload-select"\x3e#btnTxt#\x3c/a\x3e\x3cdiv class\x3d"queue"\x3e\x3c/div\x3e'}}(jQuery);+function(d){d.fn.extend({ajaxUrl:function(l){var h=d(this);h.trigger(BJUI.eventType.beforeAjaxLoad);l.loadingmask&&h.trigger(BJUI.eventType.ajaxStatus);d.ajax({type:l.type||"GET",url:l.url,data:l.data||{},cache:!1,dataType:"html",timeout:BJUI.ajaxTimeout,success:function(q){var a=q.toJson(),b=h.find("\x3e .bjui-ajax-mask");a[BJUI.keys.statusCode]?(a[BJUI.keys.statusCode]==BJUI.statusCode.error?(a[BJUI.keys.message]&&h.alertmsg("error",a[BJUI.keys.message]),h.closest(".bjui-layout").length||(h.closest(".navtab-panel").length?h.navtab("closeCurrentTab"):h.dialog("closeCurrent"))):a[BJUI.keys.statusCode]==BJUI.statusCode.timeout&&(h.closest(".bjui-dialog").length&&h.dialog("closeCurrent"),h.closest(".navtab-panel").length&&h.navtab("closeCurrentTab"),BJUI.alertmsg("info",a[BJUI.keys.message]||BJUI.regional.sessiontimeout),BJUI.loadLogin()),b.fadeOut("normal",function(){d(this).remove()})):h.empty().html(q).append(b).initui();d.isFunction(l.callback)&&l.callback(q)},error:function(d,a,b){h.bjuiajax("ajaxError",d,a,b);h.closest(".bjui-layout").length||(h.closest(".navtab-panel").length?h.navtab("closeCurrentTab"):h.dialog("closeCurrent"));h.trigger("bjui.ajaxError")},statusCode:{0:function(d,a,b){BJUI.alertmsg("error",BJUI.regional.ajaxnosend)},503:function(d,a,b){BJUI.alertmsg("error",BJUI.regional.statusCode_503)}}})},loadUrl:function(l,h,q){d(this).ajaxUrl({url:l,data:h,callback:q})},doAjax:function(l){var h=d(this),q,a;l.url?l.callback?(l.callback=l.callback.toFunc(),l.loadingmask&&(q=h.getPageTarget(),q.trigger(BJUI.eventType.ajaxStatus),a=q.find("\x3e .bjui-ajax-mask")),l.type||(l.type="POST"),l.dataType||(l.dataType="json"),l.cache||(l.cache=!1),l.timeout=l.ajaxTimeout||BJUI.ajaxTimeout,l.success=function(b){a?l.callback?d.when(l.callback(b)).done(function(){q.trigger("bjui.ajaxStop")}):q.trigger("bjui.ajaxStop"):l.callback(b)},l.error=l.error||function(b,d,c){BJUI.ajax("ajaxError",b,d,c);a&&q.trigger("bjui.ajaxError")},l.statusCode={0:function(a,d,c){BJUI.alertmsg("error",BJUI.regional.ajaxnosend)},503:function(a,d,c){BJUI.alertmsg("error",BJUI.regional.statusCode_503)}},d.ajax(l)):BJUI.debug("The ajax callback is undefined!"):BJUI.debug("The ajax url is undefined!")},getPageTarget:function(){return this.closest(".bjui-layout").length?this.closest(".bjui-layout"):this.closest(".navtab-panel").length?d.CurrentNavtab:d.CurrentDialog},resizePageH:function(){return this.each(function(){if(!d(this).closest(".tab-content").length){var l=d(this),h=l.find("\x3e .bjui-pageHeader"),q=l.find("\x3e .bjui-pageContent"),a=l.find("\x3e .bjui-pageFooter"),h=h.outerHeight()||0,b=a.outerHeight()||0;a.css("bottom")&&(b+=parseInt(a.css("bottom"))||0);!b&&l.hasClass("dialogContent")&&(b=5);q.css({top:h,bottom:b})}})},getMaxIndexObj:function(l){var h=0,q=0;l.each(function(a){var b=parseInt(d(this).css("zIndex"))||1;h<b&&(h=b,q=a)});return l.eq(q)},serializeJson:function(){var l={},h=this.serializeArray();d.each(h,function(){void 0!==l[this.name]?(l[this.name].push||(l[this.name]=[l[this.name]]),l[this.name].push(this.value||"")):l[this.name]=this.value||""});return l},isTag:function(l){return l&&d(this).prop("tagName")?d(this)[0].tagName.toLowerCase()==l?!0:!1:!1},isBind:function(l){var h=d(this).data("events");return h&&l&&h[l]},log:function(d){return this.each(function(){console&&console.log("%s: %o",d,this)})}});d.extend(String.prototype,{isPositiveInteger:function(){return(new RegExp(/^[1-9]\d*$/)).test(this)},isInteger:function(){return(new RegExp(/^\d+$/)).test(this)},isNumber:function(){return(new RegExp(/^([-]{0,1}(\d+)[\.]+(\d+))|([-]{0,1}(\d+))$/)).test(this)},isNormalID:function(){return(new RegExp(/^[a-zA-Z][0-9a-zA-Z_-]*$/)).test(this)},includeChinese:function(){return(new RegExp(/[\u4E00-\u9FA5]/)).test(this)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(d){return 0===this.indexOf(d)},endsWith:function(d){var h=this.length-d.length;return 0<=h&&this.lastIndexOf(d)===h},replaceSuffix:function(d){return this.replace(/\[[0-9]+\]/,"["+d+"]").replace("#index#",d)},replaceSuffix2:function(d){return this.replace(/\-(i)([0-9]+)$/,"-i"+d).replace("#index#",d)},trans:function(){return this.replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&quot;/g,'"')},encodeTXT:function(){return this.replaceAll("\x26","\x26amp;").replaceAll("\x3c","\x26lt;").replaceAll("\x3e","\x26gt;").replaceAll(" ","\x26nbsp;")},replaceAll:function(d,h){return this.replace(new RegExp(d,"gm"),h)},replacePlh:function(l){l=l||d(document);return this.replace(/{\/?[^}]*}/g,function(d){var h=l.find(d.replace(/[{}]+/g,""));return h&&h.val()?h.val():d})},replaceMsg:function(d){return this.replace(RegExp("({.*})","g"),d)},replaceTm:function(d){return d?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(h){return d[h.replace(/[{}]+/g,"")]}):this},replaceTmById:function(l){var h=l||d(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(d){var a=h.find("#"+d.replace(/[{}]+/g,""));return a.val()?a.val():d})},isFinishedTm:function(){return!/{\/?[^}]*}/.test(this)},skipChar:function(d){return this&&0!==this.length?this.charAt(0)===d?this.substring(1).skipChar(d):this:""},isValidPwd:function(){return(new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/)).test(this)},isValidMail:function(){return(new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)).test(this.trim())},isSpaces:function(){for(var d=0;d<this.length;d+=1){var h=this.charAt(d);if(" "!=h&&"\n"!=h&&"\t"!=h&&"\r"!=h)return!1}return!0},isPhone:function(){return(new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/)).test(this)},isUrl:function(){return(new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/)).test(this)},isExternalUrl:function(){return this.isUrl()&&-1==this.indexOf("://"+document.domain)},toBool:function(){return"true"===this.toLowerCase()?!0:!1},toJson:function(){var d=this;try{return"object"===typeof d&&(d=d.toString()),d.trim().match("^{(.+:.+,*){1,}}$")?JSON.parse(this):this}catch(h){return this}},toObj:function(){var d=null;try{d=(new Function("return "+this))()}catch(h){d=this,BJUI.debug('String toObj\uff1aParse "String" to "Object" error! Your str is: '+this)}return d},toFunc:function(){if(this&&this.length){if(this.startsWith("function"))return(new Function("return "+this))();try{for(var d=this.split("."),h=window,q=0;q<d.length;q++)h=h[d[q]];if("function"===typeof h)return h}catch(a){}}}});d.extend(Function.prototype,{toFunc:function(){return this}});d.extend(Array.prototype,{remove:function(d){return 0>d?this:this.slice(0,d).concat(this.slice(d+1,this.length))},unique:function(){var d=[];this.sort();for(var h=0;h<this.length;h++)this[h]!=this[h+1]&&(d[d.length]=this[h]);return d},myIndexOf:function(d){if(!this||!this.length)return-1;for(var h=0,l;l=this[h];h++)if(l==d)return h;return-1},toJson:function(){var l={};d.each(this,function(){void 0!==l[this.name]?(l[this.name].push||(l[this.name]=[l[this.name]]),l[this.name].push(this.value||"")):l[this.name]=this.value||""});return l}});d.isJson=function(l){var h=!0;try{h=d.parseJSON(l)}catch(q){return!1}return h?!0:!1}}(jQuery);+function(d){var l=function(h,a){this.$element=d(h);this.options=a};l.prototype.init=function(){var d=this;this.options.$obj=this.$element;this.options.obj&&(this.options.$obj=this.options.obj);if(this.options.event)this.start(this.options.event);else if(this.options.selector)this.$element.find(this.options.selector).on("mousedown",function(a){d.start.apply(d,[a])});else this.$element.on("mousedown",function(a){d.start.apply(d,[a])})};l.prototype.start=function(h){document.onselectstart=function(a){return!1};var a=this;this.options.oleft||(this.options.oleft=parseInt(this.$element.css("left"))||0);this.options.otop||(this.options.otop=parseInt(this.$element.css("top"))||0);d(document).on("mouseup.bjui.basedrag",function(b){a.stop.apply(a,[b])}).on("mousemove.bjui.basedrag",function(b){a.drag.apply(a,[b])})};l.prototype.drag=function(h){h||(h=window.event);var a=this.options,b=a.oleft+(h.pageX||h.clientX)-a.event.pageX,e=a.otop+(h.pageY||h.clientY)-a.event.pageY;1>e&&(e=0);if("horizontal"==a.move)a.minW&&b>=parseInt(this.options.$obj.css("left"))+a.minW&&a.maxW&&b<=parseInt(this.options.$obj.css("left"))+a.maxW?this.$element.css("left",b):a.scop&&a.relObj&&(parseInt(a.relObj.css("left")),this.$element.css("left",b));else if("vertical"==a.move)this.$element.css("top",e);else{var c=a.selector?this.options.$obj.find(a.selector):this.options.$obj;b>=2*-c.outerWidth()/3&&0<=e&&b+c.outerWidth()/3<d(window).width()&&e+c.outerHeight()<d(window).height()&&this.$element.css({left:b,top:e})}a.drag&&a.drag.apply(this.$element,[this.$element,h,b,e]);return this.preventEvent(h)};l.prototype.stop=function(h){d(document).off("mousemove.bjui.basedrag").off("mouseup.bjui.basedrag");this.options.stop&&this.options.stop.apply(this.$element,[this.$element,h]);this.options.event&&this.destroy();document.onselectstart=function(a){return!0};return this.preventEvent(h)};l.prototype.preventEvent=function(d){d.stopPropagation&&d.stopPropagation();d.preventDefault&&d.preventDefault();return!1};l.prototype.destroy=function(){this.$element.removeData("bjui.basedrag");this.options.nounbind||this.$element.off("mousedown")};var h=d.fn.basedrag;d.fn.basedrag=function(h){var a=arguments,b=h;return this.each(function(){var e=d(this),c=d.extend({},e.data(),"object"===typeof h&&h),g=e.data("bjui.basedrag");g||e.data("bjui.basedrag",g=new l(this,c));if("string"===typeof b&&d.isFunction(g[b]))if([].shift.apply(a),a)g[b].apply(g,a);else g[b]();else g.init()})};d.fn.basedrag.Constructor=l;d.fn.basedrag.noConflict=function(){d.fn.basedrag=h;return this}}(jQuery);+function(d){function l(a){var b=arguments,e=a;return this.each(function(){var c=d(this),g=d.extend({},c.data(),"object"===typeof a&&a),f=c.data("bjui.slidebar");f||c.data("bjui.slidebar",f=new h(this,g));if("string"===typeof e&&d.isFunction(f[e]))if([].shift.apply(b),b)f[e].apply(f,b);else f[e]();else f.init()})}d(function(){d("#bjui-leftside").after("\x3c!-- Adjust the width of Left slide --\x3e").after(FRAG.splitBar).after(FRAG.splitBarProxy)});var h=function(a,b){this.$element=d(a);this.$bar=this.$element.find("#bjui-sidebar");this.$sbar=this.$element.find("#bjui-sidebar-s");this.$lock=this.$bar.find("\x3e .toggleCollapse \x3e .lock");this.$navtab=d("#bjui-navtab");this.$collapse=this.$sbar.find(".collapse");this.$split=d("#bjui-splitBar");this.$split2=d("#bjui-splitBarProxy");this.isfloat=!1;this.options=b};h.prototype.lock=function(){var a=this.$bar.outerWidth()+4,b=BJUI.windowWidth-d("#bjui-sidebar").width()-6;this.faLock();this.hoverLock();this.$sbar.animate({left:-10},20);this.$bar.removeClass("shadown");this.isfloat=!1;this.$navtab.animate({left:a,width:b},500,function(){d(window).trigger(BJUI.eventType.resizeGrid)});this.$split.show()};h.prototype.unlock=function(){var a=this,b=0-a.$bar.outerWidth()-0,e=BJUI.windowWidth-6;a.faUnLock();a.hoverUnLock();a.$navtab.animate({left:6,width:e},400);a.$bar.animate({left:b},500,function(){a.$sbar.animate({left:0},200);a.$split.hide();d(window).trigger(BJUI.eventType.resizeGrid)});a.isfloat=!1};h.prototype["float"]=function(){this.$sbar.animate({left:-10},200);this.$bar.addClass("shadown").animate({left:0},500);this.isfloat=!0};h.prototype.hideFloat=function(){var a=this,b=0-a.$bar.outerWidth()-0;a.$bar.animate({left:b-10},500,function(){a.$sbar.animate({left:0},100)});a.isfloat=!1};h.prototype.hoverLock=function(){var a=this;a.$lock.hover(function(){a.tipUnLock();a.faUnLock()},function(){a.tipLock();a.faLock()})};h.prototype.hoverUnLock=function(){var a=this;a.$lock.hover(function(){a.tipLock();a.faLock()},function(){a.tipUnLock();a.faUnLock()})};h.prototype.tipLock=function(){this.$lock.tooltip("destroy").tooltip({title:"\u4fdd\u6301\u9501\u5b9a\uff0c\u59cb\u7ec8\u663e\u793a\u5bfc\u822a\u680f",container:"body"})};h.prototype.tipUnLock=function(){this.$lock.tooltip("destroy").tooltip({title:"\u89e3\u9664\u9501\u5b9a\uff0c\u81ea\u52a8\u9690\u85cf\u5bfc\u822a\u680f",container:"body"})};h.prototype.faLock=function(){this.$lock.find("\x3e i").attr("class","fa fa-lock")};h.prototype.faUnLock=function(){this.$lock.find("\x3e i").attr("class","fa fa-unlock-alt")};h.prototype.init=function(){var a=this;BJUI.ui.showSlidebar?a.hoverLock():a.unlock();this.$lock.off("click.bjui.slidebar").on("click.bjui.slidebar",function(){a.isfloat?a.lock():a.unlock();BJUI.ui.showSlidebar=!BJUI.ui.showSlidebar});this.$collapse.hover(function(){a["float"]();a.$navtab.click(function(){a.isfloat&&a.hideFloat()})});this.$split.mousedown(function(b){a.$split2.each(function(){var e=d(this);setTimeout(function(){e.show()},100);e.css({visibility:"visible",left:a.$split.css("left")}).basedrag(d.extend(a.options,{obj:a.$bar,move:"horizontal",event:b,stop:function(){d(this).css("visibility","hidden");var c=parseInt(d(this).css("left"))-parseInt(a.$split.css("left")),b=a.$bar.outerWidth()+c,f=parseInt(a.$navtab.css("left"))+c,c=a.$navtab.outerWidth()-c;a.$bar.css("width",b);a.$split.css("left",d(this).css("left"));a.$navtab.css({left:f,width:c})}}));return!1})});d("#bjui-hnav-navbar-box").length&&a.moveHnav()};h.prototype.moveHnav=function(){var a=d("#bjui-hnav-navbar-box"),b=a.find("\x3e #bjui-hnav-navbar"),e=a.prev(),c=a.next();e.hover(function(){b.stop().animate({left:0},2E3,function(){e.hide()})},function(){b.stop();a.data("hnav.move")&&c.show()}).on("click",function(){b.stop().animate({left:0},"fast",function(){e.hide()});return!1});c.hover(function(){b.stop().animate({left:a.width()-a.data("hnav.liw")-10},2E3,function(){c.hide()})},function(){b.stop();"0px"!=b.css("left")&&e.show()}).on("click",function(){b.stop().animate({left:a.width()-a.data("hnav.liw")-10},"fast",function(){c.hide()});return!1})};h.prototype.initHnav=function(){var a=this.$element.text().trim(),b=this.$element.parent(),e=d("#bjui-accordionmenu"),c,g,f,m;c=b.find("\x3e .items \x3e ul.ztree");g=b.find("\x3e .items \x3e ul.menu-items");if(c.length||g.length)c.length&&(m=c),g.length&&(m=m?m.add(g):g,g.find("a").each(function(){var a=d(this),c=a.data("options");!a.data("icon.init")&&c&&"string"===typeof c&&(c=c.toObj())&&c.faicon&&(c.faicon=c.faicon.trim(),c.faicon.startsWith("fa-")&&(c.faicon=c.faicon.substr(3)),a.prepend('\x3ci class\x3d"fa fa-'+c.faicon+'"\x3e\x3c/i\x3e').data("icon.init",!0).attr("title",a.text()))})),e.empty(),m.each(function(c){var b=d(this),g,m,k=b.data("faicon");b.data("faiconClose");k=k?k:"dot-circle-o";b.data("tit")&&(a=b.data("tit"));g=c?"collapsed":"";m=c?"":" in";g=FRAG.slidePanel.replaceAll("#id#","bjui-collapse"+c).replaceAll("#title#",a).replaceAll("#righticon#",'\x3ci class\x3d"fa fa-angle-down"\x3e\x3c/i\x3e').replaceAll("#class#",g).replaceAll("#bodyclass#",m);g=k?g.replaceAll("#icon#",'\x3ci class\x3d"fa fa-'+k+'"\x3e\x3c/i\x3e'):g.replaceAll("#icon#","");f=d(g);f.find("\x3e .panel-collapse \x3e .panel-body").append(b.removeAttr("data-noinit"));e.append(f);c||f.collapse("show")}),d("#bjui-sidebar").initui(),b.addClass("active").data("bjui.slidebar.hnav.panels",e.find("\x3e .panel")).siblings().removeClass("active")};var q=d.fn.slidebar;d.fn.slidebar=l;d.fn.slidebar.Constructor=h;d.fn.basedrag.noConflict=function(){d.fn.slidebar=q;return this};d(document).one(BJUI.eventType.afterInitUI,function(a){d("#bjui-leftside").slidebar({minW:150,maxW:700})});d(document).on("click.bjui.slidebar.data-api",'[data-toggle\x3d"slidebar"]',function(a){var b=d(this).parent(),e=d("#bjui-accordionmenu"),c=b.data("bjui.slidebar.hnav.panels");e.find("\x3e .panel").detach();c&&c.length?(e.append(c),b.addClass("active").siblings().removeClass("active")):l.call(d(this),"initHnav");a.preventDefault()})}(jQuery);+function(d){var l,h,q;d(function(){l=d('\x3cdiv id\x3d"bjui-contextmenu"\x3e\x3c/div\x3e').hide();h=d('\x3cdiv id\x3d"bjui-contextmenuShadow"\x3e\x3c/div\x3e').hide();q=[];d("body").append("\x3c!-- contextmenu --\x3e").append(l).append(h)});var a=function(a,c){this.$element=d(a);this.options=c};a.DEFAULTS={id:void 0,shadow:!0,bindings:{},ctrSub:null};a.prototype.init=function(){var a=this,c=this.options;if(c.id){q.push({id:c.id,shadow:c.shadow,bindings:c.bindings||{},ctrSub:c.ctrSub});var b=q.length-1;this.$element.on("contextmenu",function(d){a.display(b,this,d,c);return!1})}};a.prototype.display=function(a,c,b,f){var g=this,e=q[a],n=BJUI.regional[e.id],v=FRAG[e.id];d.each(n,function(a,c){v=v.replace("#"+a+"#",n[a])});l.html(v);d.each(e.bindings,function(a,b){d('[rel\x3d"'+a+'"]',l).on("click",function(a){g.hide();b(d(c),d("#bjui-"+e.id))})});a=b.pageX;b=b.pageY;d(window).width()<a+l.width()&&(a-=l.width());d(window).height()<b+l.height()&&(b-=l.height());l.css({left:a,top:b}).show();e.shadow&&h.css({width:l.width(),height:l.height(),left:a+3,top:b+3}).show();d(document).one("click",g.hide);d.isFunction(e.ctrSub)&&e.ctrSub(d(c),d("#bjui-"+e.id))};a.prototype.hide=function(){l.hide();h.hide()};a.prototype.show=function(a){var c=this;if(a.items&&a.items.length)c.$element.on("contextmenu",function(b){var f=!0;a.exclude&&c.$element.find(a.exclude).each(function(){if(this==b.target||d(this).find(b.target).length)f=!1});if(f)c.custom(a.items,b);else return b.stopPropagation(),!f;return!1})};a.prototype.custom=function(a,c){l.empty().html("\x3cul\x3e\x3c/ul\x3e");var b=this,f=b.options,e=l.find("\x3e ul"),k;d.each(a,function(a,c){var f="";c.icon&&(f='\x3ci class\x3d"fa fa-'+c.icon+'"\x3e\x3c/i\x3e');if("diver"==c.title)k=d('\x3cli class\x3d"diver"\x3e\x3c/li\x3e');else if(k=d('\x3cli\x3e\x3cspan class\x3d"icon"\x3e'+f+'\x3c/span\x3e\x3cspan class\x3d"title"\x3e'+c.title+"\x3c/span\x3e\x3c/li\x3e"),c.func&&"string"===typeof c.func&&(c.func=c.func.toFunc()),c.func)k.on("click",function(a){b.hide();c.func(b.$element,k)});k.appendTo(e)});var n=c.pageX,v=c.pageY;d(window).width()<n+l.width()&&(n-=l.width());d(window).height()<v+l.height()&&(v-=l.height());l.css({left:n,top:v}).show();f.shadow&&h.css({width:l.width(),height:l.height(),left:n+3,top:v+3}).show();d(document).one("click",b.hide)};var b=d.fn.contextmenu;d.fn.contextmenu=function(b){var c=arguments,g=b;return this.each(function(){var f=d(this),e=d.extend({},a.DEFAULTS,f.data(),"object"===typeof b&&b),k=f.data("bjui.contextmenu");k||f.data("bjui.contextmenu",k=new a(this,e));if("string"===typeof g&&d.isFunction(k[g]))if([].shift.apply(c),c)k[g].apply(k,c);else k[g]();else k.init()})};d.fn.contextmenu.Constructor=a;d.fn.contextmenu.noConflict=function(){d.fn.contextmenu=b;return this}}(jQuery);+function(d){function l(a){var c=arguments,b=a,f=d("body"),g=f.data("bjui.navtab")||{};return this.each(function(){d(this);var e=d.extend({},p.DEFAULTS,"object"===typeof a&&a),m=e&&e.id,n;if(!m)m=g.current?g.current.options.id:BJUI.ui.overwriteHomeTab?"main":"navtab";else if(!m.isNormalID()){BJUI.debug("Navtab Plugin: ID ["+m+"] "+BJUI.regional.idChecked);return}e.id=m;(n=g&&g[m])?"object"===typeof a&&a&&d.extend(n.options,a):g[m]=n=new p(e);f.data("bjui.navtab",g);if("string"===typeof b&&d.isFunction(n[b]))if([].shift.apply(c),c)n[b].apply(n,c);else n[b]();else n.openTab()})}var h,q,a,b,e,c,g,f,m,k,n,v,r;d(function(){(function(){h=0;b=d("#bjui-navtab");e=b.find(".navtab-tab");c=b.find(".navtab-panel");g=b.find(".tabsLeft");f=b.find(".tabsRight");m=b.find(".tabsMore");k=b.find(".tabsMoreList");n=e.find("li:first");v=k.find("li:first");g.click(function(){d(this).navtab("scrollPrev")});f.click(function(){d(this).navtab("scrollNext")});m.click(function(){k.show()});d(document).on("click.bjui.navtab.switchtab",function(a){a="I"==a.target.tagName?d(a.target).parent():d(a.target);m[0]!=a[0]&&k.hide()});var a,r;n.navtab("contextmenu",n).click(function(){d(this).hasClass("active")||d(this).navtab("switchTab","main")}).find("\x3e a \x3e span").html(function(c,b){return a=b.replace("#maintab#",BJUI.regional.maintab)});r=d.extend({},p.DEFAULTS,n.data(),{id:"main",title:a});n.data("options",d.extend({},r));if(n.attr("data-url"))d(document).one(BJUI.eventType.initUI,function(a){n.removeAttr("data-url").navtab("reload",r)});setTimeout(function(){v.trigger("click")},100);v.click(function(){d(this).hasClass("active")?k.hide():d(this).navtab("switchTab","main")}).find("\x3e a").html(function(a,c){return c.replace("#maintab#",BJUI.regional.maintab)})})()});var p=function(a){this.options=a;this.tools=this.TOOLS()};p.DEFAULTS={id:null,title:"New tab",url:null,type:"GET",data:{},loadingmask:!0,fresh:!1,autorefresh:!1,onLoad:null,beforeClose:null,onClose:null};p.prototype.TOOLS=function(){var m=this;return{getDefaults:function(){return p.DEFAULTS},getTabs:function(){return e.find("\x3e li")},getPanels:function(){return c.find("\x3e div")},getMoreLi:function(){return k.find("\x3e li")},getTab:function(a){a=this.indexTabId(a);if(0<=a)return this.getTabs().eq(a)},getPanel:function(a){a=this.indexTabId(a);if(0<=a)return this.getPanels().eq(a)},getTabsW:function(a,c){return this.tabsW(this.getTabs().slice(a,c))},tabsW:function(a){var c=0;a.each(function(){c+=d(this).outerWidth(!0)});return c},indexTabId:function(a){var c=-1;if(!a)return c;this.getTabs().each(function(b){if(d(this).data("options").id==a)return c=b,!1});return c},getLeft:function(){return e.position().left},getScrollBarW:function(){return b.width()-55},visibleStart:function(){var a=this.getTabs(),c=this.getLeft(),b=0,f=0;a.each(function(a){if(0<=b+c)return f=a,!1;b+=d(this).outerWidth(!0)});return f},visibleEnd:function(){var a=this,c=this.getTabs(),b=this.getLeft(),f=0,g=c.length;c.each(function(c){f+=d(this).outerWidth(!0);if(f+b>a.getScrollBarW())return g=c,!1});return g},scrollPrev:function(){var a=this.visibleStart();0<a&&this.scrollTab(-this.getTabsW(0,a-1))},scrollNext:function(){var a=this.visibleEnd();a<this.getTabs().size()&&this.scrollTab(-this.getTabsW(0,a+1)+this.getScrollBarW())},scrollTab:function(a,c){e.animate({left:a},150,function(){m.tools.ctrlScrollBtn()})},scrollCurrent:function(){var a=this.tabsW(this.getTabs()),c=this.getScrollBarW();a<=c?this.scrollTab(0):this.getLeft()<c-a?this.scrollTab(c-a):h<this.visibleStart()?this.scrollTab(-this.getTabsW(0,h)):h>=this.visibleEnd()&&this.scrollTab(c-this.getTabs().eq(h).outerWidth(!0)-this.getTabsW(0,h))},ctrlScrollBtn:function(){var a=this.tabsW(this.getTabs());this.getScrollBarW()>a?(g.hide(),f.hide(),e.parent().removeClass("tabsPageHeaderMargin")):(g.show().removeClass("tabsLeftDisabled"),f.show().removeClass("tabsRightDisabled"),e.parent().addClass("tabsPageHeaderMargin"),0<=this.getLeft()?g.addClass("tabsLeftDisabled"):this.getLeft()<=this.getScrollBarW()-a&&f.addClass("tabsRightDisabled"))},switchTab:function(c){var b=this.getTabs().removeClass("active").eq(c).addClass("active"),f=this.getPanels(),g=f.eq(c),e=m.options.onSwitch?m.options.onSwitch.toFunc():null,n=d(FRAG.maskBackground);f.css({top:"-10000000px"});b.data("reloadFlag")?(g.animate({top:0}),m.refresh(b.data("options").id)):g.find(".bjui-ajax-mask").length?g.css({top:0}):(g.css({top:0}).append(n),n.fadeOut("normal",function(){d(this).remove()}));this.getMoreLi().removeClass("active").eq(c).addClass("active");h=c;this.scrollCurrent();q=b;d.CurrentNavtab=a=g;e&&e.apply(m);c=d("body").data("bjui.navtab");m.options.id||d.extend(m.options,b.data("options"));c.current=m;g.trigger("bjui.navtab.switch")},closeTab:function(a,c){var b=this.getTabs().eq(a),f=this.getMoreLi().eq(a),g=this.getPanels().eq(a),e=b.data("options"),n=e.beforeClose?e.beforeClose.toFunc():null,k=e.onClose?e.onClose.toFunc():null,p=!0;n&&(p=n.apply(m,[g]));p?(b.remove(),f.remove(),g.trigger(BJUI.eventType.beforeCloseNavtab).remove(),r&&clearInterval(r),k&&k.apply(m),h>=a&&h--,c&&(b=this.indexTabId(c),0<b&&(h=b)),b=d("body").data("bjui.navtab"),b[e.id]&&delete b[e.id],this.scrollCurrent(),this.switchTab(h)):m.tools.switchTab(a)},closeOtherTab:function(a){a=a||h;this.getTabs().each(function(c){0<c&&a!=c&&d(this).find("\x3e .close").trigger("click")})},loadUrlCallback:function(a){a.find(":button.btn-close").click(function(){m.closeCurrentTab()})},updateTit:function(a,c){this.getTabs().eq(a).find("\x3e a").attr("title",c).find("\x3e span").html(c);this.getMoreLi().eq(a).find("\x3e a").attr("title",c).html(c)},reload:function(a,c){c=c||a.data("reloadFlag");var b=a.data("options");if(c){a.data("reloadFlag",!1);var d=m.tools.getPanel(b.id);a.hasClass("external")?m.openExternal(b.url,d,b.data):m.tools.reloadTab(d,b)}},reloadTab:function(a,c){var b=c.onLoad?c.onLoad.toFunc():null,d=c.autorefresh&&(isNaN(String(c.autorefresh))?15:c.autorefresh);a.trigger(BJUI.eventType.beforeLoadNavtab).ajaxUrl({type:c.type||"GET",url:c.url,data:c.data||{},loadingmask:c.loadingmask,callback:function(c){m.tools.loadUrlCallback(a);b&&b.apply(m,[a]);r&&clearInterval(r);d&&(r=setInterval(function(){a.navtab("refresh")},1E3*d));BJUI.ui.clientPaging&&a.data("bjui.clientPaging")&&a.pagination("setPagingAndOrderby",a)}})}}};p.prototype.contextmenu=function(a){var c=this;a.contextmenu({id:"navtabCM",bindings:{reload:function(a,b){a.data("options").url&&c.refresh(a.data("options").id)},closeCurrent:function(a,b){var d=a.data("options").id;d?c.closeTab(d):c.closeCurrentTab()},closeOther:function(a,b){if(a.index()){var d=c.tools.indexTabId(a.data("options").id);c.tools.closeOtherTab(0<d?d:h)}else c.closeAllTab()},closeAll:function(a,b){c.closeAllTab()}},ctrSub:function(a,b){var d=b.find('[rel\x3d"reload"]'),f=b.find('[rel\x3d"closeCurrent"]');b.find('[rel\x3d"closeOther"]');b.find('[rel\x3d"closeAll"]');c.tools.getTabs();a.index()||(f.addClass("disabled"),a.data("options").url||d.addClass("disabled"))}})};p.prototype.openTab=function(){var a=this,b=this.options,f=this.tools,g;!b.url&&b.href&&(b.url=b.href);if(b.url)if(b.url=decodeURI(b.url).replacePlh(),b.url.isFinishedTm()){b.url=encodeURI(b.url);g=b.id?f.indexTabId(b.id):h;if(0<=g){var m=f.getTabs().eq(g),n=f.getPanels().eq(g),p=m.data("options");b.fresh||b.url!=p.url?a.reload(b):b.title!=p.title&&(p.title=b.title,f.updateTit(g,b.title));h=g;"main"==b.id&&this.contextmenu(m)}else{var m=d('\x3cli\x3e\x3ca href\x3d"javascript:" title\x3d"#title#"\x3e\x3cspan\x3e#title#\x3c/span\x3e\x3c/a\x3e\x3cspan class\x3d"close"\x3e\x26times;\x3c/span\x3e\x3c/li\x3e'.replaceAll("#title#",b.title)),n=d('\x3cdiv class\x3d"navtabPage unitBox"\x3e\x3c/div\x3e'),r=d('\x3cli\x3e\x3ca href\x3d"javascript:" title\x3d"#title#"\x3e#title#\x3c/a\x3e\x3c/li\x3e'.replaceAll("#title#",b.title));m.appendTo(e);n.appendTo(c);r.appendTo(k);m.data("options",d.extend({},b));b.external||b.url&&b.url.isExternalUrl()?(m.addClass("external"),this.openExternal(b.url,n,b.data)):(m.removeClass("external"),f.reloadTab(n,b));h=f.getTabs().length-1;this.contextmenu(m);m.on("click",function(c){d(this).hasClass("active")||a.switchTab(b.id)}).on("click.bjui.navtab.close",".close",function(c){a.closeTab(b.id)}).on("mousedown.bjui.navtab.drag","a",function(c){m.data("bjui.navtab.drag",!0);setTimeout(d.proxy(function(){m.data("bjui.navtab.drag")&&a.drag(c,m,n,r)},a),150);c.preventDefault()}).on("mouseup.bjui.navtab.drag","a",function(a){m.data("bjui.navtab.drag",!1)});r.on("click",function(){a.switchTab(b.id)})}f.switchTab(h);f.scrollCurrent()}else d("body").alertmsg("error",b.warn||BJUI.regional.plhmsg),BJUI.debug("Navtab Plugin: The new navtab's url is incorrect, url: "+b.url);else BJUI.debug("Navtab Plugin: Error trying to open a navtab, url is undefined!")};p.prototype.closeTab=function(a){a=this.tools.indexTabId(a);0<a&&this.tools.closeTab(a)};p.prototype.closeCurrentTab=function(a){0<h&&this.tools.closeTab(h,a)};p.prototype.closeAllTab=function(){this.tools.getTabs().find("\x3e .close").trigger("click")};p.prototype.reloadFlag=function(a){a=a.split(",");for(var c=0;c<a.length;c++){var b=this.tools.getTab(a[c].trim());b&&(this.tools.indexTabId(a[c])==h?this.tools.reload(b,!0):b.data("reloadFlag",!0))}};p.prototype.switchTab=function(a){a=this.tools.indexTabId(a);this.tools.switchTab(a)};p.prototype.scrollPrev=function(){this.tools.scrollPrev()};p.prototype.scrollNext=function(){this.tools.scrollNext()};p.prototype.refresh=function(a){var c;(a=a?"string"===typeof a?this.tools.getTab(a):a:q)&&a.length&&(c=this.tools.getPanel(a.data("options").id),c.removeData("bjui.clientPaging"),this.reload(a.data("options")))};p.prototype.reload=function(a){var c=this,b=d.extend({},"object"===typeof a&&a),f=b.id?this.tools.getTab(b.id):this.tools.getTabs().eq(h);if(f){var g=f.data("options"),e=function(){b.title&&b.title!=g.title&&c.tools.updateTit(f.index(),b.title);f.data("options",d.extend({},g,b));c.tools.reload(f,!0)};g.reloadWarn?d("body").alertmsg("confirm",g.reloadWarn,{okCall:function(){e()}}):e()}};p.prototype.reloadForm=function(c,b){var f=d.extend({},"object"===typeof b&&b),g=f.id?this.tools.getTab(f.id):q,e=f.id?this.tools.getPanel(f.id):a;if(g&&e){g.data("options");var m={},n;if((n=f.form||e.find("#pagerForm"))&&n.length)if(f.type=f.type||n.attr("method")||"POST",f.url=f.url||n.attr("action"),n=n.serializeJson(),c){var k=BJUI.pageInfo,p;for(p in k)m[k[p]]=n[k[p]]}else m=n;f.data=d.extend({},f.data||{},m);g.hasClass("external")?this.openExternal(f.url,e,f.data):this.tools.reloadTab(e,f)}};p.prototype.getCurrentPanel=function(){return this.tools.getPanels().eq(h)};p.prototype.checkTimeout=function(){var c=JSON.parse(a.html());c&&c[BJUI.keys.statusCode]==BJUI.statusCode.timeout&&this.closeCurrentTab()};p.prototype.openExternal=function(a,c,b){var f=c.closest(".navtab-panel").height();b&&!d.isEmptyObject(b)&&(a.indexOf("?")?a+="\x26":"?",a+=d.param(b));c.html(FRAG.externalFrag.replaceAll("{url}",a).replaceAll("{height}",f+"px"))};p.prototype.drag=function(a,c,b,f){var g=this.tools.getTabs(),m=this.tools.getPanels(),n=this.tools.getMoreLi(),k=e.next(".bjui-navtab-drag");c.prev();c.next();var p=c.index();c.width();var r=c.position().left,v=[],h=[],t;2>=g.length||(k.length||(k=d('\x3cdiv class\x3d"bjui-navtab-drag" style\x3d"position:absolute; top:0; left:1px; width:2px; height:25px; background:#ff6600; display:none;"\x3e\x3c/div\x3e'),k.insertAfter(e)),k.css("left",r-2),e.find("\x3e li").each(function(){v.push(d(this).position().left)}),c.find("\x3e a").basedrag({move:"horizontal",oleft:r,drag:function(a,b,f,e){c.addClass("navtab-drag");h=[f];d.merge(h,v);h.sort(function(a,c){return a-c});(t=d.inArray(f,h))||(t=1);t==g.length?k.css("left",v[t-1]-2+g.last().width()):k.css("left",v[t]-2);k.show()},stop:function(){c.removeClass("navtab-drag");k.hide();p!=t&&(t==g.length?p!=g.length-1&&(c.insertAfter(g.eq(t-1)),b.insertAfter(m.eq(t-1)),f.insertAfter(n.eq(t-1))):(c.insertBefore(g.eq(t)),b.insertBefore(m.eq(t)),f.insertBefore(n.eq(t))))},event:a,nounbind:!0}))};var x=d.fn.navtab;d.fn.navtab=l;d.fn.navtab.Constructor=p;d.fn.navtab.noConflict=function(){d.fn.navtab=x;return this};BJUI.navtab=function(){l.apply(d("body"),arguments)};d(document).on("click.bjui.navtab.data-api",'[data-toggle\x3d"navtab"]',function(a){var c=d(this),b=c.attr("href"),f=c.data(),g=f.options;g&&("string"===typeof g&&(g=g.toObj()),"object"===typeof g&&d.extend(f,g));f.title||(f.title=c.text());b&&!f.url&&(f.url=b);l.call(c,f);a.preventDefault()})}(jQuery);+function(d){function l(a){var c=arguments,f=a,e=d("body"),k=e.data("bjui.dialog")||{};return this.each(function(){d(this);var g=d.extend({},b.DEFAULTS,"object"===typeof a&&a),m=g&&g.id,r;if(!m)m=k.current?k.current.options.id:"dialog";else if(!m.isNormalID()){BJUI.debug("Dialog Plugin: ID ["+m+"] "+BJUI.regional.idChecked);return}g.id=m;(r=k&&k[m])?"object"===typeof a&&a&&d.extend(r.options,a):k[m]=r=new b(g);e.data("bjui.dialog",k);if("string"===typeof f&&d.isFunction(r[f]))if([].shift.apply(c),c)r[f].apply(r,c);else r[f]();else r.open()})}var h,q,a;d(function(){d("#bjui-resizable");q="dialogShadow";a=b.ZINDEX;d("body").append("\x3c!-- dialog resizable --\x3e").append(FRAG.resizable)});var b=function(a){this.$element=d("body");this.options=a;this.tools=this.TOOLS()};b.DEFAULTS={id:null,title:"New Dialog",url:null,type:"GET",data:{},loadingmask:!0,width:500,height:300,minW:65,minH:40,max:!1,mask:!1,resizable:!0,drawable:!0,maxable:!0,minable:!0,fresh:!1,onLoad:null,beforeClose:null,onClose:null};b.ZINDEX=30;b.prototype.TOOLS=function(){var a=this;return{getDefaults:function(){return b.DEFAULTS},init:function(c){var b=a.options.width>a.options.minW?a.options.width:a.options.minW,g=a.options.height>a.options.minH?a.options.height:a.options.minH,e=d(window).width(),n=d(window).height(),v=a.options.max?0:(n-g)/3;b>e&&(b=e);g>n&&(g=n);c.height(g).width(b).show().css({left:(e-b)/2,top:0,opacity:.1}).animate({top:0<v?v:0,opacity:1}).addClass(q).find("\x3e .dialogContent").height(g-d("\x3e .dialogHeader",c).outerHeight()-6);d("body").find("\x3e .bjui-dialog-container").not(c).removeClass(q)},reload:function(c,b){var f=c.find("\x3e .dialogContent"),g,e=b&&b.data,v;b=b||c.data("options");g=b.onLoad?b.onLoad.toFunc():null;c.trigger(BJUI.eventType.beforeLoadDialog);b.url?(e&&("string"===typeof e&&(e=e.trim().startsWith("{")?e.toObj():e.toFunc()),"function"===typeof e&&(e=e.apply())),f.ajaxUrl({type:b.type||"GET",url:b.url,data:e||{},loadingmask:b.loadingmask,callback:function(b){g&&g.apply(a,[c]);BJUI.ui.clientPaging&&c.data("bjui.clientPaging")&&c.pagination("setPagingAndOrderby",c)}})):(b.html?(v=b.html,d.isFunction(v.toFunc())&&(v=v.toFunc())):b.target&&(v=d(b.target).html()||c.data("bjui.dialog.target"),d(b.target).empty(),c.data("bjui.dialog.target",v)),f.trigger(BJUI.eventType.beforeAjaxLoad).html(v).initui(),g&&g.apply(a,[c]))},resizeContent:function(a,c,b){a.find("\x3e .dialogContent").css({width:c-12,height:b-a.find("\x3e .dialogHeader").outerHeight()-6}).resizePageH();d(window).trigger(BJUI.eventType.resizeGrid)}}};b.prototype.open=function(){var c=this,b=c.options,f=d("body"),e=f.data("bjui.dialog"),k=e[b.id],n=k&&k.dialog;if(b.target||d(b.target).length||b.html)b.url=void 0;else if(!b.url&&b.href&&(b.url=b.href),b.url){b.url=decodeURI(b.url).replacePlh();if(!b.url.isFinishedTm()){BJUI.alertmsg("error",b.warn||BJUI.regional.plhmsg);BJUI.debug("Dialog Plugin: The new dialog's url is incorrect, url: "+b.url);return}b.url=encodeURI(b.url)}else{BJUI.debug("Dialog Plugin: Error trying to open a dialog, url is undefined!");return}if(n)f=n.data("options"),this.switchDialog(n),n.is(":hidden")&&n.show(),(b.fresh||b.url!=f.url)&&c.reload(b);else{var v=BJUI.regional.dialog,v=FRAG.dialog.replace("#close#",v.close).replace("#maximize#",v.maximize).replace("#restore#",v.restore).replace("#minimize#",v.minimize).replace("#title#",v.title),n=d(v).data("options",d.extend({},b)).css("z-index",++a).hide().appendTo(f);n.find("\x3e .dialogHeader \x3e h1 \x3e span.title").html(b.title);this.tools.init(n);b.maxable?n.find("a.maximize").show():n.find("a.maximize").hide();b.minable?n.find("a.minimize").show():n.find("a.minimize").hide();b.max&&c.maxsize(n);b.mask?this.addMask(n):b.minable&&d.fn.taskbar&&this.$element.taskbar({id:b.id,title:b.title});n.on("click",function(a){d(a.target).data("bjui.dialog")||h&&h[0]!=n[0]&&c.switchDialog(n)}).on("click",".btn-close",function(a){c.close(n);a.preventDefault()}).on("click",".dialogHeader \x3e a",function(a){var b=d(this);b.hasClass("close")&&c.close(n);b.hasClass("minimize")&&c.minimize(n);b.hasClass("maximize")&&(c.switchDialog(n),c.maxsize(n));b.hasClass("restore")&&c.restore(n);a.preventDefault();a.stopPropagation()}).on("dblclick",".dialogHeader \x3e h1",function(a){b.maxable&&(n.find("\x3e .dialogHeader \x3e a.restore").is(":hidden")?n.find("a.maximize").trigger("click"):n.find("\x3e .dialogHeader \x3e a.restore").trigger("click"))}).on("mousedown.bjui.dialog.drag",".dialogHeader \x3e h1",function(a){c.switchDialog(n);b.drawable&&!n.data("max")&&(n.data("bjui.dialog.task",!0),setTimeout(d.proxy(function(){n.data("bjui.dialog.task")&&c.drag(a,n)},c),150),a.preventDefault())}).on("mouseup.bjui.dialog.drag",".dialogHeader \x3e h1",function(a){n.data("bjui.dialog.task",!1)}).on("mousedown.bjui.dialog.resize",'div[class^\x3d"resizable"]',function(a){if(!b.drawable||n.data("max")||!b.resizable)return!1;var f=d(this);c.switchDialog(n);c.resizeInit(a,d("#bjui-resizable"),n,f);f.show();a.preventDefault()}).on("mouseup.bjui.dialog.resize",'div[class^\x3d"resizable"]',function(a){a.preventDefault()});k.dialog=n;this.tools.reload(n,b)}d.CurrentDialog=h=n;e.current=this};b.prototype.addMask=function(c){var b=c.data("bjui.dialog.mask");c.wrap('\x3cdiv style\x3d"z-index:'+a+'" class\x3d"bjui-dialog-wrap"\x3e\x3c/div\x3e');c.find("\x3e .dialogHeader \x3e a.minimize").hide();b&&b.length||(b=d(FRAG.dialogMask),b.css("z-index",1).show().insertBefore(c),c.data("bjui.dialog.mask",b))};b.prototype.refresh=function(a){if(a&&"string"===typeof a){a=a.split(",");for(var c=d("body").data("bjui.dialog"),b=0;b<a.length;b++){var e=c[a[b].trim()].dialog;e&&(e.removeData("bjui.clientPaging"),this.tools.reload(e))}}else h&&(h.removeData("bjui.clientPaging"),this.tools.reload(h))};b.prototype.reload=function(a){var c=this,b=d.extend({},"object"===typeof a&&a);a=d("body").data("bjui.dialog");var e=b.id&&a[b.id]&&a[b.id].dialog||c.getCurrent();if(e&&e.length){var k=e.data("options"),b=d.extend({},k,b),n=function(){var a=e.find("\x3e .dialogContent");b.width!=k.width&&(b.max?e.animate({width:b.width},"normal",function(){a.width(b.width)}):(e.width(b.width),a.width(b.width)));b.height!=k.height&&(b.max?e.animate({height:b.height},"normal",function(){a.height(b.height-e.find("\x3e .dialogHeader").outerHeight()-6).resizePageH()}):(e.height(b.height),a.height(b.height-e.find("\x3e .dialogHeader").outerHeight()-6)));b.maxable!=k.maxable&&(b.maxable?e.find("a.maximize").show():e.find("a.maximize").hide());b.minable!=k.minable&&(b.minable?e.find("a.minimize").show():e.find("a.minimize").hide());b.max!=k.max&&b.max&&setTimeout(c.maxsize(e),10);b.mask!=k.mask&&(b.mask?(c.addMask(e),d.fn.taskbar&&c.$element.taskbar("closeDialog",b.id)):b.minable&&d.fn.taskbar&&c.$element.taskbar({id:b.id,title:b.title}));b.title!=k.title&&(e.find("\x3e .dialogHeader \x3e h1 \x3e span.title").html(b.title),e.taskbar("changeTitle",b.id,b.title));e.data("options",d.extend({},b));c.tools.reload(e,k)};k.reloadWarn?e.alertmsg("confirm",k.reloadWarn,{okCall:function(){n()}}):n()}};b.prototype.reloadForm=function(a,b){var c=d.extend({},"object"===typeof b&&b),e=d("body").data("bjui.dialog"),g;c.id?e&&e[c.id]&&(g=e[c.id].dialog):g=h;if(g){g.data("options");var e={},n;if((n=c.form||g.find("#pagerForm"))&&n.length)if(c.type=c.type||n.attr("method")||"POST",c.url=c.url||n.attr("action"),n=n.serializeJson(),a){var v=BJUI.pageInfo,r;for(r in v)e[v[r]]=n[v[r]]}else e=n;c.data=d.extend({},c.data||{},e);this.tools.reload(g,c)}};b.prototype.getCurrent=function(){return h};b.prototype.switchDialog=function(a){var b=a.css("z-index");if(h&&h!=a){if(h.data("options").mask)return;var c=h.css("z-index"),e=d("body").data("bjui.dialog");h.css("z-index",b);a.css("z-index",c);d.CurrentDialog=h=a;e.current=this;d.fn.taskbar&&this.$element.taskbar("switchTask",a.data("options").id)}a.addClass(q);d("body").find("\x3e .bjui-dialog-container").not(a).removeClass(q)};b.prototype.close=function(c){if("object"!=typeof c||"undefined"==typeof c||"null"==typeof c||"null"==c||null==c)return!1;var e=this,f=d("body").data("bjui.dialog"),m="string"===typeof c?f[c].dialog:c;c=m.data("bjui.dialog.mask");var k=m.data("options"),n=m.data("bjui.dialog.target"),v=k.beforeClose?k.beforeClose.toFunc():null,r=k.onClose?k.onClose.toFunc():null,p=!0;m&&k&&(v&&(p=v.apply(e,[m])),p?(k.target&&n&&d(k.target).html(n),c&&c.length?(c.remove(),m.unwrap()):d.fn.taskbar&&this.$element.taskbar("closeDialog",k.id),m.animate({top:-m.outerHeight(),opacity:.1},"normal",function(){delete f[k.id];m.trigger(BJUI.eventType.beforeCloseDialog).remove();r&&r.apply(e);d.CurrentDialog=h=null;var c=d("body").find(".bjui-dialog-container"),g=null;c.length?g=e.$element.getMaxIndexObj(c):a=b.ZINDEX;g&&g.is(":visible")&&(d.CurrentDialog=h=g,e.switchDialog(g))})):e.switchDialog(m))};b.prototype.closeCurrent=function(){this.close(h)};b.prototype.checkTimeout=function(){var a=h.find("\x3e .dialogContent");(a=JSON.parse(a.html()))&&a[BJUI.keys.statusCode]==BJUI.statusCode.timeout&&this.closeCurrent()};b.prototype.maxsize=function(a){a.data("original",{top:a.css("top"),left:a.css("left"),width:a.css("width"),height:a.css("height")}).data("max",!0);a.find("\x3e .dialogHeader \x3e a.maximize").hide();a.find("\x3e .dialogHeader \x3e a.restore").show();var b=d(window).width(),c=d(window).height()-d("#bjui-taskbar").height()-1;a.css({top:0,left:0,width:b,height:c});this.tools.resizeContent(a,b,c)};b.prototype.restore=function(a){var b=a.data("original"),c=parseInt(b.width),d=parseInt(b.height);a.css({top:b.top,left:b.left,width:c,height:d});this.tools.resizeContent(a,c,d);a.find("\x3e .dialogHeader \x3e a.maximize").show();a.find("\x3e .dialogHeader \x3e a.restore").hide();a.data("max",!1)};b.prototype.minimize=function(a){a.hide();d.fn.taskbar&&this.$element.taskbar("minimize",a);a=d("body").find(".bjui-dialog-container:visible");var b=null;a.length&&(b=this.$element.getMaxIndexObj(a));b&&this.switchDialog(b)};b.prototype.drag=function(a,b){d("#bjui-dialogProxy");b.find("\x3e .dialogContent").css("opacity",".3");b.basedrag({selector:"\x3e .dialogHeader",stop:function(){b.css({left:b.css("left"),top:b.css("top")}).find("\x3e .dialogContent").css("opacity",1)},event:a,nounbind:!0})};b.prototype.resizeDialog=function(a,b,f){var c=parseInt(a.css("left")),e=parseInt(a.css("top")),g=parseInt(a.css("height"));a=parseInt(a.css("width"));"n"==f||"nw"==f?parseInt(b.css("top")):parseInt(b.css("height"));0>e&&(e=0);b.css({top:e,left:c,width:a+2,height:g+1}).find("\x3e .dialogContent").css("width",a-10);"w"!=f&&"e"!=f&&b.find("\x3e .dialogContent").css({height:g-b.find("\x3e .dialogHeader").outerHeight()-6}).resizePageH();d(window).trigger(BJUI.eventType.resizeGrid)};b.prototype.resizeInit=function(a,b,f,e){e=e.attr("tar");d("body").css("cursor",e+"-resize");b.css({top:f.css("top"),left:f.css("left"),height:f.outerHeight(),width:f.css("width")}).show();this.options.dragCurrent||(this.options.dragCurrent={$resizable:b,$dialog:f,target:e,oleft:parseInt(b.css("left"))||0,owidth:parseInt(b.css("width"))||0,otop:parseInt(b.css("top"))||0,oheight:parseInt(b.css("height"))||0,ox:a.pageX||a.screenX,oy:a.pageY||a.clientY},d(document).on("mouseup.bjui.dialog.resize",d.proxy(this.resizeStop,this)),d(document).on("mousemove.bjui.dialog.resize",d.proxy(this.resizeStart,this)))};b.prototype.resizeStart=function(a){var b=this.options.dragCurrent;if(b){a||(a=window.event);var c=(a.pageX||a.screenX)-b.ox,e=(a.pageY||a.clientY)-b.oy,k=b.$dialog.data("bjui.dialog.mask");if(!k||!k.length)if(0>=(a.pageY||a.clientY)||(a.pageY||a.clientY)>=d(window).height()-b.$dialog.find("\x3e .dialogHeader").outerHeight())return;a=b.target;var k=b.owidth,n=b.oheight;"n"!=a&&"s"!=a&&(k+=0<=a.indexOf("w")?-c:c);k>=this.options.minW&&(0<=a.indexOf("w")&&b.$resizable.css("left",b.oleft+c),"n"!=a&&"s"!=a&&b.$resizable.css("width",k));"w"!=a&&"e"!=a&&(n+=0<=a.indexOf("n")?-e:e);n>=this.options.minH&&(0<=a.indexOf("n")&&b.$resizable.css("top",b.otop+e),"w"!=a&&"e"!=a&&b.$resizable.css("height",n))}};b.prototype.resizeStop=function(a){a=this.options.dragCurrent;if(!a)return!1;d(document).off("mouseup.bjui.dialog.resize").off("mousemove.bjui.dialog.resize");this.options.dragCurrent=null;this.resizeDialog(a.$resizable,a.$dialog,a.target);d("body").css("cursor","");a.$resizable.hide()};var e=d.fn.dialog;d.fn.dialog=l;d.fn.dialog.Constructor=b;d.fn.dialog.noConflict=function(){d.fn.dialog=e;return this};BJUI.dialog=function(){l.apply(d("body"),arguments)};d(document).on("click.bjui.dialog.data-api",'[data-toggle\x3d"dialog"]',function(a){var b=d(this),c=b.attr("href"),e=b.data(),k=e.options;k&&("string"===typeof k&&(k=k.toObj()),"object"===typeof k&&d.extend(e,k));e.title||(e.title=b.text());c&&!e.url&&(e.url=c);l.call(b,e);a.preventDefault()})}(jQuery);+function(d){var l,h,q,a,b,e,c,g,f;d(function(){(function(){l=d("#bjui-resizable");h=d(FRAG.taskbar);q=h.find(".taskbarContent");a=q.find("\x3e ul");b=h.find(".taskbarLeft");e=h.find(".taskbarRight");c="disabled";g="selected";f="taskbarMargin";d("body").append("\x3c!-- dialog task bar --\x3e").append(h);b.click(function(a){d(this).taskbar("scrollLeft")});e.click(function(a){d(this).taskbar("scrollRight")})})()});var m=function(a,b){this.$element=d(a);this.$task=null;this.options=b;this.tools=this.TOOLS()};m.DEFAULTS={id:void 0,title:void 0};m.prototype.init=function(){var b=this,c=a.find("#task-"+this.options.id);this.show();c.length?c.find("\x3e div \x3e span.title").html(this.options.title):(c=d('\x3cli id\x3d"#taskid#"\x3e\x3cdiv class\x3d"taskbutton"\x3e\x3cspan\x3e\x3ci class\x3d"fa fa-th-large"\x3e\x3c/i\x3e\x3c/span\x3e \x3cspan class\x3d"title"\x3e#title#\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"close"\x3e\x3ci class\x3d"fa fa-times-circle"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/li\x3e'.replace("#taskid#","task-"+this.options.id).replace("#title#",this.options.title)),c.appendTo(a));this.contextmenu(c);this.switchTask(c);this.tools.scrollTask(c);c.click(function(a){d(a.target).closest("div").hasClass("close")||d(a.target).hasClass("close")?c.dialog("close",b.options.id):(a=d("body").data("bjui.dialog")[b.options.id].dialog,c.hasClass("selected")?a.find(".dialogHeader a.minimize").trigger("click"):a.is(":hidden")?b.restoreDialog(a):(a.trigger("click"),c.addClass(g)),b.scrollCurrent(c));return!1})};m.prototype.TOOLS=function(){return{scrollCurrent:function(){if(this.tasksW(this.getTasks())>this.getTaskBarW()){var b=this,c=a.find("\x3e li:last-child"),c=this.getTaskBarW()-c.position().left-c.outerWidth(!0);a.animate({left:c},200,function(){b.ctrlScrollBtn()})}else this.ctrlScrollBtn()},getTaskBarW:function(){return q.width()-(b.is(":hidden")?b.width()+2:0)-(e.is(":hidden")?e.width()+2:0)},scrollTask:function(b){var c=this;b.position().left+this.getLeft()+b.outerWidth()>this.getBarWidth()?(b=this.getTaskBarW()-b.position().left-b.outerWidth(!0)-2,a.animate({left:b},200,function(){c.ctrlScrollBtn()})):0>b.position().left+this.getLeft()&&(b=this.getLeft()-(b.position().left+this.getLeft()),a.animate({left:b},200,function(){c.ctrlScrollBtn()}))},ctrlScrollBtn:function(){var a=this.tasksW(this.getTasks());this.getTaskBarW()>a?(q.removeClass(f),e.hide(),b.hide(),this.getTasks().eq(0).length&&this.scrollTask(this.getTasks().eq(0))):(q.addClass(f),e.show().removeClass(c),b.show().removeClass(c),0<=this.getLeft()&&b.addClass(c),this.getLeft()<=this.getTaskBarW()-a&&e.addClass(c))},getLeft:function(){return a.position().left},visibleStart:function(){for(var a=this.getLeft(),b=this.getTasks(),c=0;c<b.size();c++)if(0<=b.eq(c).position().left+b.eq(c).outerWidth(!0)+a)return b.eq(c);return b.eq(0)},visibleEnd:function(){for(var a=this.getLeft(),b=this.getTasks(),c=0;c<b.size();c++)if(b.eq(c).position().left+b.eq(c).outerWidth(!0)+a>this.getBarWidth())return b.eq(c);return b.eq(b.size()-1)},getTasks:function(){return a.find("\x3e li")},tasksW:function(a){var b=0;a.each(function(){b+=d(this).outerWidth(!0)});return b},getBarWidth:function(){return h.innerWidth()},getCurrent:function(){return a.find("li."+g)}}};m.prototype.contextmenu=function(b){var e=this;b.contextmenu({id:"dialogCM",bindings:{reload:function(a){a.dialog("refresh",e.options.id)},closeCurrent:function(a,b){(a.isTag("li")?a:e.tools.getCurrent()).find(".close").trigger("click")},closeOther:function(b,c){a.find("\x3e li").not(b).each(function(a){d(this).find(".close").trigger("click")})},closeAll:function(a,b){e.tools.getTasks().each(function(a){d(this).find(".close").trigger("click")})}},ctrSub:function(a,b){var d=b.find('[rel\x3d"closeCurrent"]'),f=b.find('[rel\x3d"closeOther"]');e.tools.getCurrent().length?1==e.tools.getTasks().size()&&f.addClass(c):(d.addClass(c),f.addClass(c))}})};m.prototype.closeDialog=function(a){(a="string"===typeof a?this.getTask(a):a)&&a.length&&(a.remove(),this.tools.getTasks().size()||this.hide(),this.tools.scrollCurrent(),this.$element.removeData("bjui.taskbar"))};m.prototype.minimize=function(a){var b=this,c=d("body").data("bjui.dialog");a="string"===typeof a?c[a].dialog:a;var e=this.getTask(a.data("options").id);l.css({top:a.css("top"),left:a.css("left"),height:a.css("height"),width:a.css("width")}).show().animate({top:d(window).height()-60,left:e.position().left,width:e.outerWidth(),height:e.outerHeight()},250,function(){d(this).hide();b.inactive(e)})};m.prototype.restoreDialog=function(a){var b=this.getTask(a.data("options").id);l.css({top:d(window).height()-60,left:b.position().left,height:b.outerHeight(),width:b.outerWidth()}).show().animate({top:a.css("top"),left:a.css("left"),width:a.css("width"),height:a.css("height")},250,function(){d(this).hide();a.show().trigger("click.bjui.taskbar.restore")});this.switchTask(b)};m.prototype.inactive=function(a){("string"===typeof a?this.getTask(a):a).removeClass(g)};m.prototype.scrollLeft=function(){var a=this.tools.visibleStart();this.tools.scrollTask(a)};m.prototype.scrollRight=function(){var a=this.tools.visibleEnd();this.tools.scrollTask(a)};m.prototype.scrollCurrent=function(a){this.tools.scrollTask(a)};m.prototype.switchTask=function(a){this.tools.getCurrent().removeClass(g);("string"===typeof a?this.getTask(a):a).addClass(g)};m.prototype.getTask=function(b){return a.find("#task-"+b)};m.prototype.changeTitle=function(a,b){var c=this.getTask(a);c&&b&&c.find(".title").html(b)};m.prototype.show=function(){h.is(":hidden")&&h.show().animate({bottom:0},500)};m.prototype.hide=function(){h.is(":visible")&&h.animate({bottom:-50},500,function(){h.hide()})};var k=d.fn.taskbar;d.fn.taskbar=function(a){var b=arguments,c=a;return this.each(function(){var e=d(this),f=d.extend({},m.DEFAULTS,e.data(),"object"===typeof a&&a),g=e.data("bjui.taskbar");g?g.options.id!=f.id&&e.data("bjui.taskbar",g=new m(this,f)):e.data("bjui.taskbar",g=new m(this,f));if("string"===typeof c&&d.isFunction(g[c]))if([].shift.apply(b),b)g[c].apply(g,b);else g[c]();else g.init()})};d.fn.taskbar.Constructor=m;d.fn.taskbar.noConflict=function(){d.fn.taskbar=k;return this}}(jQuery);+function(d){function l(a){var b=arguments,c=a,g=d("body");return this.each(function(){var e=d(this),m=d.extend({},q.DEFAULTS,"object"===typeof a&&a),k=e.data("bjui.ajax");k?this===g[0]?k=new q(this,m):d.extend(k.options,"object"===typeof a&&a):k=new q(this,m);e.data("bjui.ajax",k);"string"===typeof c&&(e=k[c.toLowerCase()],d.isFunction(e)&&([].shift.apply(b),b?e.apply(k,b):e()))})}var h,q=function(a,e){this.$element=d(a);this.options=e;this.tools=this.TOOLS()};q.DEFAULTS={okalert:!0,reload:!0,loadingmask:!0};q.NAVTAB="navtab";q.prototype.TOOLS=function(){var a=this;return{getPagerForm:function(a,b,g){var c=d.extend({},BJUI.pageInfo);g||(g=a.find("#pagerForm:first")[0]);a.data("bjui.clientPaging")&&(b=d.extend({},a.data("bjui.clientPaging"),b),a.data("bjui.clientPaging",b));if(g)for(var e in c)(a="",b&&b[e]&&(a=b[e]),g[c[e]])?a&&(g[c[e]].value=a):d('\x3cinput type\x3d"hidden" name\x3d"'+c[e]+'" value\x3d"'+a+'"\x3e').appendTo(d(g));return g},getTarget:function(){return a.$element.closest(".navtab-panel").length?q.NAVTAB:"dialog"}}};q.prototype.ajaxdone=function(a){a[BJUI.keys.statusCode]==BJUI.statusCode.error?a[BJUI.keys.message]&&BJUI.alertmsg("error",a[BJUI.keys.message]):a[BJUI.keys.statusCode]==BJUI.statusCode.timeout?(BJUI.alertmsg("info",a[BJUI.keys.message]||BJUI.regional.sessiontimeout),BJUI.loadLogin()):a[BJUI.keys.message]&&BJUI.alertmsg("correct",a[BJUI.keys.message])};q.prototype.ajaxerror=function(a,d,c){var b=a.responseText,e=this.options,m=e.failCallback;"string"===typeof b&&b.startsWith("{")?this.ajaxdone(b.toObj()):BJUI.alertmsg("error","\x3cdiv\x3eHttp status: "+a.status+" "+a.statusText+"\x3c/div\x3e\x3cdiv\x3eajaxOptions: "+d+" \x3c/div\x3e\x3cdiv\x3ethrownError: "+c+" \x3c/div\x3e\x3cdiv\x3e"+b+"\x3c/div\x3e");m&&("string"===typeof m&&(m=m.toFunc()),"function"===typeof m?m.apply(this,[b,e]):BJUI.debug("The callback function 'failCallback' is incorrect: "+m))};q.prototype.ajaxcallback=function(a){var b=this,c=b.options,g=c.okCallback,f=c.errCallback,m=c.okAfterCallback,k=[],n=[],h=[],r=[],p=function(){"string"===typeof g&&(g=g.toFunc());"function"===typeof g?g.apply(b,[a,c]):BJUI.debug("The callback function 'okCallback' is incorrect: "+g)};"string"===typeof a&&(a=a.toObj());c.okalert&&b.ajaxdone(a);!a[BJUI.keys.statusCode]&&g?p():a[BJUI.keys.statusCode]==BJUI.statusCode.ok?g?p():(a.tabid&&d.merge(k,a.tabid.split(",")),c.tabid&&d.merge(k,c.tabid.split(",")),a.dialogid&&d.merge(n,a.dialogid.split(",")),c.dialogid&&d.merge(n,c.dialogid.split(",")),a.divid&&d.merge(h,a.divid.split(",")),c.divid&&d.merge(h,c.divid.split(",")),a.datagrid&&d.merge(r,a.datagrid.split(",")),c.datagrid&&d.merge(r,c.datagrid.split(",")),k.length&&(d.unique(k),setTimeout(function(){BJUI.navtab("reloadFlag",k.join(","))},100)),n.length&&(d.unique(n),setTimeout(function(){BJUI.dialog("refresh",n.join(","))},100)),h.length&&(d.unique(h),setTimeout(function(){b.refreshdiv(h.join(","))},100)),r.length&&setTimeout(function(){d.each(r,function(a,b){d("#"+b.trim()).datagrid("refresh")})},100),b.$target==d.CurrentNavtab?b.navtabcallback(a):b.$target==d.CurrentDialog?b.dialogcallback(a):b.divcallback(a),m&&("string"===typeof m&&(m=m.toFunc()),"function"===typeof m?m.apply(b,[a,c]):BJUI.debug("The callback function 'okAfterCallback' is incorrect: "+m))):f&&("string"===typeof f&&(f=f.toFunc()),"function"===typeof f?f.apply(b,[a,c]):BJUI.debug("The callback function 'errCallback' is incorrect: "+f))};q.prototype.divcallback=function(a,e,c){var b=this;c=b.options;var f=a.forward||c.forward||null;a=a.forwardConfirm||c.forwardConfirm||null;c.reload&&!f&&b.refreshlayout(c);c.reloadNavtab&&setTimeout(function(){BJUI.navtab("refresh")},100);if(f){var m=function(){d.extend(c,{url:f});b.refreshlayout(c)};a?BJUI.alertmsg("confirm",a,{okCall:function(){m()}}):m()}};q.prototype.navtabcallback=function(a){var b=this.options,c=a.closeCurrent||b.closeCurrent||!1,d=a.forward||b.forward||null;a=a.forwardConfirm||b.forwardConfirm||null;c&&!d?BJUI.navtab("closeCurrentTab"):b.reload&&!d&&setTimeout(function(){BJUI.navtab("refresh")},100);if(d){var f=function(){BJUI.navtab("reload",{url:d})};a?BJUI.alertmsg("confirm",a,{okCall:function(){f()},cancelCall:function(){c&&BJUI.navtab("closeCurrentTab")}}):f()}};q.prototype.dialogcallback=function(a){var b=this.options,c=a.closeCurrent||b.closeCurrent||!1,d=a.forward||b.forward||null,f=a.forwardConfirm||b.forwardConfirm||null;c&&!d?BJUI.dialog("closeCurrent"):b.reload&&!d&&setTimeout(function(){BJUI.dialog("refresh")},100);b.reloadNavtab&&setTimeout(function(){BJUI.navtab("refresh")},100);if(d){var m=function(){BJUI.dialog("reload",{url:d})};f?BJUI.alertmsg("confirm",a.forwardConfirm,{okCall:function(){m()},cancelCall:function(){c&&BJUI.dialog("closeCurrent")}}):m()}};q.prototype.pagecallback=function(a,e){var b=d.extend({},q.DEFAULTS,a),g=e||null,f;if(g&&g.length){if(f=this.tools.getPagerForm(g,b))d.extend(b,d(f).data()),this.reloadlayout({target:g[0],type:d(f).attr("method")||"POST",url:d(f).attr("action"),data:d(f).serializeArray(),loadingmask:b.loadingmask})}else this.tools.getTarget()==q.NAVTAB?(g=d.CurrentNavtab,(f=this.tools.getPagerForm(g,b))&&d.extend(b,d(f).data()),this.$element.navtab("reloadForm",!1,b)):(g=d.CurrentDialog,(f=this.tools.getPagerForm(g,b))&&d.extend(b,d(f).data()),this.$element.dialog("reloadForm",!1,b))};q.prototype.doajax=function(a){var b=this,c,g=b.$element;a||(a={});a.loadingmask||(a.loadingmask=!1);a=d.extend({},q.DEFAULTS,"object"===typeof a&&a);b.options=a;a.target?c=a.target instanceof jQuery?a.target:d(a.target):g[0]!==d("body")[0]&&(c=g.closest(".bjui-layout"));c&&c.length||(c=d.CurrentDialog||d.CurrentNavtab);b.$target=c;if(a.url)if(a.url=decodeURI(a.url).replacePlh(c),a.url.isFinishedTm()){a.url=encodeURI(a.url);a.callback&&a.callback.toFunc();var f=function(){a.callback||(a.callback=d.proxy(function(a){b.ajaxcallback(a)},b));c.doAjax(a)};a.confirmMsg?BJUI.alertmsg("confirm",a.confirmMsg,{okCall:function(){f()}}):f()}else BJUI.alertmsg("error",a.warn||BJUI.regional.plhmsg),BJUI.debug("Bjuiajax Plugin: 'doajax' method: The url is incorrect: "+a.url);else BJUI.debug("Bjuiajax Plugin: 'doajax' method: the url is undefined!")};q.prototype.ajaxform=function(a){var b=this;a=d.extend({},"object"===typeof a&&a);var c=b.$element,g=null,f=null,m=a.callback,k;c[0]===d("body")[0]?(f=a.form,f instanceof jQuery||(f=d(a.form))):(f=c,g=f.closest(".bjui-layout"));if(f&&f.length&&f.isTag("form")){k=f.attr("enctype");a.target&&(g=a.target,g instanceof jQuery||(g=d(g)));g&&g.length||(g=d.CurrentDialog||d.CurrentNavtab);b.$target=g;a.url=a.url||f.attr("action");!BJUI.isIE(8)||a.type||f[0].getAttributeNode("method").specified||(a.type="POST");a.type=a.type||f.attr("method")||"POST";d.extend(b.options,a);m&&(m=m.toFunc());var n=function(a,c,e){m?m.apply(b,[a,f]):d.proxy(b.ajaxcallback(a),b)};a=function(){var a={loadingmask:b.options.loadingmask,type:b.options.type,url:b.options.url,callback:n,error:d.proxy(b.ajaxerror,b)};k&&"multipart/form-data"==k?window.FormData?d.extend(a,{data:new FormData(f[0]),contentType:!1,processData:!1}):d.extend(a,{data:f.serializeArray(),files:f.find(":file"),iframe:!0,processData:!1}):d.extend(a,{data:f.serializeArray()});b.options.ajaxTimeout&&(a.ajaxTimeout=b.options.ajaxTimeout);f.doAjax(a)};b.options.confirmMsg?BJUI.alertmsg("confirm",b.options.confirmMsg,{okCall:a}):a()}else BJUI.debug("Bjuiajax Plugin: 'ajaxform' method: Not set the form!")};q.prototype.ajaxsearch=function(a){var b=this,c=d.extend({},"object"===typeof a&&a);a=b.$element;var g,f,m=c.isValid;c.target&&(f=d(c.target));if(a[0]===d("body")[0]){g=c.form;g instanceof jQuery||(g=d(c.form));if(!g||!g.length||!g.isTag("form")){BJUI.debug("Bjuiajax Plugin: 'ajaxsearch' method: Not set the form!");return}c.target?(f=c.target,f instanceof jQuery||(f=d(f))):f=g.closest(".bjui-layout");f&&f.length||(f=d.CurrentDialog||d.CurrentNavtab)}else{g=a;f=g.closest(".bjui-layout");if(!g.isTag("form")){BJUI.debug("Bjuiajax Plugin: 'ajaxsearch' method: Not set the form!");return}f&&f.length||(f=d.CurrentDialog||d.CurrentNavtab);c.url||(c.url=g.attr("action"))}b.$target=f;c.url||(c.url=g.attr("action"));if(c.url)if(c.url=decodeURI(c.url).replacePlh(g.closest(".unitBox")),c.url.isFinishedTm()){c.url=encodeURI(c.url);c.type||(c.type=g.attr("method")||"POST");b.tools.getPagerForm(f,{pageCurrent:1},g[0]);c.form=g;d.extend(b.options,c);var k=function(){if(f.hasClass("bjui-layout")){var a=g.serializeJson(),e={};if(c.clearQuery){var m=BJUI.pageInfo,k;for(k in m)e[m[k]]=a[m[k]];a=e}b.reloadlayout({target:f[0],type:b.options.type,url:b.options.url,data:a,loadingmask:b.options.loadingmask})}else f[0]===d.CurrentNavtab[0]?BJUI.navtab("reloadForm",b.options.clearQuery,c):BJUI.dialog("reloadForm",b.options.clearQuery,c)};m?k():d.fn.validator?g.isValid(function(a){a&&k()}):k()}else BJUI.alertmsg("error",c.warn||BJUI.regional.plhmsg),BJUI.debug("Bjuiajax Plugin: 'ajaxsearch' method: The form's action or url is incorrect: "+c.url);else BJUI.debug("Bjuiajax Plugin: 'ajaxsearch' method: The form's action or url is undefined!")};q.prototype.doload=function(a){var b=null;a=d.extend({},"object"===typeof a&&a);d.extend(this.options,a);a.target&&(b=a.target,b instanceof jQuery||(b=d(b)));b&&b.length?a.url?(a.url=decodeURI(a.url).replacePlh(),a.url.isFinishedTm()?(a.url=encodeURI(a.url),b.removeData("bjui.clientPaging").data("options",a),this.reloadlayout(a)):(BJUI.alertmsg("error",a.warn||BJUI.regional.plhmsg),BJUI.debug("Bjuiajax Plugin: 'doload' method: The url is incorrect: "+a.url))):BJUI.debug("Bjuiajax Plugin: 'doload' method: The url is undefined!"):BJUI.debug("Bjuiajax Plugin: 'doload' method: Not set loaded container, like [data-target].")};q.prototype.refreshlayout=function(a){var b;a&&(b=a,b instanceof jQuery||(b=d(b)));b&&b.length?b&&b.length&&(b.data("options")?(b.removeData("bjui.clientPaging"),this.reloadlayout(b.data("options"))):BJUI.debug("Bjuiajax Plugin: 'refreshlayout' method: The target(DIV) is not a reload layout!")):(h&&clearInterval(h),BJUI.debug("Bjuiajax Plugin: 'refreshlayout' method: No argument, can not refresh DIV.(parameters:[selector/jQuery object/element])"))};q.prototype.reloadlayout=function(a){var b=null,c=d.extend({},"object"===typeof a&&a),g=c&&c.autorefresh&&(isNaN(String(c.autorefresh))?15:c.autorefresh);c.target&&(b=c.target,b instanceof jQuery||(b=d(b)));b&&b.length?b.data("options")?(c=d.extend({},b.data("options"),c),b.addClass("bjui-layout").data("options",c).ajaxUrl({type:c.type,url:c.url,data:c.data,loadingmask:c.loadingmask,callback:function(a){BJUI.ui.clientPaging&&b.data("bjui.clientPaging")&&b.pagination("setPagingAndOrderby",b);c.callback&&c.callback.apply(this,[b,a]);h&&clearInterval(h);g&&(h=setInterval(function(){b.bjuiajax("refreshlayout",b)},1E3*g))}})):BJUI.debug("Bjuiajax Plugin: 'refreshlayout' method: This target(DIV) is not initialized!"):(h&&clearInterval(h),BJUI.debug("Bjuiajax Plugin: 'refreshlayout' method: Not set loaded container, like [data-target]."))};q.prototype.refreshdiv=function(a){if(a&&"string"===typeof a){a=a.split(",");for(var b=0;b<a.length;b++)this.refreshlayout("#"+a[b])}};q.prototype.ajaxdownload=function(a){var b=this,c,g=d.extend({},"object"===typeof a&&a);g.loadingmask=!1;d.extend(b.options,g);g.target&&(c=g.target,c instanceof jQuery||(c=d(c)));c&&c.length||(c=d.CurrentDialog||d.CurrentNavtab);b.$target=c;if(g.url)if(g.url=decodeURI(g.url).replacePlh(c),g.url.isFinishedTm()){var f=function(){var a={failCallback:function(a,d){a.trim().startsWith("{")&&(a=a.toObj());b.ajaxdone(a);c.trigger("bjui.ajaxError")},prepareCallback:function(a){g.loadingmask&&c.trigger("bjui.ajaxStart")},successCallback:function(a){c.trigger("bjui.ajaxStop")}};g.type&&!g.httpMethod&&(g.httpMethod=g.type);console.log(g);d.extend(a,g);a.data||(a.data={});"undefined"===typeof a.data.ajaxrequest&&(a.data.ajaxrequest=!0);d.fileDownload(g.url,a)};g.confirmMsg?BJUI.alertmsg("confirm",g.confirmMsg,{okCall:function(){f()}}):f()}else BJUI.alertmsg("error",g.warn||BJUI.regional.plhmsg),BJUI.debug("Bjuiajax Plugin: 'ajaxdownload' method: The url is incorrect: "+g.url);else BJUI.debug("Bjuiajax Plugin: 'ajaxdownload' method: The url is undefined!")};q.prototype.doexport=function(a){var b=this,c=b.$element,g=a.target?d(a.target):null,f;if(a.url)if(a.url=decodeURI(a.url).replacePlh(c.closest(".unitBox")),a.url.isFinishedTm()){var m=function(){g&&g.length||(g=b.tools.getTarget()==q.NAVTAB?d.CurrentNavtab:d.CurrentDialog);if(f=b.tools.getPagerForm(g))a.data||(a.data={}),d.extend(a.data,d(f).serializeJson());d.fileDownload(a.url,{failCallback:function(a,c){a.trim().startsWith("{")&&(a=a.toObj());b.ajaxdone(a)},data:a.data||{}})};a.confirmMsg?BJUI.alertmsg("confirm",a.confirmMsg,{okCall:function(){m()}}):m()}else BJUI.alertmsg("error",a.warn||BJUI.regional.plhmsg),BJUI.debug("The ajax url is incorrect: "+a.url);else BJUI.debug("Error trying to open a ajax link: url is undefined!")};q.prototype.doexportchecked=function(a){var b=this,c=b.$element,g=a.target?d(a.target):null,f;if(a.url)if(a.url=decodeURI(a.url).replacePlh(c.closest(".unitBox")),a.url.isFinishedTm()){var m=function(){if(a.group){g&&g.length||(g=b.tools.getTarget()==q.NAVTAB?d.CurrentNavtab:d.CurrentDialog);var c=[],e=g.find(":checkbox[name\x3d"+a.group+"]:checked");e.length?(e.each(function(){c.push(d(this).val())}),f=a.idname||"ids",a.data=a.data||{},a.data[f]=c.join(","),d.fileDownload(a.url,{failCallback:function(a,c){a.trim().startsWith("{")&&(a=a.toObj());b.ajaxdone(a)},data:a.data})):BJUI.alertmsg("error",BJUI.regional.notchecked)}else BJUI.alertmsg("error",a.warn||BJUI.regional.nocheckgroup)};a.confirmMsg?BJUI.alertmsg("confirm",a.confirmMsg,{okCall:function(){m()}}):m()}else BJUI.alertmsg("error",a.warn||BJUI.regional.plhmsg),BJUI.debug("The ajax url is incorrect: "+a.url);else BJUI.debug("Error trying to open a export link: url is undefined!")};q.prototype.doajaxchecked=function(a){var b=this,c=b.$element,g=a.target?d(a.target):null,f;a=d.extend({},q.DEFAULTS,"object"===typeof a&&a);if(a.url)if(a.url=decodeURI(a.url).replacePlh(c.closest(".unitBox")),a.url.isFinishedTm()){var m=function(){if(a.group){g&&g.length||(g=b.tools.getTarget()==q.NAVTAB||a.isNavtab?d.CurrentNavtab:d.CurrentDialog);var e=[],m=g.find(":checkbox[name\x3d"+a.group+"]:checked"),h=a.callback&&a.callback.toFunc();m.length?(m.each(function(){e.push(d(this).val())}),f=a.idname||"ids",a.data=a.data||{},a.data[f]=e.join(","),c.doAjax({type:a.type,url:a.url,data:a.data,callback:h?h:d.proxy(function(a){b.ajaxcallback(a)},b)})):BJUI.alertmsg("error",BJUI.regional.notchecked)}else BJUI.alertmsg("error",a.warn||BJUI.regional.nocheckgroup)};a.confirmMsg?BJUI.alertmsg("confirm",a.confirmMsg,{okCall:function(){m()}}):m()}else BJUI.alertmsg("error",a.warn||BJUI.regional.plhmsg),BJUI.debug("The ajax url is incorrect: "+a.url);else BJUI.debug("Error trying to open a del link: url is undefined!")};var a=d.fn.bjuiajax;d.fn.bjuiajax=l;d.fn.bjuiajax.Constructor=q;d.fn.bjuiajax.noConflict=function(){d.fn.bjuiajax=a;return this};BJUI.ajax=function(){l.apply(d("body"),arguments)};d(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle\x3d"ajaxform"]',function(a){var b=d(this),c=b.data();l.call(b,"ajaxform",c);a.preventDefault()});d(function(){if(d.fn.validator)d(document).on(BJUI.eventType.initUI,function(a){d(a.target).find('form[data-toggle\x3d"ajaxsearch"]').each(function(){var a=d(this),b=a.data();b.isValid=!0;a.validator({valid:function(c){l.call(a,"ajaxsearch",b)}})})});else d(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle\x3d"ajaxsearch"]',function(a){var b=d(this),c=b.data();l.call(b,"ajaxsearch",c);a.preventDefault()})});d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle\x3d"reloadsearch"]',function(a){var b=d(this),c,g=b.closest("form");g&&g.length&&(c=g.data(),c.clearQuery=b.data("clearQuery")||!0,l.call(g,"ajaxsearch",c),a.preventDefault())});d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle\x3d"ajaxload"]',function(a){var b=d(this),c=b.data(),g=c.options;g&&("string"===typeof g&&(g=g.toObj()),"object"===typeof g&&(delete c.options,d.extend(c,g)));c.url||(c.url=b.attr("href"));l.call(b,"doload",c);a.preventDefault()});d(document).on(BJUI.eventType.initUI,function(a){d(a.target).find('[data-toggle\x3d"autoajaxload"]').each(function(){var a=d(this),b=a.data();b.target=this;l.call(a,"doload",b)})});d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle\x3d"refreshlayout"]',function(a){var b=d(this),c=b.data("target");l.call(b,"refreshlayout",c);a.preventDefault()});d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle\x3d"reloadlayout"]',function(a){var b=d(this),c=b.data();l.call(b,"reloadlayout",c);a.preventDefault()});d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle\x3d"doajax"]',function(a){var b=d(this),c=b.data(),g=c.options;g&&("string"===typeof g&&(g=g.toObj()),"object"===typeof g&&(delete c.options,d.extend(c,g)));c.url||(c.url=b.attr("href"));l.call(b,"doajax",c);a.preventDefault()});d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle\x3d"ajaxdownload"]',function(a){var b=d(this),c=b.data(),g=c.options;g&&("string"===typeof g&&(g=g.toObj()),"object"===typeof g&&(delete c.options,d.extend(c,g)));c.url||(c.url=b.attr("href"));l.call(b,"ajaxdownload",c);a.preventDefault()});d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle\x3d"doexport"]',function(a){var b=d(this),c=b.data();c.url||(c.url=b.attr("href"));l.call(b,"doexport",c);a.preventDefault()});d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle\x3d"doexportchecked"]',function(a){var b=d(this),c=b.data();c.url||(c.url=b.attr("href"));l.call(b,"doexportchecked",c);a.preventDefault()});d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle\x3d"doajaxchecked"]',function(a){var b=d(this),c=b.data();c.url||(c.url=b.attr("href"));l.call(b,"doajaxchecked",c);a.preventDefault()})}(jQuery);+function(d){function l(a){var c=arguments,f=a,e=d("body"),k=e.data("bjui.alertmsg");return this.each(function(){d(this);var g=d.extend({},b.DEFAULTS,"object"===typeof a&&a);k?k.options=g:k=new b(g);e.data("bjui.alertmsg",k);if("string"===typeof f&&d.isFunction(k[f]))if([].shift.apply(c),c)k[f].apply(k,c);else k[f]()})}var h,q,a;d(function(){h=d(FRAG.alertBoxFrag).hide().html("");q=d(FRAG.alertBackground).hide().html("");d("body").append("\x3c!-- alert msg box --\x3e").append(h).append("\x3c!-- alert msg box mask bg --\x3e").append(q)});var b=function(a){this.options=a;this.tools=this.TOOLS();this.clearTime=null};b.DEFAULTS={displayPosition:"topcenter",displayMode:"slide",autoClose:null,alertTimeout:3E3,mask:null,types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},fas:{error:"fa-times-circle",info:"fa-info-circle",warn:"fa-exclamation-circle",correct:"fa-check-circle",confirm:"fa-question-circle"}};b.prototype.TOOLS=function(){var b=this;return{getTitle:function(a){return b.options.title||BJUI.regional.alertmsg.title[a]},keydownOk:function(a){return a.which==BJUI.keyCode.ENTER?(a.data.target.trigger("click"),!1):!0},keydownEsc:function(a){a.which==BJUI.keyCode.ESC&&a.data.target.trigger("click")},openPosition:function(){var a=BJUI.alertMsg.displayPosition,c=BJUI.alertMsg.displayMode,d=h.outerHeight(),e={},n={};a?b.options.displayPosition&&"topcenter"!=b.options.displayPosition&&(a=b.options.displayPosition):a=b.options.displayPosition;c?b.options.displayMode&&"silde"!=b.options.displayMode&&(c=b.options.displayMode):c=b.options.displayMode;switch(a){case "topleft":e={top:0-d,left:0,"margin-left":0};n={top:0};break;case "topcenter":e={top:0-d};n={top:0};break;case "topright":e={top:0-d,left:"auto",right:0,"margin-left":0};n={top:0};break;case "middleleft":e={top:"50%",left:-460,"margin-left":0,"margin-top":0-d/2};n={left:0};break;case "middlecenter":e={top:"0","margin-top":0-d/2};n={top:"50%"};break;case "middleright":e={top:"50%",left:"auto",right:-460,"margin-top":0-d/2};n={right:0};break;case "bottomleft":e={top:"auto",left:0,bottom:0-d,"margin-left":0};n={bottom:0};break;case "bottomcenter":e={top:"auto",bottom:0-d};n={bottom:0};break;case "bottomright":e={top:"auto",left:"auto",right:0,bottom:0-d,"margin-left":0},n={bottom:0}}"slide"==c?h.css(e).show().animate(n,500):"fade"==c?(e.opacity=.1,h.css(e).css(n).show().animate({opacity:1},500)):h.css(e).css(n).show()},closePosition:function(){var a=BJUI.alertMsg.displayPosition,c=BJUI.alertMsg.displayMode,e=h.outerHeight(),k={};a?b.options.displayPosition&&"topcenter"!=b.options.displayPosition&&(a=b.options.displayPosition):a=b.options.displayPosition;c?b.options.displayMode&&"silde"!=b.options.displayMode&&(c=b.options.displayMode):c=b.options.displayMode;switch(a){case "topleft":k={top:0-e};break;case "topcenter":k={top:0-e};break;case "topright":k={top:0-e};break;case "middleleft":k={left:-460};break;case "middlecenter":k={top:0-e};break;case "middleright":k={right:-460};break;case "bottomleft":k={bottom:0-e};break;case "bottomcenter":k={bottom:0-e};break;case "bottomright":k={bottom:0-e}}"slide"==c?h.animate(k,500,function(){q.hide();d(this).hide().empty()}):"fade"==c?h.animate({opacity:0},500,function(){q.hide();d(this).hide().empty()}):(h.hide().remove(),q.hide())},open:function(c,f,e){var g=this,m="",v,r=BJUI.alertMsg.alertTimeout;if(e)for(var p=0;p<e.length;p++)var x=e[p].call?"callback":"",t=e[p].cls?e[p].cls:"default",m=m+FRAG.alertBtnFrag.replace("#btnMsg#",'\x3ci class\x3d"fa fa-'+(e[p].cls&&"green"==e[p].cls?"check":"close")+'"\x3e\x3c/i\x3e '+e[p].name).replace("#callback#",x).replace("#class#",t);f=d(FRAG.alertBoxFrag.replace("#type#",c).replace("#fa#",b.options.fas[c]).replace("#title#",this.getTitle(c)).replace("#message#",f).replace("#btnFragment#",m)).hide().appendTo("body");h&&h.length&&h.remove();h=f;g.openPosition();a&&(clearTimeout(a),a=null);null==b.options.mask&&b.options.types.info!=c&&b.options.types.correct!=c&&q.show();null!=b.options.autoClose||b.options.types.info!=c&&b.options.types.correct!=c||(r?b.options.alertTimeout&&3E3!=b.options.alertTimeout&&(r=b.options.alertTimeout):r=b.options.alertTimeout,a=setTimeout(function(){g.close()},r));v=h.find(".btn");v.each(function(a){d(this).on("click",d.proxy(function(){b.tools.close();var c=e[a].call;"string"===typeof c&&(c=c.toFunc());"function"===typeof c&&c.call()},b));if(e[a].keyCode===BJUI.keyCode.ENTER)d(document).on("keydown.bjui.alertmsg.ok",{target:v.eq(a)},g.keydownOk);if(e[a].keyCode===BJUI.keyCode.ESC)d(document).on("keydown.bjui.alertmsg.esc",{target:v.eq(a)},g.keydownEsc)})},alert:function(a,c,e){d.extend(b.options,"object"===typeof e&&e);e=d.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null},b.options);this.open(a,c,[{name:e.okName,call:e.okCall,cls:"default",keyCode:BJUI.keyCode.ENTER}])},close:function(){d(document).off("keydown.bjui.alertmsg.ok").off("keydown.bjui.alertmsg.esc");this.closePosition()}}};b.prototype.error=function(a,b){this.tools.alert(this.options.types.error,a,b)};b.prototype.info=function(a,b){this.tools.alert(this.options.types.info,a,b)};b.prototype.warn=function(a,b){this.tools.alert(this.options.types.warn,a,b)};b.prototype.ok=function(a,b){this.tools.alert(this.options.types.correct,a,b)};b.prototype.correct=function(a,b){this.tools.alert(this.options.types.correct,a,b)};b.prototype.confirm=function(a,b){d.extend(this.options,"object"===typeof b&&b);var c=d.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null,cancelName:BJUI.regional.alertmsg.btnMsg.cancel,cancelCall:null},this.options);this.tools.open(this.options.types.confirm,a,[{name:c.okName,call:c.okCall,cls:"green",keyCode:BJUI.keyCode.ENTER},{name:c.cancelName,call:c.cancelCall,cls:"red",keyCode:BJUI.keyCode.ESC}])};var e=d.fn.alertmsg;d.fn.alertmsg=l;d.fn.alertmsg.Constructor=b;d.fn.alertmsg.noConflict=function(){d.fn.alertmsg=e;return this};BJUI.alertmsg=function(){l.apply(d("body"),arguments)};d(document).on("click.bjui.alertmsg.data-api",'[data-toggle\x3d"alertmsg"]',function(a){var b=d(this),c=b.data(),e=c.options,k;e&&("string"===typeof e&&(e=e.toObj()),"object"===typeof e&&d.extend(c,e));k=c.type;if(!k)return!1;!c.msg&&e.msg&&(c.msg=e.msg);l.call(b,k,c.msg||k,c);a.preventDefault()})}(jQuery);+function(d){function l(a){var b=arguments,e=a;return this.each(function(){var c=d(this),g=d.extend({},h.DEFAULTS,c.data(),"object"===typeof a&&a),f=c.data("bjui.pagination");f||c.data("bjui.pagination",f=new h(this,g));if("string"===typeof e&&d.isFunction(f[e]))if([].shift.apply(b),b)f[e].apply(f,b);else f[e]();else f.init()})}var h=function(a,b){this.$element=d(a);this.options=b;this.tools=this.TOOLS()};h.DEFAULTS={first:"li.j-first",prev:"li.j-prev",next:"li.j-next",last:"li.j-last",nums:"li.j-num \x3e a",jump:"li.jumpto",pageNumFrag:'\x3cli class\x3d"#liClass#"\x3e\x3ca href\x3d"javascript:;"\x3e#pageNum#\x3c/a\x3e\x3c/li\x3e',total:0,pageSize:10,pageNum:10,pageCurrent:1,callback:function(){return!1}};h.prototype.TOOLS=function(){var a=this.options;return{pageNums:function(){return Math.ceil(a.total/a.pageSize)},getInterval:function(){var b=Math.ceil(a.pageNum/2),d=this.pageNums(),c=d-a.pageNum,c=this.getCurrentPage()>b?Math.max(Math.min(this.getCurrentPage()-b,c),0):0,b=this.getCurrentPage()>b?Math.min(this.getCurrentPage()+b,d):Math.min(a.pageNum,d);return{start:c+1,end:b+1}},getCurrentPage:function(){var b=parseInt(a.pageCurrent);return isNaN(b)?1:b},hasPrev:function(){return 1<this.getCurrentPage()},hasNext:function(){return this.getCurrentPage()<this.pageNums()}}};h.prototype.init=function(){function a(a,c){a.on("click",function(a){var f={pageCurrent:c,pageSize:b.options.pageSize};b.setClientPaging(f);d(this).bjuiajax("pageCallback",f,b.$element.closest(".bjui-layout"));a.preventDefault()})}BJUI.ui.clientPaging&&!this.getClientPaging()&&this.setClientPaging({pageCurrent:this.options.pageCurrent,pageSize:this.options.pageSize});for(var b=this,e=this.options,c=this.tools,g=c.getInterval(),f="",m=FRAG.pagination,k=BJUI.regional.pagination,n=g.start;n<g.end;n++)f+=e.pageNumFrag.replaceAll("#pageNum#",n).replaceAll("#liClass#",n==c.getCurrentPage()?"selected j-num":"j-num");m=m.replaceAll("#pageNumFrag#",f).replaceAll("#pageCurrent#",c.getCurrentPage()).replaceAll("#first#",k.first).replaceAll("#last#",k.last).replaceAll("#prev#",k.prev).replaceAll("#next#",k.next).replaceAll("#jumpto#",k.jumpto).replaceAll("#jump#",k.jump);this.$element.html(m);f=this.$element.find(e.first);m=this.$element.find(e.prev);k=this.$element.find(e.next);n=this.$element.find(e.last);c.hasPrev()?(f.add(m).find("\x3e span").hide(),a(m,c.getCurrentPage()-1),a(f,1)):f.add(m).addClass("disabled").find("\x3e a").hide();c.hasNext()?(k.add(n).find("\x3e span").hide(),a(k,c.getCurrentPage()+1),a(n,c.pageNums())):k.add(n).addClass("disabled").find("\x3e a").hide();this.$element.find(e.nums).each(function(b){a(d(this),b+g.start)});this.$element.find(e.jump).each(function(){var a=d(this).find(":text"),c=d(this).find(".goto");c.on("click",function(){var c=a.val(),f={pageCurrent:c,pageSize:e.pageSize};c&&c.isPositiveInteger()&&(b.setClientPaging(f),d(this).bjuiajax("pageCallback",f,b.$element.closest(".bjui-layout")))});a.keyup(function(a){a.keyCode==BJUI.keyCode.ENTER&&c.trigger("click")})})};h.prototype.changePagesize=function(){var a=this.$element.val(),b={pageSize:a};isNaN(a)||(this.setClientPaging(b),this.$element.bjuiajax("pageCallback",b,this.$element.closest(".bjui-layout")))};h.prototype.orderBy=function(a){var b=this;b.$element.css({cursor:"pointer"}).click(function(){var a=d(this).data("orderField"),c=d(this).data("orderDirection"),a={orderField:a,orderDirection:c};b.setClientPaging(a);d(this).bjuiajax("pageCallback",a,b.$element.closest(".bjui-layout"))})};h.prototype.destroy=function(){this.$element.removeData("bjui.pagination").empty()};h.prototype.getTarget=function(){return this.$element.closest(".bjui-layout").length?this.$element.closest(".bjui-layout"):this.$element.closest(".navtab-panel").length?d.CurrentNavtab:d.CurrentDialog};h.prototype.getClientPaging=function(){return this.getTarget().data("bjui.clientPaging")};h.prototype.setClientPaging=function(a){if(BJUI.ui.clientPaging){var b=this.getTarget();b.data("bjui.clientPaging",d.extend({},b.data("bjui.clientPaging")||{},a))}};h.prototype.setClientOrder=function(a){if(BJUI.ui.clientPaging){var b=this.getClientPaging();b&&b.orderField||this.setClientPaging(a)}};h.prototype.setPagingAndOrderby=function(a){var b=a.data("bjui.clientPaging");a.find('[data-toggle\x3d"pagination"]').pagination("destroy").pagination(b);b.pageSize&&a.find('select[data-toggle-change\x3d"changepagesize"]').selectpicker("val",b.pageSize);b.orderField&&a.find('th[data-order-field\x3d"'+b.orderField+'"]').addClass(b.orderDirection).siblings().removeClass("asc desc")};var q=d.fn.pagination;d.fn.pagination=l;d.fn.pagination.Constructor=h;d.fn.pagination.noConflict=function(){d.fn.pagination=q;return this};d(document).on(BJUI.eventType.initUI,function(a){a=d(a.target).find('[data-toggle\x3d"pagination"]');a.length&&l.call(a)});d(document).on("change.bjui.pagination.data-api",'select[data-toggle-change\x3d"changepagesize"]',function(a){var b=d(this);b.data();l.call(b,"changePagesize");a.preventDefault()})}(jQuery);+function(d){function l(a){return(0>a||9<a?"":"0")+a}function h(a,b,d,e){for(;e>=d;e--){var c=a.substring(b,b+e);if(c.length<d)break;if((new RegExp(/^\d+$/)).test(c))return c}return null}function q(a,d){a+="";d+="";for(var c=0,g=0,k,n,v,r,p=new Date(1900,0,1),x=p.getYear(),t=p.getMonth()+1,z=1,l=p.getHours(),q=p.getMinutes(),p=p.getSeconds(),y="";g<d.length;){k=d.charAt(g);for(n="";d.charAt(g)==k&&g<d.length;)n+=d.charAt(g++);if("yyyy"==n||"yy"==n||"y"==n){"yyyy"==n&&(r=v=4);"yy"==n&&(r=v=2);"y"==n&&(v=2,r=4);x=h(a,c,v,r);if(null==x)return 0;c+=x.length;2==x.length&&(x=70<x?1900+(x-0):2E3+(x-0))}else if("MMM"==n||"NNN"==n){for(k=t=0;k<b.length;k++){var w=b[k];if(a.substring(c,c+w.length).toLowerCase()==w.toLowerCase()&&("MMM"==n||"NNN"==n&&11<k)){t=k+1;12<t&&(t-=12);c+=w.length;break}}if(1>t||12<t)return 0}else if("EE"==n||"E"==n)for(k=0;k<e.length;k++){if(n=e[k],a.substring(c,c+n.length).toLowerCase()==n.toLowerCase()){c+=n.length;break}}else if("MM"==n||"M"==n){t=h(a,c,n.length,2);if(null==t||1>t||12<t)return 0;c+=t.length}else if("dd"==n||"d"==n){z=h(a,c,n.length,2);if(null==z||1>z||31<z)return 0;c+=z.length}else if("hh"==n||"h"==n){l=h(a,c,n.length,2);if(null==l||1>l||12<l)return 0;c+=l.length}else if("HH"==n||"H"==n){l=h(a,c,n.length,2);if(null==l||0>l||23<l)return 0;c+=l.length}else if("KK"==n||"K"==n){l=h(a,c,n.length,2);if(null==l||0>l||11<l)return 0;c+=l.length}else if("kk"==n||"k"==n){l=h(a,c,n.length,2);if(null==l||1>l||24<l)return 0;c+=l.length;l--}else if("mm"==n||"m"==n){q=h(a,c,n.length,2);if(null==q||0>q||59<q)return 0;c+=q.length}else if("ss"==n||"s"==n){p=h(a,c,n.length,2);if(null==p||0>p||59<p)return 0;c+=p.length}else if("a"==n){if("am"==a.substring(c,c+2).toLowerCase())y="AM";else if("pm"==a.substring(c,c+2).toLowerCase())y="PM";else return 0;c+=2}else{if(a.substring(c,c+n.length)!=n)return 0;c+=n.length}}if(c!=a.length)return 0;if(2==t)if(0==x%4&&0!=x%100||0==x%400){if(29<z)return 0}else if(28<z)return 0;if((4==t||6==t||9==t||11==t)&&30<z)return 0;12>l&&"PM"==y?l=l-0+12:11<l&&"AM"==y&&(l-=12);return new Date(x,t-1,z,l,q,p)}function a(a){return a.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function(a){return eval("("+a.replace(/[{}]+/g,"")+")")})}var b="January February March April May June July August September October November December Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sun Mon Tue Wed Thu Fri Sat".split(" ");Date.prototype.formatDate=function(a){a+="";var c="",d=0,m,k;m=this.getYear()+"";k=this.getMonth()+1;var n=this.getDate(),h=this.getDay(),r=this.getHours(),p=this.getMinutes(),x=this.getSeconds(),t={};4>m.length&&(m=""+(m-0+1900));t.y=""+m;t.yyyy=m;t.yy=m.substring(2,4);t.M=k;t.MM=l(k);t.MMM=b[k-1];t.NNN=b[k+11];t.d=n;t.dd=l(n);t.E=e[h+7];t.EE=e[h];t.H=r;t.HH=l(r);t.h=r?12<r?r-12:r:12;t.hh=l(t.h);t.K=11<r?r-12:r;t.k=r+1;t.KK=l(t.K);t.kk=l(t.k);t.a=11<r?"PM":"AM";t.m=p;t.mm=l(p);t.s=x;for(t.ss=l(x);d<a.length;){m=a.charAt(d);for(k="";a.charAt(d)==m&&d<a.length;)k+=a.charAt(d++);c=null!=t[k]?c+t[k]:c+k}return c};String.prototype.parseDate=function(a){this.length<a.length&&(a=a.slice(0,this.length));return q(this,a)};Date.prototype.formatDateTm=function(b){var c=this.getFullYear(),d=this.getMonth()+1,e=this.getDate(),e=b.replaceAll("%y",c).replaceAll("%M",d).replaceAll("%d",e),e=a(e);b=1900;c=0;d=1;e=e.split("-");0<e.length&&(b=e[0]);1<e.length&&(c=e[1]-1);2<e.length&&(d=e[2]);return(new Date(b,c,d)).formatDate("yyyy-MM-dd")}}(jQuery);+function(d){function l(a){var b=arguments,c=a;return this.each(function(){var e=d(this),f=d.extend({},A.DEFAULTS,e.data(),"object"===typeof a&&a),g=e.data("bjui.datepicker");g||e.data("bjui.datepicker",g=new A(this,f));if("string"===typeof c&&d.isFunction(g[c]))if([].shift.apply(b),b)g[c].apply(g,b);else g[c]();else g.init()})}var h,q,a,b,e,c,g,f,m,k,n,v,r,p,x,t,z,u;d(function(){(function(){var l=BJUI.regional.datepicker,l=FRAG.calendarFrag.replace("#close#",l.close).replace("#prev#",l.prev).replace("#next#",l.next).replace("#clear#",l.clear).replace("#ok#",l.ok);h=d(l).hide();d("body").append("\x3c!-- datepicker --\x3e").append(h);q=h.find("\x3e .main");a=h.find("a.prev");b=h.find("a.next");e=h.find("select[name\x3dyear]");c=h.find("select[name\x3dmonth]");g=h.find(".time");f=g.find(":text");m=g.find("ul \x3e li");k=g.find(".hh");n=g.find(".mm");v=g.find(".ss");r=q.find("\x3e .tm");p=h.find(".close");x=q.find("\x3e .body \x3e .days");t=q.find("\x3e .body \x3e .dayNames");z=h.find(".clearBtn");u=h.find(".okBtn");var B="",l=BJUI.regional.datepicker;d.each(l.dayNames,function(a,b){B+="\x3cdt\x3e"+b+"\x3c/dt\x3e"});t.html(B);d.each(l.monthNames,function(a,b){c.append('\x3coption value\x3d"'+(a+1)+'"\x3e'+b+"\x3c/option\x3e")});h.on("selectstart",function(){return!1})})()});var A=function(a,b){this.$element=d(a);this.options=b;this.tools=this.TOOLS();this.$dateBtn=null;var c=new Date;this.options.minDate=c.formatDateTm(this.options.minDate);this.options.maxDate=c.formatDateTm(this.options.maxDate);this.events={focus_time:"focus.bjui.datepicker.time",click_prev:"click.bjui.datepicker.prev",click_next:"click.bjui.datepicker.next",click_ok:"click.bjui.datepicker.ok",click_days:"click.bjui.datepicker.days",click_clear:"click.bjui.datepicker.clear",click_close:"click.bjui.datepicker.close",click_tm:"click.bjui.datepicker.tm",click_spinner:"click.bjui.datepicker.spinner",mousedown_sp:"mousedown.bjui.datepicker.spinner",mouseup_sp:"mouseup.bjui.datepicker.spinner",change_ym:"change.bjui.datepicker.ym",click_time:"click.bjui.datepicker.time",keydown_time:"keydown.bjui.datepicker.time",keyup_time:"keyup.bjui.datepicker.time"}};A.DEFAULTS={pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1};A.EVENTS={afterChange:"afterchange.bjui.datepicker"};A.prototype.TOOLS=function(){var a=this,b={changeTmMenu:function(a){r.removeClass("hh").removeClass("mm").removeClass("ss");a&&(r.addClass(a),f.removeClass("slt").filter("."+a).addClass("slt"))},clickTmMenu:function(b,c){r.find("\x3e ul").hide().filter("."+c).show().find("\x3e li").off(a.events.click_tm).on(a.events.click_tm,function(){var a=d(this),a=10>parseInt(a.text())?"0"+a.text():a.text();b.val(a)})},keydownInt:function(a){if(!(48<=a.keyCode&&57>=a.keyCode||a.keyCode==BJUI.keyCode.DELETE||a.keyCode==BJUI.keyCode.BACKSPACE))return!1},changeTm:function(a,b){var c=parseInt(a.val()),d=parseInt(a.data("start"))||0,e=parseInt(a.data("end")),f=parseInt(a.data("step")||1),g=b?b.data("add")?b.data("add"):-1:0,m=c;1==g?c<=e-f&&(m=c+f):-1==g?c>=d+f&&(m=c-f):c>e?m=e:c<d&&(m=d);10>m&&(m="0"+m);a.val(m)},closeCalendar:function(c){b.changeTmMenu();c&&(d(document).off(a.events.click_close),h.hide())},get:function(b){return a.options[b]},getDays:function(a,b){return 2==b?a%4||!(a%100)&&a%400?28:29:/4|6|9|11/.test(b)?30:31},minMaxDate:function(a){var b=a.split("-").length-1,c="y-M-d";1==b?c="y-M":b||(c="y");return a.parseDate(c)},getMinDate:function(){return this.minMaxDate(a.options.minDate)},getMaxDate:function(){var b=a.options.maxDate,c=b.split("-").length-1,b=this.minMaxDate(b);if(2>c){var d=this.getDays(b.getFullYear(),b.getMonth()+1);b.setDate(d);c||b.setMonth(11)}return b},getDateWrap:function(b){b||(b=this.parseDate(a.sDate)||new Date);var c=b.getFullYear(),d=b.getMonth()+1,e=this.getDays(c,d);return{year:c,month:d,day:b.getDate(),hour:b.getHours(),minute:b.getMinutes(),second:b.getSeconds(),days:e,date:b}},changeDate:function(b,c,d){b=new Date(b,c-1,d||1);a.sDate=this.formatDate(b);return b},changeDateTime:function(b,c,d,e,f,g){b=new Date(b,c-1,d,e,f,g);a.sDate=this.formatDate(b);return b},changeDay:function(a,b){b||(b=0);var c=this.getDateWrap();return this.changeDate(c.year,c.month+parseInt(b),a)},changeMonth:function(a){var b=e.get(0).selectedIndex,d=e.find("option").length;a=1*c.val()+a;a?13==a&&(b==d-1?a=12:(a=1,b++,e.get(0).selectedIndex=b)):b?(a=12,b--,e.get(0).selectedIndex=b):a=1;c.val(a).change()},parseDate:function(b){return b?b.parseDate(a.options.pattern):null},formatDate:function(b){return b.formatDate(a.options.pattern)},hasHour:function(){return-1!=a.options.pattern.indexOf("H")},hasMinute:function(){return-1!=a.options.pattern.indexOf("m")},hasSecond:function(){return-1!=a.options.pattern.indexOf("s")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){for(var b=["y","M","d","E"],c=0;c<b.length;c++)if(-1!=a.options.pattern.indexOf(b[c]))return!0;return!1},afterChange:function(b){var c=this.formatDate(b);a.$element.trigger(A.EVENTS.afterChange,{date:b,value:c})}};return b};A.prototype.addBtn=function(){var a=this.$element;if(!this.$dateBtn&&!this.options.addbtn&&!a.parent().hasClass("wrap_bjui_btn_box")){this.$dateBtn=d(FRAG.dateBtn);this.$element.css({paddingRight:"15px"}).wrap('\x3cspan class\x3d"wrap_bjui_btn_box"\x3e\x3c/span\x3e');var a=this.$element.parent(),b=this.$element.addClass("form-control").innerHeight();a.css({position:"relative",display:"inline-block"});this.$dateBtn.css({height:b,lineHeight:b+"px"}).appendTo(a);this.$dateBtn.on("selectstart",function(){return!1})}};A.prototype.init=function(){this.$element.val()&&(this.sDate=this.$element.val().trim());var f=this,g=this.tools,m=g.getDateWrap(),h=g.getMinDate(),r=g.getMaxDate(),t=h.getFullYear(),l=r.getFullYear();for(e.empty();t<=l;t++)e.append('\x3coption value\x3d"'+t+'"'+(m.year==t?" selected":"")+"\x3e"+t+"\x3c/option\x3e");c.val(m.month);e.add(c).off(this.events.change_ym).on(this.events.change_ym,function(){if(g.hasTime())var a=x.find(".slt"),a=g.changeDateTime(e.val(),c.val(),a.data("day"),m.hour,m.minute,m.second);else a=x.find(".slt"),a=g.changeDate(e.val(),c.val(),a.data("day"));f.create(g.getDateWrap(a),h,r)});a.off(this.events.click_prev).on(this.events.click_prev,function(){f.tools.changeMonth(-1)});b.off(this.events.click_prev).on(this.events.click_prev,function(){f.tools.changeMonth(1)});z.off(this.events.click_clear).on(this.events.click_clear,function(){f.$element.val("");g.closeCalendar(!0)});u.off(this.events.click_ok).on(this.events.click_ok,function(){var a=x.find("dd.slt");if(a.hasClass("disabled"))return!1;a=g.changeDay(a.data("day"),a.data("month"));g.hasTime()&&(a.setHours(parseInt(k.val())),a.setMinutes(parseInt(n.val())),a.setSeconds(parseInt(v.val())));g.closeCalendar(!0);f.$element.val(g.formatDate(a)).focus();g.afterChange(a)});p.off(this.events.click_close).on(this.events.click_close,function(){g.closeCalendar(!0)});d(document).on(this.events.click_close,function(a){var b=d(a.target);a.target!=f.$element.get(0)&&(b.closest("#calendar").length||("datepicker"==b.data("toggle")||"datepickerbtn"==b.parent().data("toggle")||"datepickerbtn"==b.data("toggle")?g.closeCalendar(!1):g.closeCalendar(!0)))});this.create(m,h,r)};A.prototype.create=function(a,b,c){var e=this,p=this.options,t=this.tools,l=new Date(a.year,a.month-1,1),z=l.getDay(),u="";if(0<z){l.setMonth(l.getMonth()-1);for(var l=t.getDateWrap(l),w=l.days-z+1;w<=l.days;w++)var y=new Date(a.year,a.month-2,w),y=y>=b&&y<=c?"":" disabled",u=u+('\x3cdd class\x3d"other'+y+'" data-month\x3d"-1" data-day\x3d"'+w+'"\x3e'+w+"\x3c/dd\x3e")}for(w=1;w<=a.days;w++)y=new Date(a.year,a.month-1,w),y=y>=b&&y<=c?"":"disabled",w==a.day&&(y+=" slt"),u+='\x3cdd class\x3d"'+y+'" data-day\x3d"'+w+'"\x3e'+w+"\x3c/dd\x3e";for(w=1;w<=42-z-a.days;w++)y=new Date(a.year,a.month,w),y=y>=b&&y<=c?"":" disabled",u+='\x3cdd class\x3d"other'+y+'" data-month\x3d"1" data-day\x3d"'+w+'"\x3e'+w+"\x3c/dd\x3e";var B=x.html(u).find("dd");B.not(".disabled").off(this.events.click_days).on(this.events.click_days,function(){var a=d(this);t.hasTime()?(B.removeClass("slt"),a.addClass("slt")):(a=t.changeDay(a.data("day"),a.data("month")),t.closeCalendar(!0),e.$element.val(t.formatDate(a)).focus(),t.afterChange(a))});t.hasDate()?q.removeClass("nodate"):q.addClass("nodate");if(t.hasTime()){g.show();k.val(10>a.hour?"0"+a.hour:a.hour).off(this.events.focus_time).on(this.events.focus_time,function(){t.changeTmMenu("hh")});b=parseInt(a.minute/p.mmStep)*p.mmStep;n.val(10>b?"0"+b:b).data("step",p.mmStep).off(this.events.focus_time).on(this.events.focus_time,function(){t.changeTmMenu("mm")});v.val(t.hasSecond()?10>a.second?"0"+a.second:a.second:"00").data("step",p.ssStep).off(this.events.focus_time).on(this.events.focus_time,function(){t.changeTmMenu("ss")});h.off("click").on("click",function(a){d(a.target).closest(".time").length||(r.find("\x3e ul").hide(),t.changeTmMenu())});f.off(this.events.keydown_time).on(this.events.keydown_time,t.keydownInt).each(function(){var a=d(this);a.off(e.events.keyup_time).on(e.events.keyup_time,function(){t.changeTm(a)})}).off(this.events.click_time).on(this.events.click_time,function(){t.clickTmMenu(d(this),d(this).data("type"))});var A=null;m.off(this.events.click_spinner).on(this.events.click_spinner,function(a){var b=d(this);f.filter(".slt").each(function(){t.changeTm(d(this),b)});a.preventDefault()}).off(this.events.mousedown_sp).on(this.events.mousedown_sp,function(a){var b=d(this);A=setInterval(function(){f.filter(".slt").each(function(){t.changeTm(d(this),b)})},150)}).off(this.events.mouseup_sp).on(this.events.mouseup_sp,function(a){clearTimeout(A)});t.hasHour()||k.attr("disabled",!0);t.hasMinute()||n.attr("disabled",!0);t.hasSecond()||v.attr("disabled",!0)}else g.hide();this.show()};A.prototype.show=function(){var a=this.$element.offset(),b=a.top+this.$element.get(0).offsetHeight,c=h.outerHeight(!0);b>c&&b>d(window).height()-c&&(b=a.top-c);h.css({left:a.left,top:b}).show().click(function(a){a.stopPropagation()})};var y=d.fn.datepicker;d.fn.datepicker=l;d.fn.datepicker.Constructor=A;d.fn.datepicker.noConflict=function(){d.fn.datepicker=y;return this};d(document).on(BJUI.eventType.initUI,function(a){a=d(a.target).find('[data-toggle\x3d"datepicker"]');a.length&&(a.data("nobtn")||l.call(a,"addBtn"))});d(document).on("click.bjui.datepicker.data-api",'[data-toggle\x3d"datepickerbtn"]',function(a){var b=d(this).prevAll('[data-toggle\x3d"datepicker"]');b&&b.is(":text")&&(l.call(b,b.data()),a.preventDefault())});d(document).on("click.bjui.datepicker.data-api",'[data-toggle\x3d"datepicker"]',function(a){var b=d(this);!b.data("onlybtn")&&b.is(":text")&&(l.call(b,b.data()),a.preventDefault())})}(jQuery);+function(d){function l(a){var b=arguments,e=a;return this.each(function(){var c=d(this),g=d.extend({},h.DEFAULTS,c.data(),"object"===typeof a&&a),f=c.data("bjui.ajaxtab");f||c.data("bjui.ajaxtab",f=new h(this,g));if("string"===typeof e&&d.isFunction(f[e]))if([].shift.apply(b),b)f[e].apply(f,b);else f[e]();else f.init()})}var h=function(a,b){this.$element=d(a);this.options=b};h.DEFAULTS={url:void 0,target:void 0,reload:!1};h.prototype.init=function(){var a=this.options;a.url?(a.url=decodeURI(a.url).replacePlh(this.$element.closest(".unitBox")),a.url.isFinishedTm()?(a.url=encodeURI(a.url),a.target?a.reload?this.load():this.$element.data("bjui.ajaxtab.reload")?this.$element.tab("show"):this.load():BJUI.debug("Ajaxtab Plugin: Attribute 'target' is not defined!")):(this.$element.alertmsg("error",a.warn||BJUI.regional.plhmsg),BJUI.debug("Ajaxtab Plugin: The new ajaxtab's url is incorrect, url: "+a.url))):BJUI.debug("Ajaxtab Plugin: Error trying to open a tab, url is undefined!")};h.prototype.load=function(){var a=this.$element,b=this.options;d(b.target).ajaxUrl({url:b.url,data:{},callback:function(){a.data("bjui.ajaxtab.reload",!0).tab("show")}})};var q=d.fn.ajaxtab;d.fn.ajaxtab=l;d.fn.ajaxtab.Constructor=h;d.fn.ajaxtab.noConflict=function(){d.fn.ajaxtab=q;return this};d(document).on("click.bjui.ajaxtab.data-api",'[data-toggle\x3d"ajaxtab"]',function(a){var b=d(this),e=b.data();e.url||(e.url=b.attr("href"));l.call(b,e);a.preventDefault()})}(jQuery);+function(d){function l(a){var b=arguments,e=a;return this.each(function(){var c=d(this),g=d.extend(!0,{},h.DEFAULTS,"object"===typeof a&&a),f=c.data("bjui.datagrid");f||c.data("bjui.datagrid",f=new h(this,g));if("string"===typeof e&&d.isFunction(f[e]))if([].shift.apply(b),b)f[e].apply(f,b);else f[e]();else f.init()})}var h=function(a,b){this.$element=d(a);this.options=b;this.tools=this.TOOLS();this.datanames={tbody:"bjui.datagrid.tbody.dom",td_html:"bjui.datagrid.td.html",changeData:"bjui.datagrid.tr.changeData"};this.classnames={s_checkbox:"datagrid-checkbox",s_linenumber:"datagrid-linenumber",s_edit:"datagrid-column-edit",s_lock:"datagrid-lock",s_menu:"datagrid-menu-box",s_filter:"datagrid-filter-box",s_showhide:"datagrid-showhide-box",th_cell:"datagrid-cell",th_menu:"datagrid-column-menu",btn_menu:"datagrid-column-menu-btn",th_col:"datagrid-col",th_field:"datagrid-col-field",th_sort:"datagrid-sortable",th_resize:"datagrid-resize-head",th_resizemark:"datagrid-column-resizemark",tr_child:"datagrid-child-tr",tr_edit:"datagrid-edit-tr",tr_add:"datagrid-add-tr",tr_selected:"datagrid-selected-tr",td_edit:"datagrid-edit-td",td_changed:"datagrid-changed",td_child:"datagrid-child-td",td_linenumber:"datagrid-linenumber-td",td_checkbox:"datagrid-checkbox-td",li_asc:"datagrid-li-asc",li_desc:"datagrid-li-desc",li_filter:"datagrid-li-filter",li_showhide:"datagrid-li-showhide",li_lock:"datagrid-li-lock",li_unlock:"datagrid-li-unlock"}};h.DEFAULTS={gridTitle:"",columns:null,data:null,dataUrl:null,updateRowUrl:null,postData:null,loadType:"POST",dataType:"json",local:"remote",fieldSortable:!0,filterThead:!0,sortAll:!1,filterAll:!1,filterMult:!0,selectMult:!1,linenumberAll:!1,showLinenumber:!0,showCheckboxcol:!1,showChildcol:void 0,showEditbtnscol:!1,showTfoot:!1,showToolbar:!1,showNoDataTip:!0,toolbarItem:"",toolbarCustom:"",columnResize:!0,columnMenu:!0,columnShowhide:!0,columnFilter:!1,columnLock:!0,paging:!0,pagingAlign:"center",hasChild:!1,childOptions:{width:"100%",height:"auto",paging:!1,columnMenu:!1,filterThead:!1,childUpdate:!1},editUrl:null,editCallback:null,editMode:"inline",editDialogOp:null,editType:"POST",inlineEditMult:!0,saveAll:!0,addLocation:"first",delUrl:null,delType:"POST",delPK:null,delConfirm:!0,delCallback:null,jsonPrefix:"",contextMenuH:!0,contextMenuB:!1,hScrollbar:!1,fullGrid:!1,importOption:null,exportOption:null,beforeEdit:null,beforeDelete:null,beforeSave:null,afterSave:null,afterDelete:null};h.renderItem=function(a,b,e){if(!e||!e.length)return"";var c="";d.each(e,function(b,d){if("undefined"!==typeof d[a])return c=d[a],!1});return c};h.renderItemMulti=function(a,b,e){if(!e||!e.length)return"";var c=[],g="array"===d.type(a)?a:String(a).split(",");d.each(e,function(a,b){d.each(g,function(a,d){if("undefined"!==typeof b[d])return c.push(b[d]),!1})});return c.join(",")};h.prototype.TOOLS=function(){var a=this,b=a.options,e={getPageCount:function(a,b){return Math.ceil(b/a)},getPageInterval:function(a,b,d){var c=Math.ceil(d/2),e=b>c?Math.max(Math.min(b-c,a-d),0):0;a=b>c?Math.min(b+c,a):Math.min(d,a);a-e==d&&(a+=1);a<d&&(a+=1);e+1==a&&(a+=1);return{start:e+1,end:a}},getRight:function(b){var c=0;b=b.data("index");var e=a.$tbody.find("\x3e tr:first \x3e td:lt("+(b+1)+")");e&&e.length||(e=a.$colgroupH.find("\x3e col:lt("+(b+1)+")"));e.each(function(){var a=d(this),a=a.is(":hidden")?0:a.outerWidth();c+=a});return c},getRight4Lock:function(b){var c=0,e=a.$lockTbody.find("\x3e tr:first \x3e td:eq("+b+")");(e=e&&e.prevAll().add(e))&&e.length||(e=a.$lockColgroupH.filter(":lt("+(b+1)+")"));e.each(function(){var a=d(this),a=a.is(":hidden")?0:a.outerWidth();c+=a});return c},beforeEdit:function(c,d){var e=b.beforeEdit;return e&&("string"===typeof e&&(e=e.toFunc()),"function"===typeof e)?e.call(a,c,d):!0},beforeSave:function(c,d){var e=b.beforeSave;return e&&("string"===typeof e&&(e=e.toFunc()),"function"===typeof e)?e.call(a,c,d):!0},afterSave:function(c,e){var f=b.afterSave,g=a.options.childUpdate,k=a.$element.data("bjui.datagrid.parent"),n=function(a){a.closest("table").datagrid("updateRow",a)};f&&("string"===typeof f&&(f=f.toFunc()),"function"===typeof f&&f.call(a,c,e));c.each(function(){d(this).removeData("datagrid.addData")});k&&g&&("string"===typeof g&&-1===g.indexOf("all")?e.addFlag&&-1!==g.indexOf("add")?n(k):-1!==g.indexOf("edit")&&n(k):n(k));if(a.fixedColumnWidth){var h,r,p=d('\x3cdiv class\x3d"bjui-datagrid"\x3e\x3c/div\x3e'),x,t;d.each(a.columnModel,function(b,c){c.fixedWidth&&(h||(h=a.$element.clone().addClass("table table-bordered").appendTo(p),h.prepend(a.$thead.clone()),p.appendTo(d("body")),h.attr("style","width:auto !important;").initui(),h.find("colgroup").remove(),h.find(".datagrid-filter").remove()),r=h.find("\x3e tbody \x3e tr:first-child"),r.hasClass("datagrid-nodata")?(rowspan=1<a.$trsH.length?a.$trsH.length-parseInt(c.th.attr("rowspan")||1,10):0,x=h.find("\x3e thead \x3e tr:eq("+rowspan+") \x3e th:eq("+c.th.index()+")").css("width","")):x=h.find("\x3e tbody \x3e tr:first-child \x3e td:eq("+b+")").css({width:"","white-space":"nowrap"}),t=x.outerWidth()+5,a.$colgroupH.find("\x3e col").eq(b).css("width",t),a.$colgroupB.find("\x3e col").eq(b).css("width",t),a.$colgroupF&&a.$colgroupF.find("\x3e col").eq(b).css("width",t))});p&&p.remove();a.fixedColumnWidth=null}"auto"===b.height&&(a.$boxB.scrollTop(5),a.$boxB.scrollTop&&a.fixedHeight())},afterDelete:function(){var c=b.afterDelete;c&&("string"===typeof c&&(c=c.toFunc()),"function"===typeof c&&c.call(a))},setColspan:function(a,b){a.colspan&&(a.colspan=a.colspan+b-1);a.index=a.index+b-1;a.parent&&this.setColspan(a.parent,b)},setOp:function(a){a.name?(a.menu="undefined"===typeof a.menu?!0:a.menu,a.lock="undefined"===typeof a.lock?!0:a.lock,a.edit="undefined"===typeof a.edit?!0:a.edit,a.add="undefined"===typeof a.add?!0:a.add,a.quicksort="undefined"===typeof a.quicksort?!0:a.quicksort,a.quickfilter="undefined"===typeof a.quickfilter?!0:a.quickfilter):a.menu=a.lock=a.edit=a.add=a.quickSort=a.quickfilter=!1;a.hide="undefined"===typeof a.hide?!1:a.hide;return a},createTrsByData:function(b,g){var c;a.$tbody||(a.$tbody=d("\x3ctbody\x3e\x3c/tbody\x3e"));b&&(c=b.list?b.list:b,a.paging.total=c.length||0,a.paging.total||(c=[]),"object"===typeof b&&a.paging.total&&(b[BJUI.pageInfo.total]&&(a.paging.total=parseInt(b[BJUI.pageInfo.total],10)),b[BJUI.pageInfo.pageSize]&&(g&&a.paging.pageSize!=b[BJUI.pageInfo.pageSize]&&a.$boxP&&a.$boxP.trigger("bjui.datagrid.paging.pageSize",b[BJUI.pageInfo.pageSize]),a.paging.pageSize=parseInt(b[BJUI.pageInfo.pageSize],10))),a.paging.pageCount=e.getPageCount(a.paging.pageSize,a.paging.total),a.paging.pageCurrent>a.paging.pageCount&&(a.paging.pageCurrent=a.paging.pageCount),a.paging.pageCurrent||(a.paging.pageCurrent=1),this.initTbody(c,g));a.init_tbody||a.$tbody.appendTo(a.$tableB);a.init_thead||a.initThead()},initTbody:function(c,e){var f=this,g=a.allData,k=b.dataType||"json",n=a.columnModel,h=a.hiddenFields,r=[],p=a.attach,x,t=a.paging,l=0,u=t.pageSize,q=function(){k=k.toLowerCase();c&&(g=a.allData=c);"local"===b.local&&a.$element.data("allData",c);g.length?"local"===b.local?(l=t.pageSize*(t.pageCurrent-1),u=l+t.pageSize,t.total!=g.length&&(t.total=g.length),l>g.length&&(l=t.pageSize*(t.pageCount-1))):g.length>t.pageSize&&(u=t.pageSize):u=0;u>g.length&&(u=g.length);if("array"===k&&c&&c.length&&"array"===d.type(c[0])){var m=l,v=u,z=[],q;"local"===b.local&&(m=0,v=g.length);for(;m<v;m++)x={},q=0,d.each(g[m],function(a,b){var c;c=b;n[q]&&n[q].gridNumber&&q++;n[q]&&n[q].gridCheckbox&&q++;"string"===typeof c&&(c='"'+c+'"');n[q]&&!n[q].gridEdit?(c='{"'+n[q].name+'":'+c+"}",d.extend(x,JSON.parse(c))):(n[q]&&n[q].gridEdit&&q++,q>=n.length&&h&&h[a-n.length]&&(c='{"'+h[a-n.length]+'":'+c+"}",d.extend(x,JSON.parse(c))));q++}),z.push(x);g=a.allData=z}for(m=l;m<u;m++)x=d.extend({},a.allData[m],p),r.push(x);f.createTrs(r,e);a.data=r;a.$element.trigger("afterLoad.bjui.datagrid",{datas:r})};e&&a.$boxM?a.$boxM.show().trigger("bjui.ajaxStop").trigger("bjui.ajaxStart",[50,q]):q()},createTrs:function(c,e){var f=a.columnModel,g=a.paging,k=[],n=BJUI.doRegional(FRAG.gridEditBtn,a.regional),h=BJUI.doRegional(FRAG.gridExpandBtn,a.regional),r=!1;e&&(d.each(f,function(b,c){c.locked&&(a.colLock(c.th,!1),c.lock_refresh=!0)}),a.$tbody.empty(),a.$lockTableH&&a.$lockTableH.empty(),a.$lockTableB&&a.$lockTableB.empty());if(!c.length&&!e){var p={};p[f[0].name]="0";r=!0;c=[];c.push(p)}p=(new Date).getTime();a.begintime=p;for(var p=0,x=c.length;p<x;p++){var t=c[p],l=f.length,u=b.linenumberAll?(g.pageCurrent-1)*g.pageSize+(p+1):p+1,q=[],y=BJUI.StrBuilder(),w,B,E,F,D,C;d.extend(t,{gridNumber:u,gridIndex:p});for(var H=0;H<l;H++){u=f[H];w=u.name||"datagrid-noname";w=t[w];F="";D=[];E=C=B="";if("undefined"===typeof w||"null"===w||null===w)w="";B=w;u.align&&(F=' align\x3d"'+u.align+'"');u.gridChild&&(w=h);u.gridCheckbox&&(w='\x3cdiv\x3e\x3cinput type\x3d"checkbox" data-toggle\x3d"icheck" name\x3d"datagrid.checkbox" value\x3d"true"\x3e\x3c/div\x3e');u.gridEdit&&(w=n,D.push(a.classnames.s_edit));if(u.calc){u.calc_count||(u.calc_count=c.length);var G=w?String(w).isNumber()?Number(w):0:0;"sum"===u.calc||"avg"===u.calc?u.calc_sum=(u.calc_sum||0)+G:"max"===u.calc?u.calc_max=u.calc_max?u.calc_max<G?G:u.calc_max:G:"min"===u.calc&&(u.calc_min=u.calc_min?u.calc_min>G?G:u.calc_min:G)}u.gridChild&&D.push(a.classnames.td_child);u.gridNumber&&D.push(a.classnames.td_linenumber);u.gridCheckbox&&D.push(a.classnames.td_checkbox);D=D.length?' class\x3d"'+D.join(" ")+'"':"";e&&u.hidden&&(C=' style\x3d"display:none;"');u.items&&!u.render&&(u.render=u.attrs&&u.attrs.multiple?d.datagrid.renderItemMulti:d.datagrid.renderItem);u.render&&"string"===typeof u.render&&(u.render=u.render.toFunc());u.render&&"function"===typeof u.render&&(u.items?("string"===typeof u.items&&(u.items.trim().startsWith("[")?u.items=u.items.toObj():u.items=u.items.toFunc()),a.renderTds||(a.renderTds=[]),G=function(b,c,e,f){d.when(f.items.call(a)).done(function(b){f.items=b;a.delayRender--})},"function"===typeof u.items?(p||(a.delayRender||(a.delayRender=0),a.delayRender++,G(p*H,B,t,u)),a.renderTds.push({trindex:p,tdindex:H,label:B,data:t,render:u.render})):E=u.render.call(a,B,t,u.items)):E=u.render.call(a,B,t));y.add("\x3ctd").add(F).add(D).add(C).add("\x3e\x3cdiv\x3e").add(E||w).add("\x3c/div\x3e\x3c/td\x3e");q.push(y.toString())}k.push("\x3ctr\x3e"+q.join("")+"\x3c/tr\x3e");r?(k=[],k.push(this.createNoDataTr(!0)||"")):k.push(this.createChildTr(null,t))}a.$tbody.html(k.join(""));e&&(a.initEvents(),b.editMode&&a.edit(),c.length||this.createNoDataTr(),a.$boxP&&a.$boxP.trigger("bjui.datagrid.paging.jump"),d.each(f,function(b,c){c.lock_refresh&&(a.colLock(c.th,!0),delete c.lock_refresh)}),setTimeout(function(){a.$tableB.initui();a.$lockTableB&&a.$lockTableB.initui();a.fixedHeight();a.$boxM&&a.$boxM.trigger("bjui.ajaxStop").hide()},c.length+1))},replacePlh:function(a,b){return a.replace(/{\/?[^}]*}/g,function(a){a=a.replace(/[{}]+/g,"");a=b[a];if("undefined"===typeof a||"null"===a||null===a)a="";return a})},createNoDataTr:function(b){if(a.options.showNoDataTip){if(b)return'\x3ctr class\x3d"datagrid-nodata"\x3e\x3ctd colspan\x3d"'+a.columnModel.length+'"\x3e'+("string"===typeof a.options.showNoDataTip?a.options.showNoDataTip:BJUI.getRegional("datagrid.noData"))+"\x3c/td\x3e\x3c/tr\x3e";a.$tbody.find("\x3e tr").length||d('\x3ctr class\x3d"datagrid-nodata"\x3e\x3c/tr\x3e').html('\x3ctd colspan\x3d"'+a.columnModel.length+'"\x3e'+("string"===typeof a.options.showNoDataTip?a.options.showNoDataTip:BJUI.getRegional("datagrid.noData"))+"\x3c/td\x3e").appendTo(a.$tbody)}},createChildTr:function(c,e){if(!(c&&c.next()&&c.next().hasClass(a.classnames.tr_child))&&b.hasChild&&b.childOptions&&b.childOptions.dataUrl){a.childOptions=d.extend(!0,{},h.DEFAULTS,b.childOptions);var f='\x3ctr class\x3d"'+a.classnames.tr_child+'"\x3e\x3ctd colspan\x3d"'+a.columnModel.length+'" style\x3d"width:100%; padding:10px; background:#FAFAFA;"\x3e\x3ctable class\x3d"table-child"\x3e\x3c/table\x3e\x3c/td\x3e\x3c/tr\x3e';if(c&&c.length)c.after(f);else return f}},getNoChildTrIndex:function(b){if(isNaN(b)){if(!b||!b.length)return-1;b=b.index()}else b=parseInt(b,10);a.options.hasChild&&a.options.childOptions&&(b*=2);return b},getNoChildDataIndex:function(b){b=isNaN(b)?this.getNoChildTrIndex(b):parseInt(b,10);if(-1===b)return b;a.options.hasChild&&a.options.childOptions&&(b/=2);return b},loadData:function(c,e){var f=this,g=b.dataUrl,k=b.dataType||"json";a.$boxM&&a.$boxM.show().trigger("bjui.ajaxStart");k=k.toLowerCase();"array"===k&&(k="text");b.postData&&("string"===typeof b.postData&&(b.postData.trim().startsWith("{")?b.postData=b.postData.toObj():b.postData=b.postData.toFunc()),"function"===typeof b.postData&&(b.postData=b.postData.apply()),"object"===typeof b.postData&&(c=c?d.extend({},b.postData,c):b.postData));BJUI.ajax("doajax",{url:g,data:c||{},type:b.loadType,cache:b.cache||!1,dataType:k,okCallback:function(a){if("json"===k)f.createTrsByData(a,e);else if("text"===k)"array"!==d.type(a)&&(a=[]),f.createTrsByData(a,e);else if("xml"===k){var b=[],c;d(a).find("row").each(function(){c={};d(this).find("cell").each(function(a){var b=d(this);a=b.text();b=b.attr("name");c[b]=a});b.push(c)});b.length&&f.createTrsByData(b,e)}else BJUI.debug("Datagrid Plugin: The options 'dataType' is incorrect!")},errCallback:function(){a.destroy()},failCallback:function(){a.destroy()}})},appendColumns:function(){a.childColumn={name:"gridChild",gridChild:!0,width:30,minWidth:30,label:"...",align:"center",menu:!1,edit:!1,quicksort:!1};a.linenumberColumn={name:"gridNumber",gridNumber:!0,width:30,minWidth:30,label:"No.",align:"center",menu:!1,edit:!1,quicksort:!1};a.checkboxColumn={name:"gridCheckbox",gridCheckbox:!0,width:30,minWidth:30,label:"Checkbox",align:"center",menu:!1,edit:!1,quicksort:!1};a.editBtnsColumn={name:"gridEdit",gridEdit:!0,width:110,minWidth:110,label:"string"===typeof b.showEditbtnscol?b.showEditbtnscol:"Edit",align:"center",menu:!1,edit:!1,hide:!1,quicksort:!1}},setBoxbH:function(c){c=c||a.boxH||b.height;var d=0,e;100>c||(isNaN(c)&&("auto"===c?(c=(a.$boxT?a.$boxT.outerHeight():0)+(a.$boxH?a.$boxH.outerHeight():0)+(a.$toolbar?a.$toolbar.outerHeight():0)+(a.$boxP?a.$boxP.outerHeight():0)+(a.$boxB?a.$boxB.outerHeight():0)+(a.$boxF?a.$boxF.outerHeight():0)+25,a.$grid.height(c),a.boxH=c):c=a.$grid.height()),a.$boxT&&(e=a.$boxT.outerHeight(),c-=e,d+=e),a.$toolbar&&(e=a.$toolbar.outerHeight(),c-=e,d+=e),a.$boxP&&(c-=a.$boxP.outerHeight()),a.$boxF&&(c-=a.$boxF.outerHeight()),d+=a.$tableH.outerHeight(),c-=a.$boxH.outerHeight(),0>c&&(c=0),a.$boxB.height(c),a.$boxM.height(c).css({top:d}),a.$lockB&&a.$lockB.height(c),a.$element.data("bjui.datagrid.parent")&&a.$element.data("bjui.datagrid.parent").closest("table").datagrid("fixedHeight"))},showSubMenu:function(b,e,f){var c,g=e.outerWidth(),n=f.data("width")||f.outerWidth(),h,r=a.$boxH.width(),p=function(b,e,f){c=e.offset().left-a.$grid.offset().left-1;h={left:"50%"};b.removeClass("active");e.hasClass("position-right")||r-c<g+n?(f.css({left:"auto",right:"100%"}),h={right:"50%"}):f.css({left:"100%",right:"auto"});h.opacity=.2;f.stop().animate(h,"fast",function(){d(this).hide()})};b.hover(function(){f.appendTo(b);if(b.hasClass(a.classnames.li_filter)&&f.is(":visible"))return!1;var d=b.siblings("."+a.classnames.li_filter);d.length&&d.hasClass("active")&&p(d,e,d.find("\x3e ."+a.classnames.s_filter));c=e.offset().left-a.$grid.offset().left-1;h={left:"100%"};e.hasClass("position-right")||r-c<g+n?(f.css({left:"auto",right:"50%"}),h={right:"100%"}):f.css({left:"50%",right:"auto"});h.opacity=1;b.addClass("active");f.show().stop().animate(h,"fast")},function(){if(b.hasClass(a.classnames.li_filter))return!1;p(b,e,f)});b.on("bjui.datagrid.th.submenu.hide",function(a,b,c){p(d(this),b,c)})},locking:function(b){var c=b.data("index"),d=a.columnModel[c],c=d.lock,d=d.locked,e=a.$menu,k=e.find("\x3e ul").find("\x3e li."+a.classnames.li_lock),n=k.next();d?(k.addClass("disable"),n.removeClass("disable")):(n.addClass("disable"),k.removeClass("disable"));c?(k.show().off("click").on("click",function(){k.hasClass("disable")||(e.hide().data("bjui.datagrid.menu.btn").removeClass("active"),a.colLock(b,!0))}),n.show().off("click").on("click",function(){n.hasClass("disable")||(e.hide().data("bjui.datagrid.menu.btn").removeClass("active"),a.colLock(b,!1))})):(k.hide().off("click"),n.hide().off("click"))},createShowhide:function(){var b;a.$showhide||(a.col_showhide_count=a.columnModel.length,b=d('\x3cul class\x3d"'+a.classnames.s_showhide+'" role\x3d"menu"\x3e\x3c/ul\x3e'),d.each(a.columnModel,function(c,e){(e.gridNumber||e.gridCheckbox||e.gridEdit)&&a.col_showhide_count--;var f=d(FRAG.gridShowhide.replaceAll("#index#",e.index).replaceAll("#label#",e.label||"")).toggleClass("nodisable",!!(e.gridNumber||e.gridCheckbox||e.gridEdit));(function(c){f.click(function(){if(d(this).hasClass("disable"))return!1;var e=d(this),f=!e.find("i").hasClass("fa-check-square-o");e.toggleClass("datagrid-col-check").find("i").attr("class","fa fa"+(f?"-check":"")+"-square-o");a.showhideColumn(c.th,f);c.gridNumber||c.gridCheckbox||c.gridEdit||(a.col_showhide_count=f?a.col_showhide_count+1:a.col_showhide_count-1);1==a.col_showhide_count?b.find("\x3e li.datagrid-col-check").addClass("disable"):b.find("\x3e li.disable").removeClass("disable");b.find("\x3e li.nodisable").removeClass("disable")})})(e);f.appendTo(b);e.hide&&f.trigger("click")}),b.appendTo(a.$grid),b.data("width",b.outerWidth()),a.$showhide=b)},showhide:function(b,d){var c=b.index,e=b.th,g=a.$tbody.find("\x3e tr"),n=d?"":"none",h=function(a){var b=a.colspan;d?b++:b--;b?a.th.css("display",""):a.th.css("display","none");a.th.attr("colspan",b);a.colspan=b;a.parent&&h(a.parent)};"undefined"===typeof b.hidden&&(b.hidden=!1);b.hidden!==!d&&(b.hidden=!d,e.css("display",n),g.find("\x3e td:eq("+c+")").css("display",n),a.$colgroupH.find("\x3e col").eq(c).css("display",n),a.$colgroupB.find("\x3e col").eq(c).css("display",n),a.$thead.find("\x3e tr.datagrid-filter \x3e th:eq("+c+")").css("display",n),a.$boxF&&(a.$tableF.find("\x3e thead \x3e tr \x3e th:eq("+c+")").css("display",n),a.$colgroupF.find("\x3e col").eq(c).css("display",n)),b.calc&&a.$tfoot&&a.$tfoot.trigger("bjui.datagrid.tfoot.resizeH"),b.parent&&h(b.parent),a.$tbody.find("\x3e tr."+a.classnames.tr_child+":visible \x3e td table").trigger("bjui.datagrid.child.resize"))},jumpPage:function(c,d){var e=a.allData;c&&(a.paging.oldPageCurrent=a.paging.pageCurrent,a.paging.pageCurrent=c);d&&(a.paging.oldPageSize=a.paging.pageSize,a.paging.pageSize=d,a.paging.pageCount=this.getPageCount(d,a.paging.total),a.paging.pageCurrent>a.paging.pageCount&&(a.paging.pageCurrent=a.paging.pageCount));"remote"===b.local?(e=this.getRemoteFilterData(!0),this.loadData(e,!0)):this.initTbody(e,!0)},quickSort:function(c){if(a.isDom){if("local"===b.local)return;b.sortAll=!0}if(a.$tbody.find("\x3e tr."+a.classnames.tr_edit).length)a.$tbody.alertmsg("info",BJUI.getRegional("datagrid.editMsg"));else{var d=c.th,e=a.data,m=a.allData,k,n=c.name,h=c.type;k=a.$thead.find("\x3e tr \x3e th.datagrid-quicksort-th");n||(n="datagrid-noname");var r=function(a){a.sort(function(a,b){var d=typeof b[n];return"boolean"===h||"number"===h||"number"===d||"boolean"===d?c.sortAsc?a[n]-b[n]:b[n]-a[n]:c.sortAsc?String(a[n]).localeCompare(b[n]):String(b[n]).localeCompare(a[n])})};k.find("\x3e div \x3e .datagrid-label \x3e i").remove();c.sortAsc?(k="desc",c.sortAsc=!1):(k="asc",c.sortAsc=!0);d.find("\x3e div \x3e .datagrid-label").prepend('\x3ci class\x3d"fa fa-long-arrow-'+(c.sortAsc?"up":"down")+'"\x3e\x3c/i\x3e');b.sortAll?"remote"===b.local?(d={},d[BJUI.pageInfo.orderField]=n,d[BJUI.pageInfo.orderDirection]=k,d[BJUI.pageInfo.pageSize]=a.paging.pageSize,d[BJUI.pageInfo.pageCurrent]=a.paging.pageCurrent,this.loadData(d,!0)):(r(m),this.initTbody(m,!0)):(r(e),this.createTrs(e,!0))}},quickFilter:function(c,e){if(a.isDom){if("remote"!=b.local){BJUI.debug("Datagrid Plugin: Please change the local option is remote!");return}if(!b.dataUrl){BJUI.debug("Datagrid Plugin: Not Set the dataUrl option!");return}}var f=a.data,g=a.allData,k=c.name,n=function(a,b,c,e){var f=!1;switch(a){case "\x3d":f=String(b)===String(c);break;case "!\x3d":f=String(b)!==String(c);break;case "\x3e":f=parseFloat(c)>parseFloat(b);break;case "\x3c":f=parseFloat(c)<parseFloat(b);break;case "like":e&&"select"===e.type?(f=String(b)===String(c),e.attrs&&e.attrs.multiple&&d.isArray(b)&&(f=-1!=d.inArray(c,b))):f=0<=String(c).indexOf(String(b))}return f},h=function(a,b){var c=function(a){var c=0;d.each(b,function(b,d){var e=d.datas;c++;if(!e)return c--,d.model.isFiltered=!1,d.model.th.trigger("bjui.datagrid.th.filter",[!1]),d.model.$quickfilter&&d.model.$quickfilter.trigger("bjui.datagrid.thead.clearfilter"),!0;d.model.isFiltered=!0;d.model.th.trigger("bjui.datagrid.th.filter",[!0]);e.andor?"and"===e.andor?n(e.operatorA,e.valA,a[b],d.model)&&n(e.operatorB,e.valB,a[b],d.model)&&c--:"or"===e.andor&&(n(e.operatorA,e.valA,a[b],d.model)||n(e.operatorB,e.valB,a[b],d.model))&&c--:e.operatorB?n(e.operatorB,e.valB,a[b],d.model)&&c--:n(e.operatorA,e.valA,a[b],d.model)&&c--});return c?!1:!0};return d.grep(a,function(a,b){return c(a)})};a.filterDatas||(a.filterDatas={});b.filterMult||(a.filterDatas={});a.filterDatas[k]={datas:e,model:c};"remote"!==b.local&&g&&(a.oldAllData?g=a.oldAllData.concat():a.oldAllData=g.concat());b.filterAll?"remote"===b.local?this.loadData(this.getRemoteFilterData(),!0):(f=h(g,a.filterDatas),a.paging.pageCurrent=1,a.paging.pageCount=this.getPageCount(a.paging.pageSize,f.length),this.initTbody(f,!0)):a.isDom?this.loadData(this.getRemoteFilterData(),!0):(a.oldData?f=a.oldData.concat():a.oldData=f.concat(),f=h(f,a.filterDatas),this.createTrs(f,!0))},getRemoteFilterData:function(c,e,f){var g={};a.filterDatas&&!d.isEmptyObject(a.filterDatas)&&(d.each(a.filterDatas,function(a,c){if(!c.datas)return c.model.isFiltered=!1,c.model.th.trigger("bjui.datagrid.th.filter",[!1]),c.model.$quickfilter&&c.model.$quickfilter.trigger("bjui.datagrid.thead.clearfilter"),!0;c.model.isFiltered=!0;c.model.th.trigger("bjui.datagrid.th.filter",[!0]);b.jsonPrefix&&(a=b.jsonPrefix+"."+a);c.datas.andor&&(g.andor=c.datas.andor);c.datas.operatorA&&(g[a]=c.datas.valA,g[a+".operator"]=c.datas.operatorA);c.datas.operatorB&&(g[a]?(g[a]=[g[a],c.datas.valB],g[a+".operator"]=[g[a+".operator"],c.datas.operatorB]):(g[a]=c.datas.valB,g[a+".operator"]=c.datas.operatorB))}),c||(a.paging.pageCurrent=1));g[BJUI.pageInfo.pageSize]=a.paging.pageSize;g[BJUI.pageInfo.pageCurrent]=a.paging.pageCurrent;a.$element.data("filterDatas",g);return g},setDomData:function(b){var c=a.columnModel,e={},m=b.attr("data-hidden-datas"),k=a.attach;b.find("\x3e td").each(function(a){var b=d(this),f=c[a],b=b.attr("data-val")||b.text();f.name?e[f.name]=b:e["datagrid-noname"+a]=b});m&&(m=m.toObj());d.extend(e,k,{gridNumber:b.index()+1},m);b.data("initData",e);return e},initEditInputs:function(){var b=a.columnModel;a.inputs=[];d.each(b,function(b,c){var e=c.name,f="",g="",h=[],r="";if(c)if(c.attrs&&"object"===typeof c.attrs&&d.each(c.attrs,function(a,b){"object"===typeof b&&(b=JSON.stringify(b).replaceAll('"',"'"));r+=" "+a+"\x3d"+b}),c===a.childColumn||c===a.linenumberColumn||c===a.checkboxColumn||c===a.editBtnsColumn)a.inputs.push("");else if(e)if(c.rule?f=' data-rule\x3d"'+c.label+"\uff1a"+c.rule+'"':"date"===c.type&&(f=' data-rule\x3d"pattern('+(c.pattern||"yyyy-MM-dd")+')"'),c.type)switch(c.type){case "date":c.pattern||(c.pattern="yyyy-MM-dd");g=' data-pattern\x3d"'+c.pattern+'"';a.inputs.push('\x3cinput type\x3d"text" name\x3d"'+e+'" data-toggle\x3d"datepicker"'+g+f+r+"\x3e");break;case "select":if(!c.items)break;d.each(c.items,function(a,b){d.each(b,function(a,b){h.push('\x3coption value\x3d"'+a+'"\x3e'+b+"\x3c/option\x3e")})});a.inputs.push('\x3cselect name\x3d"'+e+'" data-toggle\x3d"selectpicker"'+f+r+' data-width\x3d"100%"\x3e'+h.join("")+"\x3c/select\x3e");break;case "boolean":a.inputs.push('\x3cinput type\x3d"checkbox" name\x3d"'+e+'" data-toggle\x3d"icheck"'+f+r+' value\x3d"true"\x3e');break;case "lookup":a.inputs.push('\x3cinput type\x3d"text" name\x3d"'+e+'" data-toggle\x3d"lookup" data-custom-event\x3d"true"'+f+r+"\x3e");break;case "findgrid":a.inputs.push('\x3cinput type\x3d"text" name\x3d"'+e+'" data-toggle\x3d"findgrid" data-custom-event\x3d"true"'+f+r+"\x3e");break;case "spinner":a.inputs.push('\x3cinput type\x3d"text" name\x3d"'+e+'" data-toggle\x3d"spinner"'+f+r+"\x3e");break;case "textarea":a.inputs.push('\x3ctextarea data-toggle\x3d"autoheight" rows\x3d"1"'+f+r+"\x3e\x3c/textarea\x3e");break;default:a.inputs.push('\x3cinput type\x3d"text" name\x3d"'+e+'"'+f+r+"\x3e")}else a.inputs.push('\x3cinput type\x3d"text" name\x3d"'+e+'"'+f+r+"\x3e");else a.inputs.push("")});return a.inputs},contextmenuH:function(){var b=this;a.$tableH.on("contextmenu","tr:not(.datagrid-filter)",function(c){a.$showhide||b.createShowhide();var e=c.pageX,g=c.pageY;d(window).width()<e+a.$showhide.width()&&(e-=a.$showhide.width());d(window).height()<g+a.$showhide.height()&&(g-=a.$showhide.height());a.$menu&&a.$grid.trigger("click.bjui.datagrid.filter");a.$showhide.appendTo("body").css({left:e,top:g,opacity:1,"z-index":9999}).show();d(document).on("click",function(b){d(b.target).closest("."+a.classnames.s_showhide).length||a.$showhide.css({left:"50%",top:0,opacity:.2,"z-index":""}).hide().appendTo(a.$grid)});c.preventDefault();c.stopPropagation()})},contextmenuB:function(b,d){b.contextmenu("show",{exclude:"input, .bootstrap-select",items:[{icon:"refresh",title:BJUI.getRegional("datagrid.refresh"),func:function(b,c){a.refresh()}},{title:"diver"},{icon:"plus",title:BJUI.getRegional("datagrid.add"),func:function(b,c){a.add()}},{icon:"edit",title:BJUI.getRegional("datagrid.edit"),func:function(b,c){var e=b;d&&(e=a.$tbody.find("\x3e tr:eq("+e.index()+")"));a.doEditRow(e)}},{icon:"undo",title:BJUI.getRegional("datagrid.cancel"),func:function(b,c){var e=b;d&&(e=a.$tbody.find("\x3e tr:eq("+e.index()+")"));e.hasClass(a.classnames.tr_edit)||(e=a.$tbody.find("\x3e tr."+a.classnames.tr_edit));a.doCancelEditRow(e)}},{icon:"remove",title:BJUI.getRegional("datagrid.del"),func:function(b,c){var e=b;d&&(e=a.$tbody.find("\x3e tr:eq("+e.index()+")"));a.delRows(e)}}]})}};return e};h.prototype.init=function(){if(this.$element.isTag("table")&&!this.$element.data("bjui.datagrid.init")){this.$element.data("bjui.datagrid.init",!0);var a=this.options,b=this.tools;this.$element.parent();var e=BJUI.StrBuilder();a.height=a.height||"auto";this.isDom=!1;this.columnModel=[];this.inputs=[];this.regional=BJUI.regional.datagrid;e.add('\x3cdiv class\x3d"bjui-datagrid"\x3e').add(a.gridTitle?'\x3cdiv class\x3d"datagrid-title"\x3e'+a.gridTitle+"\x3c/div\x3e":"").add(a.showToolbar?'\x3cdiv class\x3d"datagrid-toolbar"\x3e\x3c/div\x3e':"").add('\x3cdiv class\x3d"datagrid-box-h"\x3e\x3cdiv class\x3d"datagrid-wrap-h"\x3e\x3ctable class\x3d"table table-bordered"\x3e\x3ccolgroup\x3e\x3c/colgroup\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e').add('\x3cdiv class\x3d"datagrid-box-b"\x3e\x3cdiv class\x3d"datagrid-wrap-b"\x3e\x3c/div\x3e\x3c/div\x3e').add('\x3cdiv class\x3d"datagrid-box-m"\x3e\x3c/div\x3e').add(a.paging?'\x3cdiv class\x3d"datagrid-paging-box"\x3e\x3c/div\x3e':"").add("\x3c/div\x3e");this.$grid=d(e.toString()).insertAfter(this.$element).css("height",a.height);this.$boxH=this.$grid.find("\x3e div.datagrid-box-h");this.$boxB=this.$boxH.next();this.$boxM=this.$boxB.next().css("height",a.height);this.$boxP=a.paging?this.$boxM.next():null;this.$boxT=a.gridTitle?this.$grid.find("\x3e div.datagrid-title"):null;this.$toolbar=a.showToolbar?this.$boxH.prev():null;this.$tableH=this.$boxH.find("\x3e div \x3e table");this.$tableB=this.$element;this.$grid.data("bjui.datagrid.table",this.$element.clone());this.$boxB.find("\x3e div").append(this.$element);this.initTop();"string"===typeof a.paging&&(a.paging=a.paging.toObj());this.paging=d.extend({},{pageSize:30,selectPageSize:"30,60,90",pageCurrent:1,total:0,showPagenum:5},"object"===typeof a.paging&&a.paging);this.attach={gridNumber:0,gridCheckbox:"#checkbox#",gridEdit:"#edit#"};this.$thead=this.$element.find("\x3e thead");if((this.$tbody=this.$element.find("\x3e tbody"))&&this.$tbody.find("\x3e tr").length)this.isDom=!0,this.setColumnModel(),this.$tbody.find("\x3e tr \x3e td").each(function(){var a=d(this),b=a.html();a.html("\x3cdiv\x3e"+b+"\x3c/div\x3e")}),this.paging.total?this.paging.pageCount=b.getPageCount(this.paging.pageSize,this.paging.total):(this.paging.total=this.$tbody.find("\x3e tr").length,this.paging.pageCount=1),this.paging.pageCurrent=1,this.initThead();else{this.$tbody=null;this.$element.find("\x3e tbody").remove();if(a.columns)"string"===typeof a.columns&&(a.columns.trim().startsWith("[")?a.columns=a.columns.toObj():a.columns=a.columns.toFunc()),"function"===typeof a.columns&&(a.columns=a.columns.call()),this.$thead=null,this.$element.find("\x3e thead").remove(),this.createThead();else if(this.$thead&&this.$thead.length&&this.$thead.find("\x3e tr").length)this.setColumnModel();else{BJUI.debug("Datagrid Plugin: No set options 'columns' !");this.destroy();return}a.data||a.dataUrl?this.createTbody():(BJUI.debug("Datagrid Plugin: No options 'data' or 'dataUrl'!"),this.destroy())}}};h.prototype.setColumnModel=function(){var a=this,b=a.options,e=a.$thead.find("\x3e tr"),c=[],g=[],f=e.length;if(!a.isDom){a.tools.appendColumns();var m,k=1<f?' rowspan\x3d"'+f+'"':"";b.showCheckboxcol&&(a.columnModel.push(a.checkboxColumn),"lock"===b.showCheckboxcol&&(a.checkboxColumn.initLock=!0),m=d('\x3cth class\x3d"'+a.classnames.td_checkbox+'"'+k+'\x3e\x3cinput type\x3d"checkbox" data-toggle\x3d"icheck"\x3e\x3c/th\x3e'),m.prependTo(e.first()),k&&m.data("datagrid.column",a.checkboxColumn));b.showLinenumber&&(a.columnModel.unshift(a.linenumberColumn),"lock"===b.showLinenumber&&(a.linenumberColumn.initLock=!0),m=d('\x3cth class\x3d"'+a.classnames.td_linenumber+'"'+k+"\x3eNo.\x3c/th\x3e"),m.prependTo(e.first()),k&&m.data("datagrid.column",a.linenumberColumn));if(b.showChildcol||void 0===b.showChildcol&&b.hasChild&&b.childOptions)a.columnModel.unshift(a.childColumn),m=d('\x3cth class\x3d"'+a.classnames.td_child+'"'+k+"\x3e...\x3c/th\x3e"),m.prependTo(e.first()),k&&m.data("datagrid.column",a.childColumn);b.showEditbtnscol&&(m=d("\x3cth"+k+"\x3e"+a.editBtnsColumn.label+"\x3c/th\x3e"),m.appendTo(e.first()),k&&m.data("datagrid.column",a.editBtnsColumn),a.columnModel[m.index()]=a.editBtnsColumn)}e.length&&1==f?e.find("\x3e th").each(function(c){var e=d(this).addClass("single-row").data("index",c),f=e.data("options"),g=e.attr("width")||"auto",m=e.html();a.columnModel.length&&a.columnModel[c]?(f=a.columnModel[c],f.index=c):(f&&"string"===typeof f&&(f=f.toObj()),"object"!==typeof f&&(f={}),f.index=c,f.label=m,f.width="undefined"===typeof f.width?g:f.width,f=a.tools.setOp(f),a.columnModel[c]=f);a.columnModel[c].th=e;e.html('\x3cdiv\x3e\x3cdiv class\x3d"datagrid-space"\x3e\x3c/div\x3e\x3cdiv class\x3d"datagrid-label"\x3e'+m+'\x3c/div\x3e\x3cdiv class\x3d"'+a.classnames.th_cell+'"\x3e\x3cdiv class\x3d"'+a.classnames.th_resizemark+'"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');f.menu&&b.columnMenu&&e.addClass(a.classnames.th_menu);b.fieldSortable&&f.quicksort&&e.addClass("datagrid-quicksort-th");f.align&&e.attr("align",f.align)}):e.each(function(e){var f=[],m=[],n=-1,k=0;c.length&&(f=c.concat(),m=g.concat());c=[];g=[];d(this).find("\x3e th").each(function(e){e=d(this);var h=e.data("options")||e.data("datagrid.column")||{},p=parseInt(e.attr("colspan")||0,10),t=parseInt(e.attr("rowspan")||0,10),r=e.attr("width")||"auto",v=e.html();h&&"string"===typeof h&&(h=h.toObj());"object"!==typeof h&&(h={});BJUI.isIE(8)&&1===p&&(p=0);h.label=v;h.th=e;h.gridCheckbox&&(h.label="Checkbox");n++;if(p){h.colspan=p;for(var l=f.length?f[n]:n,x=l;x<l+p;x++)c[k++]=x,g[k-1]=h;n+=p-1;e.data("index",n);f.length&&(h.parent=m[n])}t&&1!=t||e.addClass("single-row");p?e.html('\x3cdiv\x3e\x3cdiv class\x3d"datagrid-space"\x3e\x3c/div\x3e\x3cdiv class\x3d"datagrid-label"\x3e'+v+'\x3c/div\x3e\x3cdiv class\x3d"'+a.classnames.th_cell+'"\x3e\x3cdiv class\x3d"'+a.classnames.th_resizemark+'"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'):(h.width="undefined"===typeof h.width?r:h.width,h=a.tools.setOp(h),e.html('\x3cdiv\x3e\x3cdiv class\x3d"datagrid-space"\x3e\x3c/div\x3e\x3cdiv class\x3d"datagrid-label"\x3e'+v+'\x3c/div\x3e\x3cdiv class\x3d"'+a.classnames.th_cell+'"\x3e\x3cdiv class\x3d"'+a.classnames.th_resizemark+'"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),h.menu&&b.columnMenu&&e.addClass(a.classnames.th_menu),b.fieldSortable&&h.quicksort&&e.addClass("datagrid-quicksort-th"),h.align&&e.attr("align",h.align),f.length?(h.index=f[n],h.parent=m[n],a.columnModel[f[n]]=h):(h.index=n,a.columnModel[n]=h),e.data("index",h.index))})})};h.prototype.createThead=function(){var a=this,b=a.options,e=b.columns,c=[],g,f,m,h,n,v,r,p=function(b,c,e,f){c||(c=[]);e||(e=0);c[e]||(c[e]=[]);d.each(b,function(b,d){var g=c[e].length,m;f&&(d.parent=f);if(d.columns)return m=d.columns.length,e&&d.parent&&a.tools.setColspan(d.parent,m),d.index=a.columnModel.length+m-1,d.colspan=m,d.quicksort=!1,c[e][g++]=d,p(d.columns,c,e+1,d);d.rowspan=e;d.index=a.columnModel.length;d=a.tools.setOp(d);c[e][g++]=d;a.columnModel.push(d)});return c};a.tools.appendColumns();b.showCheckboxcol&&(e.unshift(a.checkboxColumn),"lock"===b.showCheckboxcol&&(a.checkboxColumn.initLock=!0));b.showLinenumber&&(e.unshift(a.linenumberColumn),"lock"===b.showLinenumber&&(a.linenumberColumn.initLock=!0));(b.showChildcol||void 0===b.showChildcol&&b.hasChild&&b.childOptions)&&e.unshift(a.childColumn);b.showEditbtnscol&&e.push(a.editBtnsColumn);c=p(e,c);a.columnModel[a.columnModel.length-(b.showEditbtnscol?2:1)].lock=!1;b.hiddenFields&&(a.hiddenFields=b.hiddenFields);a.$thead=d("\x3cthead\x3e\x3c/thead\x3e");d.each(c,function(e,k){var p=d('\x3ctr style\x3d"height:25px;"\x3e\x3c/tr\x3e'),t;d.each(k,function(e,k){g=k.label||k.name;f=k.align?' align\x3d"'+k.align+'"':"";m=k.width?' width\x3d"'+k.width+'"':"";h=k.colspan?' colspan\x3d"'+k.colspan+'"':"";n=1<c.length-k.rowspan?' rowspan\x3d"'+(c.length-k.rowspan)+'"':"";v='\x3cdiv class\x3d"'+a.classnames.th_resizemark+'"\x3e\x3c/div\x3e';r="";k.gridCheckbox&&(g='\x3cinput type\x3d"checkbox" data-toggle\x3d"icheck"\x3e');k.colspan&&(f=' align\x3d"center"');k.thalign&&(f=' align\x3d"'+k.thalign+'"');k.menu&&b.columnMenu&&(r=' class\x3d"'+a.classnames.th_menu+'"');t=d("\x3cth"+r+m+f+h+n+'\x3e\x3cdiv\x3e\x3cdiv class\x3d"datagrid-space"\x3e\x3c/div\x3e\x3cdiv class\x3d"datagrid-label"\x3e'+g+'\x3c/div\x3e\x3cdiv class\x3d"'+a.classnames.th_cell+'"\x3e'+v+"\x3c/div\x3e\x3c/div\x3e\x3c/th\x3e");t.data("index",k.index).appendTo(p);n||t.addClass("single-row");k.gridChild&&t.addClass(a.classnames.td_child);k.gridNumber&&t.addClass(a.classnames.td_linenumber);k.gridCheckbox&&t.addClass(a.classnames.td_checkbox);b.fieldSortable&&k.quicksort&&t.addClass("datagrid-quicksort-th");k.th=t});p.appendTo(a.$thead)});a.$thead.appendTo(a.$element).initui()};h.prototype.createTbody=function(){var a=this.options,b=a.data;b?("string"===typeof b&&(b=b.trim().startsWith("[")||b.trim().startsWith("{")?b.toObj():b.toFunc()),"function"===typeof b&&(b=b.call()),a.data=b,this.tools.createTrsByData(b)):a.dataUrl&&this.tools.loadData()};h.prototype.refresh=function(){var a=this.options,b=this.tools,e=BJUI.pageInfo,c=this.paging,g={};a.dataUrl?(a.postData&&a.postData[e.pageSize]||(g[e.pageSize]=c.pageSize,g[e.pageCurrent]=c.pageCurrent),b.loadData(g,!0),this.filterDatas=null,d.each(this.columnModel,function(a,b){b.th.trigger("bjui.datagrid.th.filter",[!1]);b.isFiltered=!1;b.$quickfilter&&b.$quickfilter.trigger("bjui.datagrid.thead.clearfilter")}),this.$thead.find("\x3e tr \x3e th.datagrid-quicksort-th").find("\x3e div \x3e .datagrid-label \x3e i").remove()):a.data&&a.data.length?b.initTbody(this.allData,!0):BJUI.debug("Datagrid Plugin: Not Set the dataUrl option!")};h.prototype.refreshParent=function(){var a=this.$element.data("bjui.datagrid.parent");a&&a.length&&a.closest("table").datagrid("refresh")};h.prototype.refreshChild=function(a){var b=this.$tbody.find("\x3e tr"),e,c=function(a){(e=a.data("bjui.datagrid.child"))&&e.length&&e.isTag("table")&&e.datagrid("refresh")};a instanceof jQuery?a.each(function(){c(d(this))}):isNaN(a)?d.each(a.split(","),function(a,d){2*d<b.length&&c(b.eq(2*d))}):2*a<b.length&&c(b.eq(2*a))};h.prototype.showChild=function(a,b,e){"undefined"===typeof b&&(b=!0);var c=this,g=c.options,f,m,k,n,h,r,p,l=c.$tbody.find("\x3e tr:not(."+c.classnames.tr_child+")"),t=function(){g.fullGrid||c.fixedWidth();c.fixedHeight()},z=function(a,b,d){c.$lockTableB&&(a=c.$lockTableB.find("\x3e tbody \x3e tr:eq("+a+")"),a.toggle(b),d?a.height(d):a.height()||a.height(f.height()))},u=function(a,b,f){m.find("\x3e div").html(BJUI.doRegional(FRAG.gridShrinkBtn,c.regional));b.fadeIn("normal",function(){f.data("bjui.datagrid.init")?(t(),z(n,!0),e&&e.apply(c,[f])):(r=d.extend(!0,{},c.childOptions),p=r.dataUrl,h=c.isDom?a.data("initData")||c.tools.setDomData(a):c.data[c.tools.getNoChildDataIndex(a.index())],p&&!p.isFinishedTm()&&(p=c.tools.replacePlh(p,h),p.isFinishedTm()?r.dataUrl=p:BJUI.debug("Datagrid Plugin: The datagrid options 'childOptions' in the 'dataUrl' options is incorrect: "+p)),f.datagrid(r).data("bjui.datagrid.parent",a).on("completed.bjui.datagrid",d.proxy(function(){t();z(n,!0,b.outerHeight());e&&e.apply(c,[f])},c)).on("bjui.datagrid.child.resize",function(){f.datagrid("fixedWidth").datagrid("fixedHeight")}),a.data("bjui.datagrid.child",f))})},q=function(a,b,d){b.fadeOut("normal",function(){m.find("\x3e div").html(BJUI.doRegional(FRAG.gridExpandBtn,c.regional));t();z(n,!1);e&&e.apply(c,[d])})},y=function(a){(f=a.next("."+c.classnames.tr_child))&&f.length&&(m=a.find("\x3e td."+c.classnames.td_child),n=f.index(),(k=f.find("\x3e td").find("table.table-child"))&&k.length&&(f.is(":visible")?b||q(a,f,k):b&&u(a,f,k)))};e&&("string"===typeof e&&(e=e.toFunc()),"function"!==typeof e&&(e=!1));a instanceof jQuery?a.each(function(){y(d(this))}):isNaN(a)?d.each(a.split(","),function(a,b){var c=l.eq(parseInt(b.trim(),10));c&&c.length&&y(c)}):isNaN(a)||(a=l.eq(a))&&a.length&&y(a)};h.prototype.updateRow=function(a,b){var e=this,c=e.options,g,f,m,k=function(b,g){d.extend(f,"object"===typeof g&&g);e.dialogEditComplete(b,f);if(f["refresh.datagrid.child"]){var m=b.data("bjui.datagrid.child");m&&m.length?m.datagrid("refresh"):e.showChild(a)}"auto"===c.height&&(e.$boxB.scrollTop(5),e.$boxB.scrollTop&&e.fixedHeight())};if(a instanceof jQuery)m=a;else{if(isNaN(a)){BJUI.debug("Datagrid Plugin: Func 'updateRow', Parameter 'row' is incorrect!");return}m=e.$tbody.find("\x3e tr:not(."+e.classnames.tr_child+")").eq(parseInt(a,10))}e.isDom?f=m.data("initData")||e.tools.setDomData(m):(g=e.tools.getNoChildDataIndex(m.index()),f=e.data[g]);b?("string"===typeof b&&(b=b.trim().startsWith("{")?b.toObj():b.toFunc()),"function"===typeof b&&(b=b.apply()),"object"===typeof b||c.updateRowUrl?k(m,b):BJUI.debug("Datagrid Plugin: Func 'updateRow', Parameter 'updateData' is incorrect!")):c.updateRowUrl?(g=e.tools.replacePlh(c.updateRowUrl,f),g.isFinishedTm()?BJUI.ajax("doajax",{url:g,type:c.loadType,okCallback:function(a){k(m,a)}}):BJUI.debug("Datagrid Plugin: The datagrid options 'updateRowUrl' is incorrect!")):BJUI.debug("Datagrid Plugin: The datagrid options 'updateRowUrl' is not set!")};h.prototype.doAjaxRow=function(a,b){var d=this,c,g,f;if(a instanceof jQuery)c=a;else{if(isNaN(a)){BJUI.debug("Datagrid Plugin: Func 'doAjaxRow', Parameter 'row' is incorrect!");return}c=d.$tbody.find("\x3e tr:not(."+d.classnames.tr_child+")").eq(parseInt(a,10))}"object"===typeof b&&b.url?("undefined"===typeof b.reload&&(b.reload=!1),b.callback||b.okCallback||(b.okCallback=function(a,b){d.updateRow(c,"object"===typeof a&&!a[BJUI.keys.statusCode]&&a)}),d.isDom?g=c.data("initData")||d.tools.setDomData(c):(g=d.tools.getNoChildDataIndex(c.index()),g=d.data[g]),f=b.url,f=!g||g.addFlag?f.replace(/{\/?[^}]*}/g,""):d.tools.replacePlh(f,g),f.isFinishedTm()||BJUI.debug("Datagrid Plugin: Func 'doAjaxRow', options 'url' is incorrect: "+f),b.url=f,BJUI.ajax("doajax",b)):BJUI.debug("Datagrid Plugin: Func 'doAjaxRow', options is incorrect or the property 'url' is not set!")};h.prototype.reload=function(a){var b=this.options;a&&"object"===typeof a&&(a.clearOldPostData&&delete b.postData,d.extend(!0,b,a));!b.dataUrl&&b.data&&(this.allData=b.data);this.refresh()};h.prototype.destroy=function(){var a=this.$grid.data("bjui.datagrid.table");a&&(this.$element.html(a.html()).insertBefore(this.$grid),this.$grid.remove())};h.prototype.initTop=function(){var a=this,b=a.options,e=!1,c;if(b.showToolbar&&(b.toolbarItem||b.toolbarCustom)){b.toolbarItem&&(e=b.toolbarItem.toFunc(),"function"===typeof e&&(b.toolbarItem=e.apply()),e=!0,0<=b.toolbarItem.indexOf("all")&&(b.toolbarItem="add, edit, cancel, save, |, del, |, refresh, |, import, export"),d.each(b.toolbarItem.split(","),function(e,f){f=f.trim().toLocaleLowerCase();if(!c||"|"===f)if(c=d('\x3cdiv class\x3d"btn-group" role\x3d"group"\x3e\x3c/div\x3e').appendTo(a.$toolbar),"|"===f)return!0;"add"===f?a.$toolbar_add=d('\x3cbutton type\x3d"button" class\x3d"btn" data-icon\x3d""\x3e\x3c/button\x3e').attr("data-icon","plus").addClass("btn-blue").text(BJUI.getRegional("datagrid.add")).appendTo(c).on("click",function(b){a.add()}):"edit"===f?a.$toolbar_edit=d('\x3cbutton type\x3d"button" class\x3d"btn" data-icon\x3d""\x3e\x3c/button\x3e').attr("data-icon","edit").addClass("btn-green").text(BJUI.getRegional("datagrid.edit")).appendTo(c).on("click",function(c){c=a.$tbody.find("\x3e tr."+a.classnames.tr_selected);if(!b.editMode)return!1;c.length?b.inlineEditMult?a.doEditRow(c):a.$lastSelect?a.doEditRow(a.$lastSelect):a.doEditRow(c.first()):d(this).alertmsg("info",BJUI.getRegional("datagrid.selectMsg"))}):"cancel"===f?a.$toolbar_calcel=d('\x3cbutton type\x3d"button" class\x3d"btn" data-icon\x3d""\x3e\x3c/button\x3e').attr("data-icon","undo").addClass("btn-orange").text(BJUI.getRegional("datagrid.cancel")).appendTo(c).on("click",function(b){a.doCancelEditRow(a.$tbody.find("\x3e tr."+a.classnames.tr_edit))}):"save"===f?a.$toolbar_save=d('\x3cbutton type\x3d"button" class\x3d"btn" data-icon\x3d""\x3e\x3c/button\x3e').attr("data-icon","save").addClass("btn-default").text(BJUI.getRegional("datagrid.save")).appendTo(c).on("click",function(b){a.doSaveEditRow()}):"del"===f?a.$toolbar_del=d('\x3cbutton type\x3d"button" class\x3d"btn" data-icon\x3d""\x3e\x3c/button\x3e').attr("data-icon","times").addClass("btn-red").text(BJUI.getRegional("datagrid.del")).appendTo(c).on("click",function(b){b=a.$tbody.find("\x3e tr."+a.classnames.tr_selected);b.length?a.delRows(b):d(this).alertmsg("info",BJUI.getRegional("datagrid.selectMsg"))}):"refresh"===f?a.$toolbar_refresh=d('\x3cbutton type\x3d"button" class\x3d"btn" data-icon\x3d""\x3e\x3c/button\x3e').attr("data-icon","refresh").addClass("btn-green").text(BJUI.getRegional("datagrid.refresh")).appendTo(c).on("click",function(b){a.refresh()}):"import"===f?a.$toolbar_add=d('\x3cbutton type\x3d"button" class\x3d"btn" data-icon\x3d""\x3e\x3c/button\x3e').attr("data-icon","sign-in").addClass("btn-blue").text(BJUI.getRegional("datagrid.import")).appendTo(c).on("click",function(c){b.importOption&&(c=b.importOption,"string"===typeof c&&(c=c.toObj()),c.options&&c.options.url&&("dialog"===c.type?a.$grid.dialog(c.options):"navtab"===c.type?a.$grid.navtab(c.options):a.$grid.bjuiajax("doajax",c.options)))}):"export"===f&&(a.$toolbar_add=d('\x3cbutton type\x3d"button" class\x3d"btn" data-icon\x3d""\x3e\x3c/button\x3e').attr("data-icon","sign-out").addClass("btn-green").text(BJUI.getRegional("datagrid.export")).appendTo(c).on("click",function(c){b.exportOption&&(c=b.exportOption,"string"===typeof c&&(c=c.toObj()),c.options&&c.options.url&&("dialog"===c.type?BJUI.dialog(c.options):"navtab"===c.type?BJUI.navtab(c.options):"file"===c.type?(c.options.target=a.$boxB,BJUI.ajax("ajaxdownload",c.options)):BJUI.ajax("doajax",c.options)))}))}));if(b.toolbarCustom){var g,f=d('\x3cdiv style\x3d"display:inline-block;"\x3e\x3c/div\x3e');if("string"===typeof b.toolbarCustom){var m=d(b.toolbarCustom);if(m&&m.length)g=m;else if(m=m.toFunc())g=m.call(a),"string"===typeof g&&(g=d(g))}else"function"===typeof b.toolbarCustom?(g=b.toolbarCustom.call(a),"string"===typeof g&&(g=d(g))):g=b.toolbarCustom;g&&g.length&&"string"!==typeof g&&(e&&f.css("margin-left","5px"),f.appendTo(a.$toolbar),g.appendTo(f))}a.$toolbar.initui()}};h.prototype.initThead=function(){var a=this,b=a.options,e=a.tools,c=a.columnModel,g,f=[],m,k=d('\x3cdiv class\x3d"bjui-datagrid"\x3e\x3c/div\x3e'),n,h;a.$tableH.append(a.$thead);a.init_thead=!0;a.$trsH=a.$thead.find("\x3e tr");a.table_width=0;a.$colgroupH=a.$tableH.find("\x3e colgroup");a.fixtedColumnWidthCount=0;d.each(a.columnModel,function(b,c){var e="";if(c===a.linenumberColumn||c===a.checkboxColumn||c===a.childColumn||c===a.editBtnsColumn)e=' class\x3d"datagrid_col_lockwidth"';g=c.width;g&&"auto"!==g||(m||(m=a.$element.clone().addClass("table table-bordered").appendTo(k),m.prepend(a.$thead.clone()),k.appendTo(d("body")),m.attr("style","width:auto !important;").initui()),a.fixtedColumnWidthCount++,c.fixedWidth=!0,n=m.find("\x3e tbody \x3e tr:first-child"),n.hasClass("datagrid-nodata")?(h=1<a.$trsH.length?a.$trsH.length-parseInt(c.th.attr("rowspan")||1,10):0,g=m.find("\x3e thead \x3e tr:eq("+h+") \x3e th:eq("+c.th.index()+")").outerWidth()+5):g=m.find("\x3e tbody \x3e tr:first-child \x3e td:eq("+b+")").outerWidth()+5);f.push('\x3ccol style\x3d"width:'+g+'px;"'+e+"\x3e");c.width=g;a.table_width+=g});k&&k.remove();a.$colgroupH.html(f.join(""));setTimeout(function(){a.$thead.find("\x3e tr:not(.datagrid-filter)").each(function(){d(this).find("\x3e th").each(function(){var a=d(this),b=a.outerHeight();a.find("\x3e div").height(b)})})},10);var r=a.$trsH.find("\x3e th");r.filter(".datagrid-quicksort-th").on("click.bjui.datagrid.quicksort",function(b){d(b.target).closest("."+a.classnames.th_cell).length||a.isResize||e.quickSort(c[d(this).data("index")])});r.filter(".datagrid-column-menu").on("bjui.datagrid.th.filter",function(b,c){var e=d(this),f=e.find("\x3e div \x3e ."+a.classnames.th_cell+"\x3e ."+a.classnames.btn_menu+"\x3e .btn");c?(e.addClass("filter-active"),f.find("\x3e i").attr("class","fa fa-filter")):(e.removeClass("filter-active"),f.find("\x3e i").attr("class","fa fa-bars"))});b.contextMenuH&&e.contextmenuH();a.initTbody();b.columnResize&&a.colResize();b.columnMenu&&a.colMenu();b.paging&&a.initPaging();b.editMode&&a.edit();a.$element.hasClass("table-child")||a.resizeGrid();var p=function(){b.showTfoot&&a.initTfoot();e.setBoxbH();if(a.renderTds&&a.renderTds.length)for(var c=a.$tbody.find("\x3e tr:not(."+a.classnames.tr_child+", .datagrid-nodata)"),d=a.renderTds&&a.renderTds.length,f=0;f<d;f++){var g=a.renderTds[f],m=g.render.call(a,g.label,g.trData,a.columnModel[g.tdindex].items);c.eq(g.trindex).find("\x3e td:eq("+g.tdindex+")").html("\x3cdiv\x3e"+m+"\x3c/div\x3e")}a.initEvents();a.$tableB.initui();a.$lockTableB&&a.$lockTableB.initui();setTimeout(function(){a.fixedWidth("init");a.initLock();a.$element.trigger("completed.bjui.datagrid",{datas:a.data});a.$boxM&&a.$boxM.trigger("bjui.ajaxStop").hide()},50);a.delayFilterTimeout&&clearInterval(a.delayFilterTimeout)};b.filterThead?a.delayRender?a.delayFilterTimeout=setInterval(function(){a.delayRender||(a.filterInThead(),p())},100):(a.filterInThead(),p()):p()};h.prototype.fixedWidth=function(a){var b=this,e=b.options,c;a&&b.initFixedW||(b.initFixedW=!0,function(){String(b.options.width).endsWith("%")&&b.$grid.css("width","");b.$boxH.find("\x3e div").css("width","");b.$boxB.find("\x3e div").css("width","");b.$boxF&&b.$boxF.find("\x3e div").css("width","");b.$boxP&&b.$boxP.find("\x3e div.paging-content").css("width","");c=b.$boxB.find("\x3e div").width();b.options.hasChild&&(b.$boxB.scrollTop(5),b.$boxB.scrollTop()&&(c-=18));c&&(b.$boxB.find("\x3e div").width(c),b.$boxH.find("\x3e div").width(c),b.$boxF&&b.$boxF.find("\x3e div").width(c),b.table_width>c||e.fullGrid?b.$boxP&&b.$boxP.find("\x3e div.paging-content").width(c):b.$boxP&&b.$boxP.find("\x3e div.paging-content").width(b.table_width));if(e.fullGrid){var a=b.$tbody.find("\x3e tr:first"),f,m,k=b.$colgroupB.find("\x3e col");k.filter(":not(.datagrid_col_lockwidth)").css("width","");d.each(b.columnModel,function(c,d){if(d===b.linenumberColumn||d===b.checkboxColumn||d===b.childColumn||d===b.editBtnsColumn)return!0;a.hasClass("datagrid-nodata")?(m=1<b.$trsH.length?b.$trsH.length-parseInt(d.th.attr("rowspan")||1,10):0,f=b.$trsH.eq(m).find("\x3e th:eq("+d.th.index()+")").width()):f=a.find("\x3e td:eq("+c+")").width();k.eq(c).css("width",f)});b.$colgroupH.html(b.$colgroupB.html())}}())};h.prototype.fixedHeight=function(a){"auto"===this.options.height?(this.boxH="auto",this.$grid.css("height",""),this.$boxB.css("height",""),this.tools.setBoxbH()):this.tools.setBoxbH(a);this.$boxB.scrollLeft(5);this.$boxB.scrollLeft()&&this.fixedWidth()};h.prototype.initTbody=function(){var a=this,b=a.options;a.$tbody.find("\x3e tr").find("\x3e td");var d="0";a.init_tbody=!0;a.$colgroupB=a.$colgroupH.clone();a.$tableB.prepend(a.$colgroupB);b.fullGrid&&(d="100%");a.$tableH.css("width",d);a.$tableB.css("width",d);a.$tableB.removeAttr("data-toggle width").addClass("table table-bordered").removeClass("table-hover");a.$boxB.scroll(function(){a.$boxH.find("\x3e div").prop("scrollLeft",this.scrollLeft);a.$boxF&&a.$boxF.find("\x3e div").prop("scrollLeft",this.scrollLeft);a.$lockB&&a.$lockB.prop("scrollTop",this.scrollTop)});a.isDom&&(b.showLinenumber&&a.showLinenumber(b.showLinenumber),b.showCheckboxcol&&a.showCheckboxcol(b.showCheckboxcol),b.showEditbtnscol&&a.showEditCol(b.showEditbtnscol),a.$grid.data(a.datanames.tbody,a.$tbody.clone()))};h.prototype.initEvents=function(a){var b=this,e=b.options,c=b.$tbody.find("\x3e tr");a||(a=c);a.on("click.bjui.datagrid.tr",function(a,c){var f=d(this),g=f.index(),h=b.$tbody.find("\x3e tr."+b.classnames.tr_selected),l=b.$lastSelect;b.$lockTbody&&b.$lockTbody.find("\x3e tr");if(c)h=c.is(":checked"),h||(b.$lastSelect=f),b.selectedRows(f,!h);else{if(f.hasClass(b.classnames.tr_edit))return;e.selectMult?b.selectedRows(f):BJUI.KeyPressed.ctrl||BJUI.KeyPressed.shift?(window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),BJUI.KeyPressed.ctrl?(f.hasClass(b.classnames.tr_selected)||(b.$lastSelect=f),b.selectedRows(f)):BJUI.KeyPressed.shift&&(l||(l=b.$lastSelect=f),l.length&&(b.selectedRows(null),l.index()!=g?l.index()>g?b.selectedRows(f.nextUntil(l).add(f).add(l),!0):b.selectedRows(f.prevUntil(l).add(f).add(l),!0):b.selectedRows(g)))):1<h.length&&f.hasClass(b.classnames.tr_selected)?(b.selectedRows(h.not(f)),b.$lastSelect=f):(h.length&&h[0]!=this&&b.selectedRows(null),f.hasClass(b.classnames.tr_selected)||(b.$lastSelect=f),b.selectedRows(f))}f=b.isDom?b.tools.setDomData(f):b.data[b.tools.getNoChildDataIndex(g)];b.$element.trigger("clicked.bjui.datagrid.tr",{data:f})}).on("mouseenter.bjui.datagrid",function(a){a=d(this);var c=a.index();a.addClass("datagrid-hover");b.$lockTbody&&b.$lockTbody.find("\x3e tr:eq("+c+")").addClass("datagrid-hover")}).on("mouseleave.bjui.datagrid",function(a){a=d(this);var c=a.index();a.removeClass("datagrid-hover");b.$lockTbody&&b.$lockTbody.find("\x3e tr:eq("+c+")").removeClass("datagrid-hover")}).on("bjui.datagrid.tr.delete",function(a){a.stopPropagation();a=d(this);var c=a.index(),e=c,g=b.data,h,l=b.allData,r=b.$lockTbody&&b.$lockTbody.find("\x3e tr");if(a.hasClass("datagrid-nodata"))return!1;b.options.hasChild&&b.options.childOptions&&(e/=2,a.next().remove(),r&&r.eq(c).next().remove());b.isDom||(h=g[e].gridIndex,b.data=g.remove(e),b.allData=l.remove(h));-1!=d.inArray(b.linenumberColumn,b.columnModel)&&(a.nextAll(":not(."+b.classnames.tr_child+")").each(function(){var a=d(this).find("\x3e td."+b.classnames.td_linenumber),c=parseInt(a.text(),10);a.text(c-1)}),r&&r.eq(c).trigger("bjui.datagrid.tr.delete",[c]));a.remove();r&&r.eq(c).remove();b.tools.createNoDataTr()});b.$grid.off("click.bjui.datagrid.tr.child").on("click.bjui.datagrid.tr.child","td."+b.classnames.td_child,function(a){a.stopPropagation();a=d(this).closest("tr");var c=a.next("."+b.classnames.tr_child);c&&c.length&&b.showChild(a,!c.is(":visible"))}).off("ifClicked").on("ifClicked","td."+b.classnames.td_checkbox+" input",function(a){a.stopPropagation();a=d(this);var c=a.closest("tr").index();b.$tbody.find("\x3e tr:eq("+c+")").trigger("click.bjui.datagrid.tr",[a])}).off("ifChanged").on("ifChanged","th."+b.classnames.td_checkbox+" input",function(a){a.stopPropagation();a=d(this).is(":checked");var c=b.$tbody.find('\x3e tr:not(".'+b.classnames.tr_child+'")');b.selectedRows(c,a)});e.contextMenuB&&a.each(function(){b.tools.contextmenuB(d(this))});b.$tableB.off("click.bjui.datagrid.refresh").on("click.bjui.datagrid.refresh",'tbody \x3e tr \x3e td [data-toggle\x3d"update.datagrid.tr"]',function(a){a.stopPropagation();b.updateRow(d(this).closest("tr"))}).off("click.bjui.datagrid.edit").on("click.bjui.datagrid.edit",'tbody \x3e tr \x3e td [data-toggle\x3d"edit.datagrid.tr"]',function(a){a.stopPropagation();var c=d(this);a=c.data("options");c=c.closest("tr");a&&"string"===typeof a&&(a=a.toObj());"object"===typeof a?b.externalEdit(c,a):b.doEditRow(c)}).off("click.bjui.datagrid.ajax").on("click.bjui.datagrid.ajax",'tbody \x3e tr \x3e td [data-toggle\x3d"ajax.datagrid.tr"]',function(a){a.stopPropagation();a=d(this);var c=a.data();c.options&&"string"===typeof c.options&&(c.options=c.options.toObj());d.extend(c,"object"===typeof c.options&&c.options);b.doAjaxRow(a.closest("tr"),c)}).off("click.bjui.datagrid.addchild").on("click.bjui.datagrid.addchild",'tbody \x3e tr \x3e td [data-toggle\x3d"addchild.datagrid.tr"]',function(a){a.stopPropagation();var c=d(this);a=c.closest("tr");var e=a.data("bjui.datagrid.child"),g=a.next("."+b.classnames.tr_child),h,l=c.data("addData"),r,p=function(a){return a.replace(/#\/?[^#]*#/g,function(a){a=a.replace(/[##]+/g,"");a=h[a];if("undefined"===typeof a||"null"===a||null===a)a="";return a})},c=function(a){l&&("string"===typeof l?(l=p(l),l=l.trim().startsWith("{")?l.toObj():l.toFunc()):("function"===typeof l&&(l=l.toFunc()),"object"===typeof l&&(l=JSON.stringify(l)),l=p(l).toObj()),"object"===typeof l&&(r=l));a.datagrid("add",!1,r)};g&&g.length&&(h=b.isDom?a.data("initData")||tools.setDomData(a):b.data[b.tools.getNoChildDataIndex(a.index())],e&&e.length?c(e):b.showChild(a,!0,c))}).off("click.bjui.datagrid.del").on("click.bjui.datagrid.del",'tbody \x3e tr \x3e td [data-toggle\x3d"del.datagrid.tr"]',function(a){a.stopPropagation();b.delRows(d(this).closest("tr"))})};h.prototype.initTfoot=function(){var a=this.options,b=this.tools,e=this.columnModel,c=d("\x3ctr\x3e\x3c/tr\x3e");this.$boxF=d('\x3cdiv class\x3d"datagrid-box-f"\x3e\x3c/div\x3e');this.$colgroupF=this.$colgroupH.clone();this.$tableF=this.$tableH.clone().empty();this.$tableF.append(this.$colgroupF);this.$boxF.append(d('\x3cdiv class\x3d"datagrid-wrap-h"\x3e\x3c/div\x3e').append(this.$tableF));this.$boxF.insertAfter(this.$boxB);this.$tfoot=d("\x3cthead\x3e\x3c/thead\x3e");d.each(e,function(a,b){var e=d("\x3cth\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/th\x3e");b.calc&&("avg"===b.calc?e.html('\x3cdiv\x3e\x3cdiv class\x3d"datagrid-calcbox"\x3e#tit#\x3c/div\x3e#number#\x3c/div\x3e'.replace("#tit#",b.calcTit||"AVG").replace("#number#",(b.calc_sum/b.calc_count).toFixed(b.calcDecimal||2))):"count"===b.calc?e.html('\x3cdiv\x3e\x3cdiv class\x3d"datagrid-calcbox"\x3e#tit#\x3c/div\x3e#number#\x3c/div\x3e'.replace("#tit#",b.calcTit||"COUNT").replace("#number#",b.calc_count)):"sum"===b.calc?e.html('\x3cdiv\x3e\x3cdiv class\x3d"datagrid-calcbox"\x3e#tit#\x3c/div\x3e#number#\x3c/div\x3e'.replace("#tit#",b.calcTit||"SUM").replace("#number#",b.calc_sum)):"max"===b.calc?e.html('\x3cdiv\x3e\x3cdiv class\x3d"datagrid-calcbox"\x3e#tit#\x3c/div\x3e#number#\x3c/div\x3e'.replace("#tit#",b.calcTit||"MAX").replace("#number#",b.calc_max)):"min"===b.calc&&e.html('\x3cdiv\x3e\x3cdiv class\x3d"datagrid-calcbox"\x3e#tit#\x3c/div\x3e#number#\x3c/div\x3e'.replace("#tit#",b.calcTit||"MIN").replace("#number#",b.calc_min)));b.hidden&&e.css("display","none");e.appendTo(c)});this.$tfoot.append(c).appendTo(this.$tableF);this.$tfoot.on("bjui.datagrid.tfoot.resizeH",function(){b.setBoxbH(a.height)})};h.prototype.selectedRows=function(a,b){var e=this,c=e.$lockTbody&&e.$lockTbody.find("\x3e tr"),g=e.$tbody.find("\x3e tr"),f=function(a){"undefined"===typeof b&&(b=!0);g.eq(a).hasClass(e.classnames.tr_child)||(g.eq(a).toggleClass(e.classnames.tr_selected,b).find("\x3e td."+e.classnames.td_checkbox+" input").iCheck(b?"check":"uncheck"),c&&c.eq(a).toggleClass(e.classnames.tr_selected,b).find("\x3e td."+e.classnames.td_checkbox+" input").iCheck(b?"check":"uncheck"))};null===a?(g.removeClass(e.classnames.tr_selected).find("\x3e td."+e.classnames.td_checkbox+" input").iCheck("uncheck"),c&&c.removeClass(e.classnames.tr_selected).find("\x3e td."+e.classnames.td_checkbox+" input").iCheck("uncheck")):"object"===typeof a?a.each(function(){var a=d(this),g=a.index();if(a.hasClass(e.classnames.tr_child))return!0;"undefined"!==typeof b?f(g):(a.toggleClass(e.classnames.tr_selected).trigger("bjui.datagrid.tr.selected").find("\x3e td."+e.classnames.td_checkbox+" input").iCheck(a.hasClass(e.classnames.tr_selected)?"check":"uncheck"),c&&c.eq(g).toggleClass(e.classnames.tr_selected).trigger("bjui.datagrid.tr.selected").find("\x3e td."+e.classnames.td_checkbox+" input").iCheck(a.hasClass(e.classnames.tr_selected)?"check":"uncheck"))}):isNaN(a)?d.each(a.split(","),function(a,b){f(parseInt(b.trim(),10))}):isNaN(a)||f(parseInt(a,10));e.$lastSelect&&!e.$lastSelect.hasClass(e.classnames.tr_selected)&&(e.$lastSelect=null);var m=e.$tbody.find("\x3e tr."+e.classnames.tr_selected),h=[];m.each(function(){var a=d(this),b=a.index(),b=e.tools.getNoChildDataIndex(b),a=e.isDom?a.data("initData")||e.tools.setDomData(a):e.data[b];h.push(a)});e.$element.data("selectedTrs",m).data("selectedDatas",h)};h.prototype.initLock=function(){var a=this;a.col_lock_count=0;d.each(a.columnModel,function(b,d){d.initLock&&a.col_lock_count++});a.col_lock_count&&a.doLock()};h.prototype.colLock=function(a,b){var e;if("number"===d.type(a)){if(e=parseInt(a,10),0>e||e>this.columnModel.length-1)return}else e=a.data("index");e=this.columnModel[e];e!==this.editBtnsColumn&&e.index!==this.columnModel.length-1&&("undefined"===typeof e.locked&&(e.locked=!1),e.locked!==b&&((e.initLock=b)?this.col_lock_count++:this.col_lock_count--,0>this.col_lock_count&&(this.col_lock_count=0),this.doLock()))};h.prototype.fixedLockItem=function(a){var b=this,e=b.columnModel,c=b.$thead.find("\x3e tr.datagrid-filter \x3e th"),g=b.$lockTbody&&b.$lockTbody.find("\x3e tr");if(a)f=function(a,b){a.clone().html("").insertAfter(a);a.show().insertAfter(b);b.remove()},c&&c.length&&b.$lockThead.find("\x3e tr.datagrid-filter \x3e th:visible").each(function(){var a=d(this),b=a.index(),b=c.eq(b);f(b,a)}),b.$lockThead&&-1!=d.inArray(b.checkboxColumn,e)&&b.checkboxColumn.locked&&(a=b.$lockThead.find("\x3e tr:first \x3e th."+b.classnames.td_checkbox),m=b.checkboxColumn.index,m=b.$thead.find("\x3e tr:first \x3e th:eq("+m+")"),f(m,a)),g&&g.length&&g.each(function(){var a=d(this),c=a.index(),f,g,m=function(a,c,d){f=b.$tbody.find("\x3e tr:eq("+c+")");g=f.find("\x3e td:eq("+d+")");g.clone().insertAfter(g);g.show().insertAfter(a);a.remove()};a.hasClass(b.classnames.tr_edit)&&a.find("\x3e td."+b.classnames.td_edit+":visible").each(function(){var a=d(this),b=a.index();e[b].locked&&m(a,c,b)});-1!=d.inArray(b.checkboxColumn,e)&&b.checkboxColumn.locked&&a.find("\x3e td."+b.classnames.td_checkbox).each(function(){var a=d(this);m(a,c,b.checkboxColumn.index)})});else{var f=function(a,b){b.clone().insertAfter(b);b.hide().insertAfter(a);a.remove()};c&&c.length&&b.$lockThead&&b.$lockThead.find("\x3e tr.datagrid-filter \x3e th:visible").each(function(){var a=d(this),b=a.index(),b=c.eq(b);f(b,a)});if(b.$lockThead&&-1!=d.inArray(b.checkboxColumn,e)&&b.checkboxColumn.locked){a=b.$lockThead.find("\x3e tr:first \x3e th."+b.classnames.td_checkbox);var m=b.checkboxColumn.index,m=b.$thead.find("\x3e tr:first \x3e th:eq("+m+")");f(m,a)}g&&g.length&&g.each(function(){var a=d(this),c=a.index(),f,g,m=function(a,c,d){f=b.$tbody.find("\x3e tr:eq("+c+")");g=f.find("\x3e td:eq("+d+")");a.clone().insertAfter(a);a.hide().insertAfter(g);g.remove()};if(a.hasClass(b.classnames.tr_edit)){var h=a.find("\x3e td:eq("+e.lockIndex+")"),t=h.index();h.hasClass(b.classnames.td_edit)&&m(h,c,t)}-1!=d.inArray(b.checkboxColumn,e)&&b.checkboxColumn.locked&&a.find("\x3e td."+b.classnames.td_checkbox).each(function(){var a=d(this);m(a,c,b.checkboxColumn.index)})})}};h.prototype.doLock=function(){var a=this,b=a.tools,e=a.columnModel;a.$tableH.width();var c=0,g,f,m=0,h=a.$boxF&&!0,n=0;a.$lockBox&&a.$lockBox.length?(a.fixedLockItem(),a.$lockTableH.empty(),a.$lockTableB.empty(),a.$lockTableF&&a.$lockTableF.empty()):(a.$lockBox=d('\x3cdiv class\x3d"datagrid-box-l"\x3e\x3c/div\x3e'),a.$lockH=d('\x3cdiv class\x3d"datagrid-box-h"\x3e\x3c/div\x3e'),a.$lockB=d('\x3cdiv class\x3d"datagrid-box-b"\x3e\x3c/div\x3e'),a.$lockF=d('\x3cdiv class\x3d"datagrid-box-f"\x3e\x3c/div\x3e'),a.$lockTableH=d('\x3ctable class\x3d"table table-bordered"\x3e\x3c/table\x3e'),a.$lockTableB=d("\x3ctable\x3e\x3c/table\x3e").addClass(a.$tableB.attr("class")),a.$lockTableF=d('\x3ctable class\x3d"table table-bordered"\x3e\x3c/table\x3e'),a.$lockH.append(a.$lockTableH),a.$lockB.append(a.$lockTableB),a.$lockF.append(a.$lockTableF),a.$lockBox.append(a.$lockH).append(a.$lockB).prependTo(a.$grid),h&&(a.$lockBox.append(a.$lockF),a.$lockF.css("margin-top",a.$boxB.outerHeight()-a.$boxB[0].clientHeight).height(a.$boxF.outerHeight())));a.$boxT&&(n+=a.$boxT.outerHeight());a.$toolbar&&(n+=a.$toolbar.outerHeight());n&&a.$lockBox.css({top:n});d.each(e,function(a,d){d.lockShow=!1;d.lockHide=!1;d.initLock?(d.hidden&&b.showhide(d,!0),d.lockHide=!0,d.locked=!0,d.lockIndex=m++,c+=d.width):(d.lockShow=!0,d.hidden?d.lockShow=!1:b.showhide(d,!1),d.locked&&(d.lockShow=!0),d.locked=!1)});a.$lockThead=a.$thead.clone(!0);a.$lockTbody=a.$tbody.clone();a.$lockColgroupH=a.$colgroupH.clone();a.$lockColgroupB=a.$colgroupB.clone();a.$lockTableH.append(a.$lockColgroupH).append(a.$lockThead).css("width",c);a.$lockTableB.append(a.$lockColgroupB).append(a.$lockTbody).css("width",c);h&&(a.$lockTfoot=a.$tableF.find("\x3e thead").clone(),a.$lockColgroupF=a.$colgroupF.clone(),a.$lockTableF.append(a.$lockColgroupF).append(a.$lockTfoot).css("width",c));d.each(a.columnModel,function(a,c){c.lockShow&&b.showhide(c,!0);c.lockHide&&b.showhide(c,!1)});a.$boxH.find("\x3e div").css("width","");a.$boxB.find("\x3e div").css("width","");a.$boxF&&a.$boxF.find("\x3e div").css("width","");setTimeout(function(){var b=a.$boxB.find("\x3e div").width();a.$boxB.find("\x3e div").width(b);a.$boxH.find("\x3e div").width(b);a.$boxF&&a.$boxF.find("\x3e div").width(b)},50);a.col_lock_count?a.$lockBox.show():a.$lockBox.hide();a.$tbody.find("\x3e ."+a.classnames.tr_child+", .datagrid-nodata").each(function(){d(this).find("\x3e td").attr("colspan",a.columnModel.length-a.col_lock_count)});1<c&&--c;a.$boxH.css("margin-left",c);a.$boxB.css("margin-left",c);h&&a.$boxF.css("margin-left",c);a.$lockB.height(a.$boxB[0].clientHeight);a.$lockB.prop("scrollTop",a.$boxB[0].scrollTop);var e=a.$lockTableH.height(),h=a.$thead.height(),n=a.$lockTableF&&a.$lockTableF.height(),l=a.$tableF&&a.$tableF.height();e!=h&&(e<h?a.$lockTableH.height(h):a.$tableH.height(e));n&&l&&n!=l&&(n<l?a.$lockTableF.find("\x3e thead \x3e tr:first-child \x3e th:visible:first").height(l):a.$tableF.find("\x3e thead \x3e tr:first-child \x3e th:visible:first").height(n));f=a.$lockTbody.find("\x3e tr");g=a.$tbody.find("\x3e tr");setTimeout(function(){var b=a.$lockTableB.height(),c=a.$tableB.height();b!=c&&(b>c?f.each(function(a){var b=d(this),c=b.find("\x3e td:visible:first").outerHeight();30<c&&(b.height(c),g.eq(a).height(c))}):g.each(function(a){var b=d(this),c=b.find("\x3e td:visible:first").outerHeight();30<c&&(b.height(c),f.eq(a).height(c))}))},20);a.fixedLockItem(1);f.find("\x3e td:hidden").remove();a.initLockEvents(f)};h.prototype.initLockEvents=function(a){if(this.$lockTbody){var b=this,e=b.options;a||(a=b.$lockTbody.find("\x3e tr"));a.on("click.bjui.datagrid.tr",function(a){var c=d(this).index();d(a.target).closest("td");b.$tbody.find("\x3e tr:eq("+c+")").trigger("click.bjui.datagrid.tr")}).on("bjui.datagrid.tr.delete",function(a,e){var c=d(this);b.linenumberColumn&&b.linenumberColumn.locked&&c.nextAll(":not(."+b.classnames.tr_child+")").each(function(){var a=d(this).find("\x3e td."+b.classnames.td_linenumber),c=parseInt(a.text(),10);a.text(c-1)})}).on("mouseenter.bjui.datagrid",function(a){a=d(this);var c=a.index();a.addClass("datagrid-hover");b.$tbody.find("\x3e tr:eq("+c+")").addClass("datagrid-hover")}).on("mouseleave.bjui.datagrid",function(a){a=d(this);var c=a.index();a.removeClass("datagrid-hover");b.$tbody.find("\x3e tr:eq("+c+")").removeClass("datagrid-hover")});e.contextMenuB&&a.each(function(){b.tools.contextmenuB(d(this),!0)})}};h.prototype.filterInThead=function(){var a=this,b=a.tools,e=a.regional,c=a.columnModel,g=d('\x3ctr class\x3d"datagrid-filter"\x3e\x3c/tr\x3e'),f=function(a,b,c){var d=b.type;if("date"===d)a.on("afterchange.bjui.datepicker",function(c,d){m(b,a.val())}).change(function(){m(b,a.val())});else{if("findgrid"===d)c.on("afterchange.bjui.findgrid",'[data-toggle\x3d"findgrid"]',function(a,c){m(b,c.value)});else if("lookup"===d)c.on("customEvent.bjui.lookup",'[data-toggle\x3d"lookupbtn"]',function(c,d){for(var e in d)b.name==e&&(a.val(d[e]),m(b,d[e]))});a.change(function(){m(b,a.val())})}},m=function(a,c){b.quickFilter(a,c?{operatorA:"like",valA:c}:null)};a.inputs&&a.inputs.length||b.initEditInputs();d.each(c,function(b,c){var m=d(a.inputs[b]),h=d("\x3cth\x3e\x3c/th\x3e"),k="";if(!c.quickfilter)return h.appendTo(g),!0;"findgrid"===c.type?m.data("context",g):"spinner"===c.type?m=d('\x3cinput type\x3d"text" name\x3d"'+c.name+'"\x3e'):"boolean"===c.type?m=d(BJUI.doRegional('\x3cselect name\x3d"'+c.name+'" data-toggle\x3d"selectpicker"\x3e\x3coption value\x3d""\x3e#all#\x3c/option\x3e\x3coption value\x3d"true"\x3e#true#\x3c/option\x3e\x3coption value\x3d"false"\x3e#false#\x3c/option\x3e\x3c/select\x3e',e)):"select"===c.type&&(c.attrs&&"object"===typeof c.attrs&&d.each(c.attrs,function(a,b){k+=" "+a+"\x3d"+b}),!m.find("\x3e option:first-child").val()||c.attrs&&c.attrs.multiple||(m=d('\x3cselect name\x3d"'+c.name+'" data-toggle\x3d"selectpicker"'+k+"\x3e\x3c/select\x3e").append(BJUI.doRegional('\x3coption value\x3d""\x3e#all#\x3c/option\x3e',e)).append(m.html()),m.val("")));h.append(m);c.hidden&&h.hide();"boolean"===c.type&&h.attr("align","center");h.appendTo(g);m.data("clearFilter",!1);f(m,c,h);m.on("bjui.datagrid.thead.clearfilter",function(){m.val("");"boolean"!==c.type&&"select"!==c.type||m.selectpicker("refresh")});c.$quickfilter=m});g.appendTo(a.$thead).initui()};h.prototype.showLinenumber=function(a){var b=this,e=b.options,c=b.columnModel,g,f=-1,m=d.inArray(b.linenumberColumn,c);-1!=m&&(g=c[m]);if(g)"string"!==typeof a||"lock"!==a&&"unlock"!==a?b.showhideColumn(g.th,a?!0:!1):b.colLock(g.th,"lock"===a?!0:!1);else if(a){f=d.inArray(b.childColumn,c);f++;g=b.linenumberColumn;g.index=f;c.splice(f,0,g);b.inputs&&b.inputs.length&&(b.inputs=b.inputs.splice(f,0,""));var m=b.$thead.find("\x3e tr"),h,n=m.filter(".datagrid-filter");h=m.length-n.length;h=d('\x3cth align\x3d"center"'+(1<h?' rowspan\x3d"'+h+' "':"")+'class\x3d"'+b.classnames.td_linenumber+(1==h?" single-row":"")+'"\x3e\x3cdiv\x3e\x3cdiv class\x3d"datagrid-space"\x3e\x3c/div\x3e\x3cdiv class\x3d"datagrid-label"\x3e'+b.linenumberColumn.label+"\x3c/div\x3e\x3c/div\x3e\x3c/th\x3e");b.$colgroupH.find("\x3e col:eq("+f+")").before('\x3ccol style\x3d"width:30px;"\x3e');b.$colgroupB.find("\x3e col:eq("+f+")").before('\x3ccol style\x3d"width:30px;"\x3e');b.$colgroupF&&b.$colgroupF.find("\x3e col:eq("+f+")").before('\x3ccol style\x3d"width:30px;"\x3e');n.length&&n.find("\x3e th:eq("+f+")").before("\x3cth\x3e\x3c/th\x3e");m.first().find("\x3e th:eq("+f+")").before(h);b.$tableF&&b.$tableF.find("\x3e thead \x3e tr \x3e th:eq("+f+")").before("\x3cth\x3e\x3c/th\x3e");g.th=h;g.width=30;b.$tbody.find("\x3e tr").each(function(a){var c=d(this),g=b.columnModel.length,m=b.paging;c.hasClass(b.classnames.tr_child)||c.hasClass("datagrid-nodata")?c.find("\x3e td").attr("colspan",g):(a=b.tools.getNoChildDataIndex(a),e.linenumberAll&&(a=(m.pageCurrent-1)*m.pageSize+a),c.find("\x3e td:eq("+f+")").before('\x3ctd align\x3d"center" class\x3d"'+b.classnames.td_linenumber+'"\x3e'+(a+1)+"\x3c/td\x3e"))});b.$tableF&&b.$tableF.find("\x3e thead \x3e tr \x3e th:eq("+f+")").before("\x3cth\x3e\x3c/th\x3e");d.each(c,function(a,b){b.index=a;b.th&&b.th.data("index",a)});h.find("\x3e div").height(h.outerHeight());"lock"===a&&b.colLock(h,!0);b.$showhide&&(b.$showhide.remove(),b.colShowhide(e.columnShowhide))}};h.prototype.showCheckboxcol=function(a){var b=this,e=b.options,c=b.columnModel,g,f=-1,m=d.inArray(b.checkboxColumn,c);-1!=m&&(g=b.columnModel[m]);if(g)"string"!==typeof a||"lock"!==a&&"unlock"!==a?b.showhideColumn(g.th,a):b.colLock(g.th,"lock"===a?!0:!1);else if(a){f=d.inArray(b.linenumberColumn,c);-1==f&&(f=d.inArray(b.childColumn,c));f++;g=b.checkboxColumn;g.index=f;c.splice(f,0,g);b.inputs&&b.inputs.length&&(b.inputs=b.inputs.splice(f,0,""));var m=b.$thead.find("\x3e tr"),h,n,l=m.filter(".datagrid-filter");h=m.length-l.length;h=d('\x3cth align\x3d"center"'+(1<h?' rowspan\x3d"'+h+' "':"")+'class\x3d"'+b.classnames.td_checkbox+(1==h?" single-row":"")+'"\x3e\x3cdiv\x3e\x3cdiv class\x3d"datagrid-space"\x3e\x3c/div\x3e\x3cdiv class\x3d"datagrid-label"\x3e\x3cinput type\x3d"checkbox" data-toggle\x3d"icheck"\x3e\x3c/div\x3e\x3c/th\x3e');b.$colgroupH.find("\x3e col:eq("+f+")").before('\x3ccol style\x3d"width:30px;"\x3e');b.$colgroupB.find("\x3e col:eq("+f+")").before('\x3ccol style\x3d"width:30px;"\x3e');b.$colgroupF&&b.$colgroupF.find("\x3e col:eq("+f+")").before('\x3ccol style\x3d"width:30px;"\x3e');l.length&&l.find("\x3e th:eq("+f+")").before("\x3cth\x3e\x3c/th\x3e");m.first().find("\x3e th:eq("+f+")").before(h);b.$tableF&&b.$tableF.find("\x3e thead \x3e tr \x3e th:eq("+f+")").before("\x3cth\x3e\x3c/th\x3e");h.initui();g.th=h;g.width=30;b.$tbody.find("\x3e tr").each(function(a){a=d(this);var c=b.columnModel.length;a.hasClass(b.classnames.tr_child)||a.hasClass("datagrid-nodata")?a.find("\x3e td").attr("colspan",c):(n=d('\x3ctd align\x3d"center" class\x3d"'+b.classnames.td_checkbox+'"\x3e\x3cinput type\x3d"checkbox" data-toggle\x3d"icheck" name\x3d"datagrid.checkbox"\x3e\x3c/td\x3e'),a.find("\x3e td:eq("+f+")").before(n),n.initui())});d.each(c,function(a,b){b.index=a;b.th&&b.th.data("index",a)});h.find("\x3e div").height(h.outerHeight());"lock"===a&&b.colLock(h,!0);b.$showhide&&(b.$showhide.remove(),b.colShowhide(e.columnShowhide))}};h.prototype.showEditCol=function(a){var b=this,e=b.options,c=b.columnModel,g=c[c.length-1];if(g===b.editBtnsColumn)b.showhideColumn(g.th,a?!0:!1);else if(a){a=b.$thead.find("\x3e tr");var f,m,h=a.filter(".datagrid-filter");f=a.length-h.length;g=b.editBtnsColumn;c.push(g);b.$colgroupH.append('\x3ccol style\x3d"width:110px;"\x3e');b.$colgroupB.append('\x3ccol style\x3d"width:110px;"\x3e');b.$colgroupF&&b.$colgroupF.append('\x3ccol style\x3d"width:110px;"\x3e');f=d('\x3cth align\x3d"center" rowspan\x3d"'+f+'"\x3e'+b.editBtnsColumn.label+"\x3c/th\x3e");a.first().append(f);h.length&&h.append("\x3cth\x3e\x3c/th\x3e");f.initui().data("index",c.length-1);g.th=f;g.width=110;g.index=c.length-1;b.$tbody.find("\x3e tr").each(function(a){a=d(this);var c=b.columnModel.length;a.hasClass(b.classnames.tr_child)||a.hasClass("datagrid-nodata")?a.find("\x3e td").attr("colspan",c):(m=d('\x3ctd align\x3d"center" class\x3d"'+b.classnames.s_edit+'"\x3e'+BJUI.doRegional(FRAG.gridEditBtn,b.regional)+"\x3c/td\x3e"),a.append(m),m.initui())});b.edit(b.$tbody.find("\x3e tr"));b.$tableF&&b.$tableF.find("\x3e thead \x3e tr").append("\x3cth\x3e\x3c/th\x3e");b.$showhide&&(b.$showhide.remove(),b.colShowhide(e.columnShowhide))}};h.prototype.colResize=function(){var a=this,b=a.tools,e=a.columnModel,c=a.$thead,g=a.$grid.find("\x3e .resizeProxy");g.length||(g=d('\x3cdiv class\x3d"resizeProxy" style\x3d"left:0; display:none;"\x3e\x3c/div\x3e'),g.appendTo(a.$grid));c.find("\x3e tr \x3e th").each(function(c){var f=d(this);f.find("\x3e div \x3e ."+a.classnames.th_cell+"\x3e ."+a.classnames.th_resizemark).on("mousedown.bjui.datagrid.resize",function(c){var m=a.$boxH.scrollLeft(),h=parseInt(a.$boxH.css("marginLeft")||0,10),k,p=f.data("index"),l=e[p],t=l.th.width(),z=a.$tbody.find("\x3e tr"),u=a.$lockTbody&&a.$lockTbody.find("\x3e tr"),q=a.$lockTableB&&a.$lockTableB.height(),y=a.$tableB.height(),w,B;isNaN(h)&&(h=0);k=b.getRight(f)-m+h;a.isResize=!0;l.locked&&(k=b.getRight4Lock(l.lockIndex),l.lockWidth&&(t=l.lockWidth));g.show().css({left:k,bottom:a.$boxP?a.$boxP.outerHeight():0,cursor:"col-resize"}).basedrag({scop:!0,cellMinW:20,relObj:g,move:"horizontal",event:c,stop:function(){var b=g.position().left-k,c=b+t;a.$tableH.width();var e=a.$lockTableH&&a.$lockTableH.width()+b;5>c&&(c=20);l.minWidth&&c<l.minWidth&&(c=l.minWidth);c!=t+b&&(e=e-b+(c-t));l.width=c;l.locked?e<.75*a.$grid.width()&&(l.lockWidth=c,a.$lockColgroupH.find("\x3e col:eq("+p+")").width(c),a.$lockColgroupB.find("\x3e col:eq("+p+")").width(c),a.$lockColgroupF&&a.$lockColgroupF.find("\x3e col:eq("+p+")").width(c),a.$lockTableH.width(e),a.$lockTableB.width(e),a.$lockTableF&&a.$lockTableF.width(e),b=a.$lockBox.width(),a.$boxH.css("margin-left",b-1),a.$boxB.css("margin-left",b-1),a.$boxH.find("\x3e div").width(a.$boxH.width()),a.$boxB.find("\x3e div").width(a.$boxH.width()),a.$boxF&&a.$boxF.css("margin-left",b-1),a.$colgroupH.find("\x3e col:eq("+p+")").width(c),a.$colgroupB.find("\x3e col:eq("+p+")").width(c),a.$colgroupF&&a.$colgroupF.find("\x3e col:eq("+p+")").width(c)):setTimeout(function(){a.$colgroupH.find("\x3e col:eq("+p+")").width(c);a.$colgroupB.find("\x3e col:eq("+p+")").width(c);a.$colgroupF&&a.$colgroupF.find("\x3e col:eq("+p+")").width(c)},1);setTimeout(function(){z.css("height","");B=a.$tableB.height();if(a.$lockTbody){u.css("height","");w=a.$lockTableB.height();if(w!=q||B!=y)w>B?u.each(function(a){var b=d(this),c=b.find("\x3e td:eq("+l.lockIndex+")").outerHeight();30<c&&(b.height(c),z.eq(a).height(c))}):z.each(function(a){var b=d(this),c=b.find("\x3e td:eq("+p+")").outerHeight();30<c&&(b.height(c),u.eq(a).height(c))});a.$lockB.height(a.$boxB[0].clientHeight)}l.calc&&a.$tfoot&&a.$tfoot.trigger("bjui.datagrid.tfoot.resizeH");a.isResize=!1},10);g.hide();a.resizeFlag=!0}})})})};h.prototype.colMenu=function(){var a=this,b=a.options,e=a.tools,c=a.regional,g=a.$trsH.find("\x3e th."+a.classnames.th_menu),f=a.$grid.find("\x3e ."+a.classnames.s_menu);f.legnth||(f=d(BJUI.doRegional(FRAG.gridMenu,c)),f.hide().appendTo(a.$grid),a.$menu=f);a.colShowhide(b.columnShowhide);g.each(function(){var c=d(this),g=c.data("index"),h=a.columnModel[g],g=c.find("\x3e div \x3e ."+a.classnames.th_cell),l=g.find("\x3e ."+a.classnames.btn_menu),r;l.length||(r=d('\x3cbutton type\x3d"button" class\x3d"btn btn-default"\x3e\x3ci class\x3d"fa fa-bars"\x3e\x3c/button\x3e'),l=d('\x3cdiv class\x3d"'+a.classnames.btn_menu+'"\x3e\x3c/div\x3e').append(r),l.appendTo(g),r.click(function(){c.closest("tr");var g=parseInt(c.attr("rowspan")||1,10),m=d(this).offset().left-a.$grid.offset().left-1,g=25*(a.$trsH.length-g)+13*g+11,k=f.find("\x3e ul \x3e li.datagrid-li-showhide"),n,l=f.data("bjui.datagrid.menu.btn");l&&l.length&&l.removeClass("active");d(this).addClass("active");k.length&&a.$showhide&&(a.$showhide.appendTo(k),a.$showhide.data("width"));f.css({position:"absolute",top:g,left:m}).show().data("bjui.datagrid.menu.btn",r).siblings("."+a.classnames.s_menu).hide();n=f.outerWidth();var v=function(b){a.$boxH.width()-b<n?f.css({left:b-n+18}).addClass("position-right"):f.css({left:b}).removeClass("position-right")};v(m);(function(b){a.$boxB.scroll(function(){var c=b.offset().left-a.$grid.offset().left-1;v(c)})})(r);b.columnFilter?a.colFilter(c):f.find("\x3e ul \x3e li."+a.classnames.li_filter).hide();e.locking(c);var q=f.find("\x3e ul \x3e li."+a.classnames.li_asc),w=q.next();q.click(function(){h.sortAsc=!1;e.quickSort(h)});w.click(function(){h.sortAsc=!0;e.quickSort(h)});f.on("bjui.datagrid.th.sort",function(a,b){q.toggleClass("sort-active",b);w.toggleClass("sort-active",!b)})}))});a.$grid.on("click.bjui.datagrid.filter",function(b){b=d(b.target);var c=a.$grid.find("."+a.classnames.s_menu+":visible");c.length&&!b.closest("."+a.classnames.btn_menu).length&&(b.closest("."+a.classnames.s_menu).length||c.hide().data("bjui.datagrid.menu.btn").removeClass("active"))})};h.prototype.colShowhide=function(a){var b=this.tools,d=this.$menu,c=d.find("\x3e ul").find("\x3e li."+this.classnames.li_showhide);a?this.$showhide||(b.createShowhide(),b.showSubMenu(c,d,this.$showhide)):c.hide()};h.prototype.showhideColumn=function(a,b){var e=this.tools,c;if("number"===d.type(a)){if(c=parseInt(a,10),0>c)return}else c=a.data("index");if(c=this.columnModel[c]){if(c.locked){if(b)return;this.colLock(c.th,b)}e.showhide(c,b)}};h.prototype.colFilter=function(a,b){var e=this,c=e.tools,g=e.regional,f=a.data("bjui.datagrid.filter"),h=e.$menu,k=h.find("\x3e ul \x3e li."+e.classnames.li_filter),n=e.columnModel[a.data("index")];e.inputs&&e.inputs.length||c.initEditInputs();if(n.quickfilter){k.find("."+e.classnames.s_filter).addClass("hide");if(!f||!f.length){var f=d(BJUI.doRegional(FRAG.gridFilter.replaceAll("#label#",a.text()),g)).hide().appendTo(e.$grid),l=a.data("index"),n=e.columnModel[l],r=n.type||"string",p=n.operator||[],x=f.find("span.filter-a"),t=f.find("span.filter-b"),q=d('\x3cselect data-toggle\x3d"selectpicker" data-container\x3d"true"\x3e\x3c/select\x3e'),u=d(e.inputs[l]),A,y;u.removeAttr("data-rule").attr("size",10).addClass("filter-input");"string"===r||"lookup"===r||"findgrid"===r?(p.length||(p=["\x3d","!\x3d","like"]),"findgrid"===r&&u.data("context",f)):"number"===r||"int"===r||"spinner"===r?("spinner"===r&&u.removeAttr("data-toggle"),p.length||(p="\x3d !\x3d \x3e \x3c \x3e\x3d \x3c\x3d".split(" "))):"date"===r?p.length||(p=["\x3d","!\x3d"]):"boolean"===r?(p.length||(p=["\x3d","!\x3d"]),u=d(BJUI.doRegional('\x3cselect name\x3d"'+n.name+'" data-toggle\x3d"selectpicker"\x3e\x3coption value\x3d""\x3e#all#\x3c/option\x3e\x3coption value\x3d"true"\x3e#true#\x3c/option\x3e\x3coption value\x3d"false"\x3e#false#\x3c/option\x3e\x3c/select\x3e',g))):"select"===r&&(p.length||(p=["\x3d","!\x3d"]),u.attr("data-width","80"),u.find("\x3e option:first-child").val()&&(u=d('\x3cselect name\x3d"'+n.name+'" data-toggle\x3d"selectpicker" data-width\x3d"80"\x3e\x3c/select\x3e').append(BJUI.doRegional('\x3coption value\x3d""\x3e#all#\x3c/option\x3e',g)).append(u.html())));g=0;for(l=p.length;g<l;g++)q.append('\x3coption value\x3d"'+p[g]+'"\x3e'+p[g]+"\x3c/option\x3e");A=u;y=A.clone();x.append(q).append(u);t.append(q.clone()).append(y);a.data("bjui.datagrid.filter",f);f.appendTo(k);f.data("width",f.outerWidth()).hide().initui();f.on("customEvent.bjui.lookup",'[data-toggle\x3d"lookupbtn"]',function(a,b){for(var c in b)n.name==c&&u.val(b[c])});var p=f.find("button.ok"),x=f.find("button.clear"),w=f.find("select"),B=w.first(),E=w.last(),F=w.eq(1);p.click(function(){var b=B.val(),g=A.val().trim(),m=E.val(),n=y.val().trim(),p=F.val(),l={};g.length&&d.extend(l,{operatorA:b,valA:g});n.length&&(g.length&&d.extend(l,{andor:p}),d.extend(l,{operatorB:m,valB:n}));d.isEmptyObject(l)||(c.quickFilter(e.columnModel[a.data("index")],l),e.$grid.trigger("click"),k.trigger("bjui.datagrid.th.submenu.hide",[h,f]))});x.click(function(){var b=e.columnModel[a.data("index")];w.find("\x3e option:first").prop("selected",!0);w.selectpicker("refresh");A.val("");y.val("");b.isFiltered&&(c.quickFilter(b,null),e.$grid.trigger("click"),k.trigger("bjui.datagrid.th.submenu.hide",[h,f]))})}c.showSubMenu(k,h,f.removeClass("hide"));h.find('\x3e ul \x3e li:not(".'+e.classnames.li_filter+'")').on("mouseover",function(){k.hasClass("active")&&k.trigger("bjui.datagrid.th.submenu.hide",[h,f])})}else k.hide()};h.prototype.initPaging=function(){var a=this,b=a.tools,e=a.paging,c=BJUI.regional.pagination,g=FRAG.gridPaging,f=[],h=e.pageCount,k,n=[],l=BJUI.StrBuilder();k=b.getPageInterval(h,e.pageCurrent,e.showPagenum);for(var r=k.start;r<k.end;r++)f.push(FRAG.gridPageNum.replace("#num#",r).replace("#active#",e.pageCurrent==r?" active":""));g=BJUI.doRegional(g.replaceAll("#pageCurrent#",e.pageCurrent).replaceAll("#count#",e.total+"/"+parseInt(h||0,10)),c);l.add('\x3cdiv class\x3d"paging-content" style\x3d"width:'+a.$boxB.width()+'px;"\x3e').add('\x3cdiv class\x3d"datagrid-pagesize"\x3e\x3cbutton type\x3d"button" class\x3d"btn-default btn-refresh" title\x3d"'+c.refresh+'" data-icon\x3d"refresh"\x3e\x3c/button\x3e').add('\x3cselect data-toggle\x3d"selectpicker"\x3e\x3c/select\x3e').add("\x3c/div\x3e").add('\x3cdiv class\x3d"datagrid-paging"\x3e').add(g.replace("#pageNumFrag#",f.join(""))).add("\x3c/div\x3e").add("\x3c/div\x3e");a.$boxP.html(l.toString());a.$boxP.initui();var p=a.$boxP.find("div.datagrid-pagesize \x3e select"),x=a.$boxP.find("ul.pagination"),t=x.find("\x3e li.page-total"),q=t.next(),u=q.next(),A=u.next(),y=A.nextAll(".page-next"),w=y.next(),B=function(){u.addClass("disabled");A.addClass("disabled")},E=function(){u.removeClass("disabled");A.removeClass("disabled")},F=function(){y.addClass("disabled");w.addClass("disabled")},D=function(){y.removeClass("disabled");w.removeClass("disabled")},C=function(b){p.empty();b||(b=a.paging.pageSize);n=e.selectPageSize.split(",");n.push(String(b));d.unique(n).sort(function(a,b){return a-b});var f=[];d.each(n,function(a,b){f.push('\x3coption value\x3d"'+b+'"'+(b==e.pageSize&&"selected")+"\x3e"+b+"/"+c.page+"\x3c/option\x3e")});p.html(f.join("")).selectpicker("refresh")};1==e.pageCurrent&&(B(),D());e.pageCurrent==e.pageCount&&(E(),F(),1==e.pageCurrent&&B());e.total||F();C();a.$boxP.on("click.datagrid.pagenum","li.page-num",function(b){var c=d(this);c.hasClass("active")||a.jumpPage(c.text());b.preventDefault()}).on("click.datagrid.refresh","button.btn-refresh",function(){a.refresh()}).on("bjui.datagrid.paging.jump",function(c){c=a.paging.pageCurrent;for(var d=b.getPageInterval(a.paging.pageCount,c,e.showPagenum),f=[],g=d.start;g<d.end;g++)f.push(FRAG.gridPageNum.replace("#num#",g).replace("#active#",c==g?" active":""));x.find("\x3e li.page-num").remove();A.after(f.join(""));1==c?(B(),D(),c==a.paging.pageCount&&F(),a.paging.total||F()):c==a.paging.pageCount?(E(),F()):(E(),D());q.find("input").val(c);t.find("\x3e span").html(a.paging.total+"/"+a.paging.pageCount)}).on("bjui.datagrid.paging.pageSize",function(a,b){C(b)}).on("change","div.datagrid-pagesize \x3e select",function(){var b=d(this).val();a.jumpPage(null,b)});q.find("input").on("keyup",function(b){b.which===BJUI.keyCode.ENTER&&(b=d(this).val())&&a.jumpPage(b)});u.on("click",function(){1<a.paging.pageCurrent&&a.jumpPage(1)});A.on("click",function(){1<a.paging.pageCurrent&&a.jumpPage(a.paging.pageCurrent-1)});y.on("click",function(){a.paging.pageCurrent<a.paging.pageCount&&a.jumpPage(a.paging.pageCurrent+1)});w.on("click",function(){a.paging.pageCurrent<a.paging.pageCount&&a.jumpPage(a.paging.pageCount)})};h.prototype.jumpPage=function(a,b){var d=this.paging,c=d.pageCount;if(!a||!isNaN(a))if(!b||!isNaN(b)){if(a&&(a=parseInt(a,10),1>a&&(a=1),a>c&&(a=c),a==d.pageCurrent)||b&&(b=parseInt(b,10),"remote"!=this.options.local&&d.pageSize>d.total))return;this.tools.jumpPage(a,b)}};h.prototype.add=function(a,b){if(this.tools.beforeEdit())if(!this.options.editUrl)BJUI.debug("Datagrid Plugin: Edit url is not set!");else if(this.options.editMode){if(!this.options.inlineEditMult)this.doCancelEditRow(this.$tbody.find("\x3e tr."+this.classnames.tr_edit));else if("inline"!=this.options.editMode&&this.$tbody.find("\x3e tr."+this.classnames.tr_add).length)return;var e=this,c=e.options,g=e.paging,f,h={},k=(g.pageCurrent-1)*g.pageSize,n,g=function(a){var c=d("\x3ctr\x3e\x3c/tr\x3e").addClass(e.classnames.tr_add),f=c.clone();d.each(e.columnModel,function(a,b){var g=d("\x3ctd\x3e\x3c/td\x3e");b.gridChild?g.addClass(e.classnames.td_child).html("\x3cdiv\x3e"+BJUI.doRegional(FRAG.gridExpandBtn,e.regional)+"\x3c/div\x3e"):b.gridNumber?g.addClass(e.classnames.td_linenumber).text(0):b.gridCheckbox?g.addClass(e.classnames.td_checkbox).html('\x3cdiv\x3e\x3cinput type\x3d"checkbox" data-toggle\x3d"icheck" name\x3d"datagrid.checkbox" value\x3d"true"\x3e\x3c/div\x3e'):b.gridEdit?g.addClass(e.classnames.s_edit).data("isAdd",!0).html(BJUI.doRegional(FRAG.gridEditBtn,e.regional)):g.text("");b.hidden&&g.css("display","none");b.align&&g.attr("align",b.align);b.name&&(h[b.name]="");b.locked?b.gridCheckbox?(g.clone().hide().appendTo(c),g.show().appendTo(f)):(g.clone().show().appendTo(f),g.hide().appendTo(c)):g.appendTo(c)});b&&"object"===typeof b&&c.data("datagrid.addData",b);h=d.extend({},e.attach,h);e.emptyData||(e.emptyData=h);return{tr:c,lockTr:f.find("\x3e td").length?f:null}};a||(a=c.addLocation||"first");e.$lastSelect||("prev"===a?a="first":"next"===a&&(a="last"));"first"===a?(n=0,f=g(n),f.tr.prependTo(e.$tbody),f.lockTr&&f.lockTr.prependTo(e.$lockTbody)):"last"===a?(n=e.data?e.data.length:0,f=g(n),f.tr.appendTo(e.$tbody),f.lockTr&&f.lockTr.appendTo(e.$lockTbody)):"prev"===a?(n=e.$lastSelect.index(),f=g(n),f.tr.insertBefore(e.$lastSelect),f.lockTr&&f.lockTr.insertBefore(e.$lockTbody.find("\x3e tr:eq("+e.$lastSelect.index()+")"))):"next"===a&&(n=e.$lastSelect.index()+1,f=g(n),f.tr.insertAfter(e.$lastSelect),f.lockTr&&f.lockTr.insertAfter(e.$lockTbody.find("\x3e tr:eq("+e.$lastSelect.index()+")")));b=d.extend({},e.emptyData,{addFlag:!0});e.data||(e.data=[]);e.allData||(e.allData=[]);e.allData.length?e.allData.splice(n+k,0,b):e.allData.push(b);e.data.length?e.data.splice(n,0,b):e.data.push(b);d.each(e.data,function(a,b){d.extend(b,{gridNumber:c.linenumberAll?k+(a+1):a+1,gridIndex:a})});f.tr.initui();f.lockTr&&f.lockTr.initui();c.showNoDataTip&&e.$tbody.find("\x3e tr.datagrid-nodata").remove();"auto"===c.height&&e.fixedHeight();setTimeout(function(){e.initEvents(f.tr)},20);f.lockTr&&e.initLockEvents(f.lockTr);e.edit(f.tr);c.hasChild&&c.childOptions&&f.tr.after('\x3ctr class\x3d"'+e.classnames.tr_child+'"\x3e\x3c/tr\x3e');"dialog"!=c.editMode?e.doEditRow(f.tr,"inline",!0):e.dialogEdit(f.tr,!0)}};h.prototype.edit=function(a){var b=this,e=b.tools,c=b.options.editMode;b.editInit=!1;if(c){if("object"===typeof c){var g={},f=["dialog","navtab","div"],h=!1;b.editOptions=null;for(var k in c)if(-1!=d.inArray(k,f)){g.type=k;g.options=c[k];h=!0;break}if(!h){BJUI.debug("Dialog Plugn: The options 'editModel' set error!");return}d.isEmptyObject(g)||(b.editOptions=g)}else b.options.editUrl&&(b.options.editUrl=b.options.editUrl.replace(/{\/?[^}]*}/g,"")),"dialog"!=c&&(c="inline");a||(a=b.$tbody.find("\x3e tr"));a=a.find("\x3e td."+b.classnames.s_edit);b.editInit=!0;a.each(function(){var a=d(this),f=a.find("button"),g=f.first(),h=g.next(),m=h.next(),k=m.next(),l=k.next();g.on("click",function(g,n){var l=d(this).closest("tr"),p=l.index(),t=a.data("isAdd"),p=b.tools.getNoChildDataIndex(p);n||(n=b.isDom?l.data("initData")||e.setDomData(l):b.data[p]);if(!e.beforeEdit(l,n))return!1;if(b.editOptions)return b.externalEdit(l,null,n),!1;"dialog"!=c?(b.inlineEdit(l,t),f.hide(),h.show(),k.show(),t&&(h.hide(),m.show())):b.dialogEdit(l,t);g.stopPropagation()});m.on("click",function(a){var c=d(this),e=c.closest("tr");b.updateEdit(e,c);a.stopPropagation()}).on("bjui.datagrid.update.tr",function(){f.hide();g.show();l.show()});h.on("click",function(a){var c=d(this),e=c.closest("tr");b.updateEdit(e,c);a.stopPropagation()}).on("bjui.datagrid.update.tr",function(){f.hide();g.show();l.show()});k.on("click",function(a){var c=d(this).closest("tr");b.cancelEdit(c);f.hide();g.show();l.show();a.stopPropagation()});l.on("click",function(a){var c=d(this).closest("tr");b.delRows(c);a.stopPropagation()})})}};h.prototype.externalEdit=function(a,b,e){var c=this,g=c.options,f={},h,k,n=["dialog","navtab","div"];if(b&&"object"===typeof b)for(var l in b){if(-1!=d.inArray(l,n)){f.type=l;f.options=b[l];break}}else f=d.extend({},c.editOptions);if(a instanceof jQuery)h=a;else{if(isNaN(a)){BJUI.debug("Datagrid Plugin: Func 'externalEdit', Parameter 'row' is incorrect!");return}h=c.$tbody.find("\x3e tr:not(."+c.classnames.tr_child+")").eq(parseInt(a,10))}if("undefined"===typeof f)BJUI.debug("Datagrid Plugin: Func 'externalEdit', Parameter 'editOptions' is incorrect!");else if(f){e||(c.isDom?e=h.data("initData")||c.tools.setDomData(h):(a=c.tools.getNoChildDataIndex(h.index()),e=c.data[a]));if(!f.options.url||f.options["datagrid.nourl"])f.options["datagrid.nourl"]=!0,f.options.url=g.editUrl;(g=f.options.url)&&!g.isFinishedTm()&&(g=!e||e.addFlag?g.replace(/{\/?[^}]*}/g,""):c.tools.replacePlh(g,e),g.isFinishedTm()||BJUI.debug("Datagrid Plugin: Func 'externalEdit', the property 'url' of options 'editOptions' is incorrect: "+g));if(g){f.options.url=g;k=f.type;h.data("datagrid.addData")&&(f.options.data?d.extend(f.options.data,h.data("datagrid.addData")):f.options.data=h.data("datagrid.addData"));f.options.id||(f.options.id="datagrid-external-edit"+(new Date).getTime());f.options.onClose=function(){h.hasClass(c.classnames.tr_add)&&c.cancelEdit(h)};var r=function(a){var b=!1,g;"array"===d.type(a)?(b=!0,g=a[0]):"object"===typeof a&&(b=!0,g=a);b&&(d.extend(e,"object"===typeof g&&g),h.hasClass(c.classnames.tr_add)&&h.length===c.$tbody.find("\x3e tr:not(."+c.classnames.tr_child+")").length&&c.fixtedColumnWidthCount&&(c.fixedColumnWidth=!0),e.addFlag&&(e.addFlag=!1),c.dialogEditComplete(h,e),"dialog"===k?BJUI.dialog("close",f.options.id):"navtab"===k&&BJUI.navtab("closeTab",f.options.id),c.tools.afterSave(h,e),e["refresh.datagrid.child"]&&((a=h.data("bjui.datagrid.child"))&&a.length?a.datagrid("refresh"):c.showChild(h)))};f.options.onLoad=function(a){(a=a.find("form.datagrid-edit-form"))&&a.length&&(a=a.first(),a.removeAttr("okCallback").data("okCallback",d.proxy(r,c)))};"dialog"===k?BJUI.dialog(f.options):"navtab"===k?BJUI.navtab(f.options):"div"===k&&BJUI.ajax("doload",f.options)}}};h.prototype.doEditRow=function(a,b,e){if(this.editInit){var c=this,g,f,h=[];b=b||c.options.editMode;if("object"===typeof a)g=a;else if(isNaN(a)){var k=c.$tbody.find("\x3e tr:not(."+c.classnames.tr_child+")"),n;a=a.split(",");a=a.unique();a.sort(function(a,b){return a.trim()-b.trim()});d.each(a,function(a,b){var c=parseInt(b.trim(),10);(c=k.eq(c))&&c.length&&(n=n?n.add(c):c)});g=n}else isNaN(a)||(g=c.$tbody.find("\x3e tr:not(."+c.classnames.tr_child+")").eq(a));g.length&&(g.each(function(){var a=d(this),b=a.index(),b=c.tools.getNoChildDataIndex(b),a=c.isDom?a.data("initData")||tools.setDomData(a):c.data[b];h.push(a)}),c.tools.beforeEdit(g,h)&&(c.options.editUrl?c.editOptions?c.externalEdit(g.last(),null,h[g.length-1]):g.each(function(a){var g=d(this);f=g.find("\x3e td."+c.classnames.s_edit+" button.edit");if("dialog"!=b)f.length?f.trigger("click",[h[a]]):c.inlineEdit(g,e,h[a]);else return c.dialogEdit(g,e,h[a]),!1}):BJUI.debug("Datagrid Plugin: Edit url is not set!")))}};h.prototype.doCancelEditRow=function(a){var b=this;("number"===d.type(a)?this.$tbody.find("\x3e tr").eq(a):a).each(function(){var a=d(this),c=a.find("\x3e td."+b.classnames.s_edit+" \x3e button.cancel");c.length?c.trigger("click"):b.cancelEdit(a)})};h.prototype.doSaveEditRow=function(a){var b=this,e=b.options;a="number"===d.type(a)?this.$tbody.find("\x3e tr").eq(a):a?a:b.$tbody.find("\x3e tr."+b.classnames.tr_edit);a.length?1==a.length?a.hasClass(b.classnames.tr_edit)&&this.updateEdit(a):e.saveAll?b.saveAll(a):a.each(function(){b.updateEdit(d(this))}):b.$grid.alertmsg("info",BJUI.getRegional("datagrid.saveMsg"))};h.prototype.delRows=function(a){var b=this,e=b.options,c=e.beforeDelete,g=e.delConfirm,f;if(c&&("string"===typeof c&&(c=c.toFunc()),"function"===typeof c&&!c.call(this)))return;if("object"===typeof a)f=a;else if(isNaN(a)){var h=b.$tbody.find("\x3e tr:not(."+b.classnames.tr_child+")"),k;a=a.split(",");a=a.unique();a.sort(function(a,b){return a.trim()-b.trim()});d.each(a,function(a,b){var c=h.eq(parseInt(b.trim(),10));c&&c.length&&(k=k?k.add(c):c)});f=k}else isNaN(a)||(f=this.$tbody.find("\x3e tr:not(."+b.classnames.tr_child+")").eq(a));if(f&&f.length){var n=function(){f.each(function(){var a=d(this),c=b.options.childUpdate,e=b.$element.data("bjui.datagrid.parent"),f=function(a){a.closest("table").datagrid("updateRow",a)};e&&c&&("string"===typeof c?-1===c.indexOf("all")&&-1===c.indexOf("del")||f(e):f(e));a.trigger("bjui.datagrid.tr.delete")});b.tools.afterDelete();"auto"===e.height&&b.fixedHeight()},l=function(){var a=f.filter("."+b.classnames.tr_add);if(a.length&&(b.cancelEdit(a),!f.not(a).length))return;if(e.delUrl){var c=[],g=e.delCallback;f.not(a).each(function(){var a=d(this),f=a.index(),g,a=b.isDom?a.data("initData")||b.tools.setDomData(a):b.data[b.tools.getNoChildDataIndex(f)];e.delPK?c.push(a[e.delPK]):(e.jsonPrefix?(g={},d.each(a,function(a,b){if("gridCheckbox"===a||"gridEdit"===a)return!0;g[e.jsonPrefix+"."+a]=b})):(g=d.extend({},a),delete g.gridCheckbox,delete g.gridEdit),c.push(g))});"string"===typeof g&&(g=g.toFunc());a=e.delType;g={url:e.delUrl,data:e.delPK?[{name:e.delPK,value:c.join(",")}]:JSON.stringify(c),type:"POST",okCallback:g||function(a){n()}};a&&"raw"===a&&!e.delPK?g.contentType="application/json":(!e.delPK&&(g.data={json:g.data}),a&&"raw"!==a&&(g.type=a));BJUI.ajax("doajax",g)}else n()};g?("string"!==typeof g&&(g=1==f.length?BJUI.getRegional("datagrid.delMsg"):BJUI.getRegional("datagrid.delMsgM")),b.$grid.alertmsg("confirm",g,{okCall:function(){l()}})):l()}};h.prototype.inlineEdit=function(a,b,e){if(!this.tools.beforeEdit(a,e))return!1;var c=this,g=c.options,f=c.tools,h=c.columnModel,k=a.find("\x3e td"),n=k.length,l=a.index(),r;r=f.getNoChildDataIndex(l);e||(e=c.isDom?a.data("initData")||f.setDomData(a):c.data[r]);if(a.hasClass(c.classnames.tr_edit))return!1;c.inputs&&c.inputs.length||f.initEditInputs();a.addClass(c.classnames.tr_edit).data(c.datanames.changeData,{});a.data("validator")&&a.validator("destroy");g.inlineEditMult||c.doCancelEditRow(a.siblings("."+c.classnames.tr_edit));c.$lastEditTr=a;k.each(function(f){var g=d(this),m=h[f],k=m&&m.name&&e[m.name],p=g.html();f=c.inputs[f];var r,q=function(f,g,h){var k=a.data(c.datanames.changeData),n=m.jsontype,l="undefined"===typeof m.defaultVal?null:m.defaultVal;switch(m.type){case "date":f.on("afterchange.bjui.datepicker",function(a,b){g.addClass(c.classnames.td_changed);f.val()==h&&g.removeClass(c.classnames.td_changed);k[m.name]=f.val()}).change(function(){g.addClass(c.classnames.td_changed);f.val()==h&&g.removeClass(c.classnames.td_changed);k[m.name]=f.val()});break;case "select":f.change(function(){var a=d(this).val();g.addClass(c.classnames.td_changed);a==String(h)&&g.removeClass(c.classnames.td_changed);f.prop("multiple")?d.isArray(a)&&(a=a.join(",")):n&&("boolean"===n?a=!!a:"number"===n&&!isNaN(Number(a))&&(a=Number(a)));k[m.name]=a});break;case "boolean":f.on("ifChanged",function(){g.toggleClass(c.classnames.td_changed);var a=d(this).is(":checked");a==h&&g.removeClass(c.classnames.td_changed);k[m.name]=a});break;case "findgrid":k[m.name]=f.val();g.on("afterchange.bjui.findgrid",'[data-toggle\x3d"findgrid"]',function(a,b){var d=b.value;g.toggleClass(c.classnames.td_changed);d==k[m.name]&&g.removeClass(c.classnames.td_changed);n&&"number"===n&&!isNaN(Number(d))&&(d=Number(d));k[m.name]=d});f.change(function(){var a=d(this).val();g.addClass(c.classnames.td_changed);a==h&&g.removeClass(c.classnames.td_changed);n&&"number"===n&&!isNaN(Number(a))&&(a=Number(a));k[m.name]=a});break;case "lookup":g.on("customEvent.bjui.lookup",'[data-toggle\x3d"lookupbtn"]',function(a,b){g.toggleClass(c.classnames.td_changed);for(var d in b)"undefined"!==typeof e[d]&&(k[d]=b[d]),m.name==d&&(f.val()==b[d]?g.removeClass(c.classnames.td_changed):f.val(b[d]))});f.change(function(){g.addClass(c.classnames.td_changed);f.val()==h&&g.removeClass(c.classnames.td_changed);k[m.name]=f.val()});break;case "spinner":f.on("afterchange.bjui.spinner",function(a,b){g.addClass(c.classnames.td_changed);f.val()==h&&g.removeClass(c.classnames.td_changed);k[m.name]=Number(f.val())}).change(function(){g.addClass(c.classnames.td_changed);f.val()==h&&g.removeClass(c.classnames.td_changed);k[m.name]=Number(f.val())});break;default:f.change(function(){var a=d(this).val();g.addClass(c.classnames.td_changed);a==h&&g.removeClass(c.classnames.td_changed);n&&"number"===n&&!isNaN(Number(a))&&(a=Number(a));k[m.name]=a})}b?"boolean"===m.type?(l=!!l,k[m.name]=l,f.prop("checked",l)):null!=l?(f.isTag("select")&&f.prop("multiple")?f.val(d.isArray(l)?l:l.split(",")):f.val(String(l)),n&&("number"===n?!isNaN(Number(l))&&(l=Number(l)):"boolean"===n&&(l=!!l)),k[m.name]=l):f.isTag("select")&&!f.prop("multiple")&&(k[m.name]=f.val()):n&&f.trigger("change")};g.data(c.datanames.td_html,p);b?m.add||(f=""):(e.addFlag&&(e.addFlag=!1),m.edit||(f=""));if(f){r=d(f);if("undefined"===typeof k||"null"===k||null===k)k="";"boolean"===m.type?r.prop("checked",k):"findgrid"===m.type?r.data("context",a).val(String(k)):(r.val(String(k)),r.isTag("select")&&r.prop("multiple")&&k&&!d.isArray(k)&&r.val(k.split(",")));b?m.addAttrs&&"object"===typeof m.addAttrs&&d.each(m.addAttrs,function(a,b){r.attr(a,b)}):m.editAttrs&&"object"===typeof m.editAttrs&&d.each(m.editAttrs,function(a,b){r.attr(a,b)});g.empty().append(r).addClass(c.classnames.td_edit);q(r,g,k);m.locked&&(k=c.$lockTbody.find("tr:eq("+l+")").find("\x3e td:eq("+m.lockIndex+")"),g.clone().html(p).insertAfter(g),g.show().insertAfter(k).initui(),k.remove())}--n||a.initui().validator({msgClass:"n-bottom",theme:"red_bottom_effect_grid"})})};h.prototype.saveAll=function(a){var b=this,e=b.options,c=e.editCallback,g,f,h,k=[],n,l,r=[],p=[],x=a&&a.length;if(!a||a.length)a=b.$tbody.find("\x3e tr."+b.classnames.tr_edit),x=a.length;if(x&&(a.each(function(){g=d(this);h=b.tools.getNoChildDataIndex(g.index());f=b.isDom?g.data("initData"):b.data[h];k.push(f);g.isValid(function(a){if(a)n=g.data(b.datanames.changeData),d.extend(f,n),e.jsonPrefix?(l={},d.each(f,function(a,b){if("gridChild"===a||"gridCheckbox"===a||"gridEdit"===a)return!0;l[e.jsonPrefix+"."+a]=b})):(l=d.extend({},f),delete l.gridChild,delete l.gridCheckbox,delete l.gridEdit),x--,r.push(l);else return r=[],!1})}),!x&&(c=c?c.toFunc():function(c){"array"===d.type(c)?p=c:"object"===typeof c&&p.push(c);a.filter("."+b.classnames.tr_add).length===b.$tbody.find("\x3e tr:not(."+b.classnames.tr_child+")").length&&b.fixtedColumnWidthCount&&(b.fixedColumnWidth=!0);a.each(function(a){g=d(this);h=g.index();b.columnModel[0]===b.childColumn&&(h/=2);f=b.isDom?g.data("initData"):b.data[h];d.extend(f,"object"===typeof p[a]&&p[a]);b.allData&&b.allData[f.gridIndex]&&d.extend(b.allData[f.gridIndex],f);b.inlineEditComplete(g,f)});b.tools.afterSave(a,r)},b.tools.beforeSave(a,k)))){var t=e.editType,c={url:e.editUrl,data:JSON.stringify(r),type:"POST",okCallback:c};t&&"raw"===t?c.contentType="application/json":(c.data={json:c.data},t&&(c.type=t));BJUI.ajax("doajax",c)}};h.prototype.updateEdit=function(a,b){var e=this,c=e.options,g=c.editCallback,f,h=[],k,n,l=[],r,p=a.index(),p=e.tools.getNoChildDataIndex(p);f=e.isDom?a.data("initData"):e.data[p];a.hasClass(e.classnames.tr_edit)&&a.isValid(function(m){if(m&&(k=a.data(e.datanames.changeData),d.extend(f,k),c.jsonPrefix?(n={},d.each(f,function(a,b){if("gridChild"===a||"gridCheckbox"===a||"gridEdit"===a)return!0;n[c.jsonPrefix+"."+a]=b})):(n=d.extend({},f),delete n.gridChild,delete n.gridCheckbox,delete n.gridEdit),g=g?g.toFunc():function(c){"array"===d.type(c)?r=c[0]:"object"===typeof c&&(r=c);d.extend(f,"object"===typeof r&&r);e.allData&&e.allData[f.gridIndex]&&d.extend(e.allData[f.gridIndex],f);a.hasClass(e.classnames.tr_add)&&a.length===e.$tbody.find("\x3e tr:not(."+e.classnames.tr_child+")").length&&e.fixtedColumnWidthCount&&(e.fixedColumnWidth=!0);e.inlineEditComplete(a,f,b);e.tools.afterSave(a,f)},h.push(f),e.tools.beforeSave(a,h))){l.push(n);m=c.editType;var p={url:c.editUrl,data:JSON.stringify(l),type:"POST",okCallback:g};m&&"raw"===m?p.contentType="application/json":(p.data={json:p.data},m&&(p.type=m));BJUI.ajax("doajax",p)}})};h.prototype.cancelEdit=function(a){var b=this,e=b.columnModel;a.each(function(){var a=d(this),g=a.index(),f=g;a.hasClass(b.classnames.tr_edit)&&a.removeClass(b.classnames.tr_edit).find("\x3e td."+b.classnames.td_edit).each(function(){var a=d(this),c=a.index(),f=e[c],c=a.data(b.datanames.td_html);a.removeClass(b.classnames.td_edit).removeClass(b.classnames.td_changed).html(c);f.locked&&(a=b.$lockTbody.find("tr:eq("+g+")"),f=a.find("\x3e td:eq("+f.lockIndex+")"),c=f.data(b.datanames.td_html),a.removeClass(b.classnames.tr_edit),f.removeClass(b.classnames.td_edit).removeClass(b.classnames.td_changed).html(c))});a.hasClass(b.classnames.tr_add)&&(f=b.tools.getNoChildDataIndex(f),b.data=b.data.remove(f),a.next().hasClass(b.classnames.tr_child)&&(a.next().remove(),b.$lockTbody&&b.$lockTbody.find("\x3e tr:eq("+g+")").next().remove()),b.$lockTbody&&b.$lockTbody.find("\x3e tr:eq("+g+")").remove(),a.remove(),b.tools.createNoDataTr(),"auto"===b.options.height&&b.fixedHeight())})};h.prototype.inlineEditComplete=function(a,b,e){var c=this,g=c.columnModel,f=a.index(),m=a.find("\x3e td"),k=!1,n=c.$lockTbody&&c.$lockTbody.find("\x3e tr:eq("+f+")");d.each(g,function(a,d){d.gridNumber&&(k=!0);if(d.gridChild||d.gridNumber||d.gridCheckbox||d.gridEdit)return!0;var e=d.name?b[d.name]:"",f=m.eq(d.index);"undefined"===typeof e&&(e="");f.text(e).removeClass(c.classnames.td_edit).removeClass(c.classnames.td_changed);d.render&&"function"===typeof d.render?(e=d.items?d.render.call(c,e,b,d.items):d.render.call(c,e,b),f.html(e)):d.items&&(e=h.renderItem.call(c,e,b,d.items),f.html(e));d.locked&&n&&n.find("\x3e td:eq("+d.lockIndex+")").removeClass(c.classnames.td_changed).html(f.html())});a.removeClass(c.classnames.tr_edit).initui();n&&n.removeClass(c.classnames.tr_edit).initui();e||(e=m.filter("."+c.classnames.s_edit).find("button.update"));e&&e.length&&e.trigger("bjui.datagrid.update.tr");if(a.hasClass(c.classnames.tr_add)){a.removeClass(c.classnames.tr_add);a.find("\x3e td."+c.classnames.s_edit).removeData("isAdd");if(k){var l;c.linenumberColumn.locked&&(c.colLock(c.linenumberColumn.th,!1),l=!0);c.$tbody.find("\x3e tr:not(."+c.classnames.tr_child+")").each(function(a){d(this).find("\x3e td."+c.classnames.td_linenumber).text(a+1)});l&&c.colLock(c.linenumberColumn.th,!0)}a.next("."+c.classnames.tr_child).remove();c.tools.createChildTr(a,b)}};h.prototype.dialogEdit=function(a,b,e){if(!this.tools.beforeEdit(a,e))return!1;var c=this,g=c.options,f=c.tools,h=c.columnModel,k=a.index(),n,l;e||(k=f.getNoChildDataIndex(k),e=c.isDom?a.data("initData")||f.setDomData(a):c.data[k]);c.inputs&&c.inputs.length||f.initEditInputs();l=g.gridTitle||"datagrid";b?l+=" - "+BJUI.getRegional("datagrid.add"):(e.addFlag&&(e.addFlag=!1),l+=" - "+BJUI.getRegional("datagrid.edit"));k=d('\x3cdiv\x3e\x3cdiv class\x3d"bjui-pageContent"\x3e\x3c/div\x3e\x3cdiv class\x3d"bjui-pageFooter"\x3e\x3c/div\x3e\x3c/div\x3e');n=d('\x3cform class\x3d"datagrid-dialog-edit-form"\x3e\x3c/form\x3e');var r=function(a,f,g,h){var m=a.data(c.datanames.changeData),k=h.jsontype;a="undefined"===typeof h.defaultVal?null:h.defaultVal;switch(h.type){case "date":g.on("afterchange.bjui.datepicker",function(a,b){m[h.name]=d(this).val()}).change(function(){m[h.name]=d(this).val()});break;case "select":g.change(function(){var a=d(this),b=a.val();(a=a.prop("multiple"))&&d.isArray(b)&&(b=b.join(","));!a&&k&&("boolean"===k?b=!!b:"number"===k&&!isNaN(Number(b))&&(b=Number(b)));m[h.name]=b});break;case "boolean":g.on("ifChanged",function(){m[h.name]=d(this).is(":checked")});break;case "findgrid":f.on("afterchange.bjui.findgrid",'[data-toggle\x3d"findgrid"]',function(a,b){var c=b.value;k&&"number"===k&&!isNaN(Number(c))&&(c=Number(c));m[h.name]=c});g.change(function(){m[h.name]=d(this).val()});break;case "lookup":f.on("customEvent.bjui.lookup",'[data-toggle\x3d"lookupbtn"]',function(a,b){for(var c in b)"undefined"!==typeof e[c]&&(m[c]=b[c]),h.name==c&&d(this).val(b[c])});g.change(function(){m[h.name]=d(this).val()});break;case "spinner":g.on("afterchange.bjui.spinner",function(a,b){m[h.name]=Number(d(this).val())}).change(function(){m[h.name]=Number(d(this).val())});break;default:g.change(function(){var a=d(this).val();k&&"number"===k&&!isNaN(Number(a))&&(a=Number(a));m[h.name]=a})}b?"boolean"===h.type?(a=!!a,m[h.name]=a,g.prop("checked",a)):null!=a?(g.isTag("select")&&g.prop("multiple")?g.val(d.isArray(a)?a:a.split(",")):g.val(String(a)),k&&("number"===k?!isNaN(Number(a))&&(a=Number(a)):"boolean"===k&&(a=!!a)),m[h.name]=a):g.isTag("select")&&!g.prop("multiple")&&(m[h.name]=g.val()):k&&g.trigger("change")};k.find("\x3e div:first").append(n).next().append(BJUI.doRegional(FRAG.gridDialogEditBtns,c.regional));k=d.extend({},{id:"datagrid-dialog-edit",fresh:!0,target:k[0],width:520,height:400,mask:!0,title:l,onLoad:function(m){var k=m.find("form.datagrid-dialog-edit-form"),n=m.find("div.bjui-pageFooter button"),l=n.first(),p=n.eq(1);m=n.eq(2);var n=n.last(),q,v,w=function(a,e,f){e.empty();f.data(c.datanames.changeData)||f.data(c.datanames.changeData,{});e.data("validator")&&e.validator("destroy");d.each(h,function(g,h){if(!h.name||h===c.childColumn||h===c.linenumberColumn||h===c.checkboxColumn||h===c.editBtnsColumn)return!0;var m=c.inputs[g],k,n=d("\x3cp\x3e\x3c/p\x3e"),l="datagrid-dialog-edit-column-"+g,p=a[h.name];b?h.add||(m=""):h.edit||(m="");if("undefined"===typeof p||"null"===p||null===p)p="";m?(k=d(m).attr("id",l),k.isTag("select")?k.attr("data-width","auto"):k.isTag("checkbox")||k.attr("size",30),"boolean"===h.type?k.prop("checked",p):"findgrid"===h.type?k.val(String(p)).data("context",e):k.val(String(p)),k.isTag("select")&&k.prop("multiple")&&p&&!d.isArray(p)&&k.val(p.split(",")),b?h.addAttrs&&"object"===typeof h.addAttrs&&d.each(h.addAttrs,function(a,b){k.attr(a,b)}):h.editAttrs&&"object"===typeof h.editAttrs&&d.each(h.editAttrs,function(a,b){k.attr(a,b)})):b||h.edit||(m=p);n.append('\x3clabel class\x3d"control-label x120" for\x3d"'+l+'"\x3e'+h.label+"\uff1a\x3c/label\x3e").append(d('\x3cspan class\x3d"datagrid-dialog-column-span"\x3e\x3c/span\x3e').append(k||m)).appendTo(e);k&&r(f,e,k,h)});e.initui().validator({msgClass:"n-bottom",theme:"red_bottom_effect_grid"})};k.is(":empty")&&w(e,k,a);q=a.index();c.columnModel[0]===c.childColumn&&(q*=2);q||l.addClass("disabled");q==c.data.length-1&&p.addClass("disabled");l.click(function(){var b=a.prev(),d;c.options.hasChild&&c.options.childOptions&&(b=b.prev());b.length?(v=c.tools.getNoChildDataIndex(b.index()),d=c.isDom?b.data("initData")||f.setDomData(b):c.data[v],a=b,w(d,k,a),p.removeClass("disabled"),b.prev().length||l.addClass("disabled")):l.addClass("disabled")});p.click(function(){var b=a.next(),d,e;c.options.hasChild&&c.options.childOptions&&(b=b.next());b.length?(e=b.next(),v=c.tools.getNoChildDataIndex(b.index()),c.options.hasChild&&c.options.childOptions&&(e=e.length&&e.next()),d=c.isDom?b.data("initData")||f.setDomData(b):c.data[v],a=b,w(d,k,a),k.initui(),l.removeClass("disabled"),e&&e.length||p.addClass("disabled")):p.addClass("disabled")});n.click(function(){var b,e,f=[],h,m,n=g.editCallback;v=c.tools.getNoChildDataIndex(a.index());e=c.isDom?a.data("initData"):c.data[v];k.isValid(function(k){if(k&&(b=a.data(c.datanames.changeData),d.extend(e,b),g.jsonPrefix?(h={},d.each(e,function(a,b){if("gridChild"===a||"gridCheckbox"===a||"gridEdit"===a||!a||!edit||!add)return!0;h[g.jsonPrefix+"."+a]=b})):(h=d.extend({},e),delete h.gridCheckbox,delete h.gridEdit),n=n?n.toFunc():function(b){"array"===d.type(b)?m=b[0]:"object"===typeof b&&(m=b);d.extend(e,"object"===typeof m&&m);a.hasClass(c.classnames.tr_add)&&a.length===c.$tbody.find("\x3e tr:not(."+c.classnames.tr_child+")").length&&c.fixtedColumnWidthCount&&(c.fixedColumnWidth=!0);c.dialogEditComplete(a,e);c.$grid.dialog("close","datagrid-dialog-edit");c.tools.afterSave(a,e)},f.push(e),c.tools.beforeSave(a,f))){k=g.editType;var l={url:g.editUrl,data:JSON.stringify(h),type:"POST",okCallback:n};k&&"raw"===k?l.contentType="application/json":(l.data={json:l.data},k&&(l.type=k));BJUI.ajax("doajax",l)}})});m.click(function(){c.$grid.dialog("close","datagrid-dialog-edit")})},onClose:function(){var a=!1;c.$tbody.find("\x3e tr."+c.classnames.tr_add).each(function(){var b=d(this),e=b.index(),f;f=c.tools.getNoChildDataIndex(e);c.data=c.data.remove(f);b.next().hasClass(c.classnames.tr_child)&&(b.next().remove(),c.$lockTbody&&c.$lockTbody.find("\x3e tr:eq("+e+")").next().remove());c.$lockTbody&&c.$lockTbody.find("\x3e tr:eq("+e+")").remove();b.remove();a=!0});a&&"auto"===c.options.height&&c.fixedHeight()}},"object"===typeof g.editDialogOp&&g.editDialogOp);c.$grid.dialog(k)};h.prototype.dialogEditComplete=function(a,b){var e=this,c=e.columnModel,g=a.index(),f=a.find("\x3e td"),m=!1;e.$tbody.find("\x3e tr");var k=e.$lockTbody&&e.$lockTbody.find("\x3e tr:eq("+g+")");d.each(c,function(a,c){c.gridNumber&&(m=!0);if(c.gridChild||c.gridNumber||c.gridCheckbox||c.gridEdit)return!0;var d=c.name?b[c.name]:"",g=f.eq(c.index);if("undefined"===typeof d||"null"===d||null===d)d="";g.text(d).removeClass(e.classnames.td_edit).removeClass(e.classnames.td_changed);c.render&&"function"===typeof c.render?(d=c.items?c.render.call(e,d,b,c.items):c.render.call(e,d,b),g.html(d)):c.items&&(d=h.renderItem.call(e,d,b,c.items),g.html(d));c.locked&&k&&k.find("\x3e td:eq("+c.lockIndex+")").removeClass(e.classnames.td_edit).removeClass(e.classnames.td_changed).html(g.html())});a.initui();k&&k.initui();if(a.hasClass(e.classnames.tr_add)){a.removeClass(e.classnames.tr_add);if(m){var n;e.linenumberColumn.locked&&(e.colLock(e.linenumberColumn.th,!1),n=!0);e.$tbody.find("\x3e tr:not(."+e.classnames.tr_child+")").each(function(a){d(this).find("\x3e td."+e.classnames.td_linenumber).text(a+1)});n&&e.colLock(e.linenumberColumn.th,!0)}a.next("."+e.classnames.tr_child).remove();e.tools.createChildTr(a,b)}};h.prototype.resizeGrid=function(){var a=this;a.$grid.getPageTarget();d('a[data-toggle\x3d"tab"]').on("shown.bs.tab",d.proxy(function(b){if(!a.$element.data("bjui.datagrid.init.tab")){var e=d(b.target);b=e.data("target");e=e.attr("href");b||(b=d(e));b&&b.length&&b.find(a.$element).length&&(a.$element.data("bjui.datagrid.init.tab",!0),a.$element.datagrid("fixedHeight"))}},a));d(window).on(BJUI.eventType.resizeGrid,d.proxy(function(){a.initFixedW&&String(a.options.width).endsWith("%")&&(a.$grid.parent().width(),a.fixedWidth(),a.options.hasChild&&a.options.childOptions&&a.$tbody.find("\x3e tr."+a.classnames.tr_child+":visible").each(function(){var a=d(this).prev().data("bjui.datagrid.child");a&&a.length&&a.datagrid("fixedWidth")}));String(a.options.height).endsWith("%")&&a.tools.setBoxbH()},a))};var q=d.fn.datagrid;d.fn.datagrid=l;d.datagrid=h;d.fn.datagrid.noConflict=function(){d.fn.datagrid=q;return this};d(document).on(BJUI.eventType.initUI,function(a){d(a.target).find('table[data-toggle\x3d"datagrid"]').each(function(){var a=d(this),e=a.data();a.length&&(e.options&&"string"===typeof e.options&&(e.options=e.options.toObj()),d.extend(e,"object"===typeof e.options&&e.options),l.call(a,e))})})}(jQuery);+function(d){function l(a){var b=arguments,e=a;return this.each(function(){var c=d(this),g=d.extend({},h.DEFAULTS,c.data(),"object"===typeof a&&a),f=c.data("bjui.tablefixed");f||c.data("bjui.tablefixed",f=new h(this,g));if("string"===typeof e&&d.isFunction(f[e]))if([].shift.apply(b),b)f[e].apply(f,b);else f[e]();else f.init()})}var h=function(a,b){this.$element=d(a);this.options=b;this.tools=this.TOOLS()};h.SCROLLW=18;h.DEFAULTS={width:"100%"};h.prototype.TOOLS=function(){return{getLeft:function(a){var b=0;a.prevAll().each(function(){b+=d(this).outerWidth()});return b},getRight:function(a){var b=0;a.prevAll().addBack().each(function(){b+=d(this).outerWidth()});return b-1},getCellNum:function(a){return a.prevAll().addBack().size()},getColspan:function(a){return a.attr("colspan")||1},getStart:function(a){var b=1;a.prevAll().each(function(){b+=parseInt(d(this).attr("colspan")||1)});return b},getPageCoord:function(a){for(var b={x:0,y:0};a;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent;return b},getOffset:function(a,b){if(!d.support.leadingWhitespace){var e=a.offset();return e={offsetX:(b.pageX||b.screenX)-e.left,offsetY:(b.pageY||b.screenY)-e.top}}e=b.target;void 0==e.offsetLeft&&(e=e.parentNode);e=this.getPageCoord(e);return e={offsetX:window.pageXOffset+b.clientX-e.x,offsetY:window.pageYOffset+b.clientY-e.y}}}};h.prototype.resetWidth=function(){var a=this.$element,b=a.width(),e=(a=a.find("table"))&&a.width(),c=a.eq(0)&&a.eq(0).find("tr:first-child \x3e th"),g=a.eq(1)&&a.eq(1).find("tr:first-child \x3e td");if(a&&b-e<h.SCROLLW){var f=parseInt((b-e)/c.length);a.width(b-h.SCROLLW);c.each(function(a){var b=parseInt(d(this).css("width"));d(this).width(b+f);g.eq(a)&&g.eq(a).width(b+f)})}};h.prototype.init=function(){if(this.$element.isTag("table")){this.$container=this.$element.parent().addClass("bjui-resizeGrid");this.$fixed=void 0;var a=this.$container.width(),b=this.options.height;this.$container.hasClass("tab-pane")&&(a=this.$container.parent().width()-20);"string"===typeof this.options.width&&this.options.width.indexOf("%")?this.options.newWidth=a*(this.options.width.replace("%","")/100):this.options.newWidth=parseInt(this.options.width);this.options.styles=[];this.$element.wrap('\x3cdiv class\x3d"bjui-tablefixed clearfix"\x3e\x3c/div\x3e');this.$fixed=this.$element.parent();this.initHead();this.initBody();this.resizeCol();this.resizeGrid();b&&!this.$fixed.closest(".tab-content").length&&this.$fixed.height(b).addClass("fixedH")}};h.prototype.initHead=function(){var a=this.options.styles=[],b=this.$element.find("thead \x3e tr"),e=b.eq(0).find("\x3e th"),c=0,g=[],f=[],m=-1;e.each(function(a){for(var b=d(this),c=parseInt(b.attr("colspan")||1),e=b.attr("width"),h=b.attr("align"),k="",n=0;n<c;n++)1==c&&e&&(k=' width\x3d"'+e+'"'),h&&b.removeAttr("align").addClass(h),g.push("\x3cth"+k+"\x3e\x3c/th\x3e");b.attr("colsNum",m+=c);f[a]=c});var k=g.length,n=d('\x3ctr class\x3d"resize-head"\x3e'+g.join("")+"\x3c/tr\x3e");if(1<b.length){var m=0,l=b.eq(1).find("\x3e th");d.each(f,function(a,b){b=parseInt(b);if(1<b)for(var c=parseInt(e.eq(a).attr("colsnum")),d=b-1;0<=d;d--){var f=l.eq(m++),g=c-d,h=f.attr("width"),k=f.attr("align"),p=n.find("\x3e th").eq(g);f&&f.length&&f.attr("colsnum",g);h&&p.attr("width",h);k&&f.addClass(k).removeAttr("align")}})}this.$fixed.html(this.$element.html());b=this.$fixed.find("thead");b.prepend(n);n.find("\x3e th").each(function(b){b=[];var e=d(this).innerWidth();b[0]=parseInt(e);c+=b[0];a[a.length]=b});c=parseInt((this.options.newWidth-h.SCROLLW-c)/k);k=b.find("\x3e tr:eq(0) \x3e th");this.options.$ths=k;k.each(function(b){var e=d(this);b=a[b];var f=e.attr("width");e.removeAttr("align").width(b[0]+c);b[0]+=c;f&&(b[0]=parseInt(f),e.width(f).removeAttr("width"))});b.find("\x3e tr:gt(0) \x3e th").each(function(){var a=d(this);a.html('\x3cdiv class\x3d"fixedtableCol"\x3e'+a.html()+"\x3c/div\x3e")});b.wrap('\x3cdiv class\x3d"fixedtableHeader" style\x3d"width:'+(this.options.newWidth-h.SCROLLW)+'px;overflow:hidden;"\x3e\x3cdiv class\x3d"fixedtableThead"\x3e\x3ctable class\x3d"table table-bordered" style\x3d"width:'+(this.options.newWidth-h.SCROLLW)+"px; max-width:"+(this.options.newWidth-h.SCROLLW)+'px;"\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e');this.$fixed.append('\x3cdiv class\x3d"resizeMarker" style\x3d"display:none; height:300px; left:57px;"\x3e\x3c/div\x3e\x3cdiv class\x3d"resizeProxy" style\x3d"left:377px; display:none; height:300px;"\x3e\x3c/div\x3e')};h.prototype.initBody=function(){var a=this,b=this.$fixed.find("\x3e tbody"),e;this.options.height?e=this.options.height-this.$fixed.find(".fixedtableHeader").height()+"px":(e="100%",d(document).one(BJUI.eventType.afterInitUI,function(b){b=a.$fixed.parent().height();a.$fixed.parent().css("overflow","hidden");a.$fixed.height(b).find(".fixedtableScroller").height(b-a.$fixed.find(".fixedtableHeader").height())}));b.wrap('\x3cdiv class\x3d"fixedtableScroller"'+('style\x3d"height:'+e+'; overflow-y:auto;"')+' style\x3d"width:'+this.options.newWidth+'px;"\x3e\x3cdiv class\x3d"fixedtableTbody"\x3e\x3ctable style\x3d"width:'+(this.options.newWidth-h.SCROLLW)+"px; max-width:"+(this.options.newWidth-h.SCROLLW)+'px;"\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e');this.$element.attr("class")?b.parent().addClass(this.$element.attr("class")):b.parent().addClass("table table-striped table-bordered table-hover");"undefined"!==typeof this.$element.attr("data-selected-multi")&&b.parent().attr("data-selected-multi",this.$element.attr("data-selected-multi"));b.before('\x3cthead\x3e\x3ctr class\x3d"resize-head"\x3e'+this.$fixed.find("thead \x3e tr").html()+"\x3c/tr\x3e\x3c/thead\x3e");this.options.$tds=b.prev().find("\x3e tr:first-child \x3e th");this.options.nowrap&&b.parent().addClass("nowrap");b.closest(".fixedtableScroller").scroll(function(a){a=d(this);var b=a.scrollLeft();a.prev().find("\x3e .fixedtableThead").css({position:"relative",left:-b});return!1})};h.prototype.resizeCol=function(){var a=this,b=this.$fixed,e=this.options.$ths,c=this.options.$tds,g=this.tools;b.find("thead \x3e tr:gt(0) \x3e th").each(function(f){var m=d(this);m.mouseover(function(d){var f=parseInt(b.find(".fixedtableThead").css("left"))||0;d=g.getOffset(m,d).offsetX;var k=e.eq(m.attr("colsnum"));if(5>m.outerWidth()-d)m.css("cursor","col-resize").off("mousedown.bjui.tablefixed.resize").on("mousedown.bjui.tablefixed.resize",function(d){b.find("\x3e .resizeProxy").show().css({left:g.getRight(k)+f+b.position().left,top:b.position().top,height:b.height(),cursor:"col-resize"}).basedrag({scop:!0,cellMinW:20,relObj:b.find(".resizeMarker"),move:"horizontal",event:d,stop:function(){var d=b.find(".resizeProxy").position().left,e=b.find(".resizeMarker").position().left,d=d-e-k.outerWidth()-9,f=g.getCellNum(k);k.width();var e=k.width()+d,f=c.eq(f-1),m=b.find("\x3e .fixedtableHeader .table").width();k.width(e);f.width(e);b.find(".table").width(m+d);b.find(".resizeMarker, .resizeProxy").hide();m+d+h.SCROLLW<a.options.newWidth?b.find(".fixedtableScroller").width(m+d+h.SCROLLW):(e=b.closest(".bjui-resizeGrid").innerWidth(),m+d+h.SCROLLW<e&&(e=m+d+h.SCROLLW),b.find(".fixedtableHeader").width(e-h.SCROLLW),b.find(".fixedtableScroller").width(e),b.width(e));b.data("resizeGrid",!0)}});b.find("\x3e .resizeMarker").show().css({left:g.getLeft(k)+f+b.position().left,top:b.position().top,height:b.height()})});else m.css("cursor","default").off("mousedown.bjui.tablefixed.resize");return!1})})};h.prototype.setOrderBy=function(a){var b=this.$element,e=b.find(".fixedtableCol"),c=d(BJUI.doRegional(FRAG.orderby,BJUI.regional.orderby));a=a||this.options;b.addClass("orderby");a.orderDirection&&(BJUI.ui.clientPaging||b.addClass(a.orderDirection),b.pagination("setClientOrder",{orderField:a.orderField,orderDirection:a.orderDirection}));e.length||(e=d('\x3cdiv class\x3d"fixedtableCol"\x3e'+b.html()+"\x3c/div\x3e").appendTo(b.empty()));c.data("orderField",a.orderField).appendTo(e).pagination("orderBy")};h.prototype.resizeGrid=function(){var a=this;d(window).on(BJUI.eventType.resizeGrid,function(){d("div.bjui-resizeGrid").each(function(){var b=d(this),e=b.width(),c=b.height(),g=b.find(".bjui-tablefixed"),f=g.find(".fixedtableThead").height(),m=a.options.newWidth,k;e&&b.find(".bjui-tablefixed").each(function(){var a=d(this);k=a.data("resizeGrid")?m:e;a.width(k);a.find(".table").width(k-h.SCROLLW);a.find(".fixedtableHeader").width(k-h.SCROLLW);a.find(".fixedtableScroller").width(k)});b.css("overflow","hidden");g.height(c).find(".fixedtableScroller").height(c-f)})})};var q=d.fn.tablefixed;d.fn.tablefixed=l;d.fn.tablefixed.Constructor=h;d.fn.tablefixed.noConflict=function(){d.fn.tablefixed=q;return this};d(document).on(BJUI.eventType.initUI,function(a){a=d(a.target).find('table[data-toggle\x3d"tablefixed"]');a.length&&l.call(a)});d(document).on(BJUI.eventType.afterInitUI,function(a){a=d(a.target).find("th[data-order-field]");a.length&&l.call(a,"setOrderBy")});d(document).on("click.bjui.tr.data-api","tr[data-id]",function(a){a=d(this);var b=a.closest("table"),e=b.data("selectedMulti"),c=a.attr("data-id"),g=b.closest(".unitBox").find("#bjui-selected");a.toggleClass("selected");e?(c=[],a.siblings(".selected").add(a.hasClass("selected")?a:"").each(function(){c.push(d(this).attr("data-id"))}),c=c.join(",")):(a.siblings().removeClass("selected"),a.hasClass("selected")||(c=""));g&&g.length?g.val(c):(g=d('\x3cinput type\x3d"hidden" id\x3d"bjui-selected" value\x3d"'+c+'"\x3e'),g.appendTo(b.closest(".unitBox")))})}(jQuery);+function(d){function l(a){var b=arguments,e=a;return this.each(function(){var c=d(this),g=d.extend({},h.DEFAULTS,c.data(),"object"===typeof a&&a),f=c.data("bjui.tabledit");f||c.data("bjui.tabledit",f=new h(this,g));if("string"===typeof e&&d.isFunction(f[e]))if([].shift.apply(b),b)f[e].apply(f,b);else f[e]();else f.init()})}var h=function(a,b){this.$element=d(a);this.options=b;this.tools=this.TOOLS();this.$tbody=this.$element.find("\x3e tbody");this.$tbody.length||(this.$tbody=d("\x3ctbody\x3e\x3c/tbody\x3e"),this.$element.append(this.$tbody));this.$numAdd=this.$btnAdd=null};h.DEFAULTS={singleNoindex:!0};h.EVENTS={afterDelete:"afterdelete.bjui.tabledit"};h.prototype.TOOLS=function(){var a=this;return{initSuffix:function(a){a.find("\x3e tr").each(function(a){d(this).find(":input, :file, a, label, div").each(function(){var b=d(this),e=b.attr("name"),f=b.val(),h=b.attr("for"),k=b.attr("id"),n=b.attr("href"),l=b.attr("data-group"),r=b.attr("data-suffix");e&&b.attr("name",e.replaceSuffix(a));h&&b.attr("for",h.replaceSuffix(a));k&&b.attr("id",k.replaceSuffix(a).replaceSuffix2(a));n&&b.attr("href",n.replaceSuffix(a));l&&b.attr("data-group",l.replaceSuffix(a));r&&b.attr("data-suffix",r.replaceSuffix(a));f&&0<=f.indexOf("#index#")&&b.val(f.replace("#index#",a+1));b.hasClass("no")&&(e=b.data("prefix")?b.data("prefix"):"",b.val(e+(a+1)))})})},initEnter:function(a){var b=a.find(":text");b.each(function(a){d(this).bind("keydown",function(c){if(c.which==BJUI.keyCode.ENTER){var d=a+1;b.eq(d)&&b.eq(d).focus();c.preventDefault()}})});this.initInput(a)},initInput:function(a){a.find("\x3e tr \x3e td").each(function(){var a=d(this).find(".input-hold");a.length||(a=d('\x3cspan class\x3d"input-hold" style\x3d"display:block; padding:0 4px; height:0px; font-size:12px; visibility:hidden;"\x3e\x3c/span\x3e'),d(this).append(a));if(d.support.leadingWhitespace)d(this).on("input",":text",function(b){a.text(d(this).val())});else d(this).on("propertychange",":text",function(b){a.text(d(this).val())})})},initTbody:function(){function b(a){a.removeClass("readonly").find("\x3e td *").each(function(){var a=d(this),b=a.closest("td"),c=b.data("val"),e=a.attr("data-toggle-old"),f=b.data("readonly");"undefined"===typeof c&&b.html();if(b.data("notread"))return!0;a.isTag("select")&&a.val(b.attr("data-val")).selectpicker("refresh").nextAll(".bootstrap-select").removeClass("readonly").find("button").removeClass("disabled");a.is(":checkbox")&&(a.closest(".icheckbox_minimal-purple").removeClass("disabled"),a.closest(".icheckbox_minimal-purple").find("ins").removeClass("readonly"));a.is(":radio")&&(a.closest(".iradio_minimal-purple").removeClass("disabled"),a.closest(".iradio_minimal-purple").find("ins").removeClass("readonly"));if(e){if("dosave"==e)return!0;a.removeAttr("data-toggle-old").attr("data-toggle",e);"spinner"==e&&a.spinner("destroy").spinner()}if(a.is(":text")||a.is("textarea"))a.off("keydown.readonly"),f&&a.prop("readonly",!0);a.find(".bjui-lookup, .bjui-spinner, .bjui-upload").show()});a.find('[data-toggle\x3d"doedit"]').attr("data-toggle","dosave").text("\u5b8c\u6210")}function e(a){a.addClass("readonly").find("\x3e td *").each(function(){var a=d(this),b=a.closest("td"),c=a.attr("data-toggle");if(b.data("notread"))return!0;a.isTag("select")&&a.nextAll(".bootstrap-select").addClass("readonly").find("button").addClass("disabled");a.is(":checkbox")&&(a.closest(".icheckbox_minimal-purple").addClass("disabled"),a.closest(".icheckbox_minimal-purple").find("ins").addClass("readonly"));a.is(":radio")&&(a.closest(".iradio_minimal-purple").addClass("disabled"),a.closest(".iradio_minimal-purple").find("ins").addClass("readonly"));if(c){if("doedit"==c||"dosave"==c)return!0;a.removeAttr("data-toggle").attr("data-toggle-old",c)}if(a.is(":text")||a.is("textarea"))a.on("keydown.readonly",function(a){a.preventDefault()});a.find(".bjui-lookup, .bjui-spinner, .bjui-upload").hide()});a.find('[data-toggle\x3d"dosave"]').attr("data-toggle","doedit").text("\u7f16\u8f91")}var c=a.$element,g=a.$tbody;g.find("\x3e tr").each(function(){var f=d(this),h=f.find("\x3e td"),k=c.data("bjui.tabledit.tr").clone().find("\x3e th");f.data("bjui.tabledit.oldTds",f.html());k.each(function(a){a=h.eq(a);var b=a.data("val"),c=d(this),e=c.children(),f=c.find(".pic-box");"undefined"===typeof b&&(b=a.html());!a.data("noedit")&&e.length&&(e.is("input:checkbox")||e.is("input:radio")?e.filter('[value\x3d"'+b+'"]').attr("checked","checked"):e.isTag("select")?e.find('option[value\x3d"'+a.data("val")+'"]').attr("selected","selected"):f.length?(a.data("val")&&c.find(".pic-name").val(a.data("val")),f.html(a.html())):e.hasClass("wrap_bjui_btn_box")?e.find("input[data-toggle]").attr("value",b+""):e.is("textarea")?e.html(b):e.attr("value",b+""),a.html(c.html()))});f.on("dblclick",d.proxy(function(a){b(f)},a)).initui();a.tools.initSuffix(g);e(f)});g.on("click.bjui.tabledit.readonly",'[data-toggle\x3d"doedit"]',function(a){b(d(this).closest("tr"))}).on("click.bjui.tabledit.readonly",'[data-toggle\x3d"dosave"]',function(b){var f=d(this).closest("tr");b=f.index();var g=a.options.callback;if(a.options.action){f.wrap('\x3cform action\x3d"" method\x3d"POST"\x3e\x3c/form\x3e');if(f.attr("data-id")){var h=c.find("\x3e thead \x3e tr:eq(0)").data("idname")||"id";f.before('\x3cinput type\x3d"hidden" name\x3d"'+h.replaceSuffix(b)+'" value\x3d"'+f.attr("data-id")+'"\x3e')}var l=f.parent().serializeArray();a.options.singleNoindex&&d.each(l,function(a,b){d.extend(b,{name:b.name.replaceSuffix(0)})});f.prev("input").remove();f.unwrap().isValid(function(b){b&&(g=g?g.toFunc():function(a){a[BJUI.keys.statusCode]==BJUI.statusCode.ok?e(f):f.bjuiajax("ajaxDone",a)},f.bjuiajax("doAjax",{url:a.options.action,data:l,type:a.options.type||"POST",callback:g}))})}else e(f)});a.tools.initEnter(g)},doAdd:function(){var b=a.$element;if(a.$numAdd&&a.$btnAdd)b.on("keydown.bjui.tabledit.add","thead .num-add",function(b){b.which==BJUI.keyCode.ENTER&&(a.$btnAdd.trigger("click.bjui.tabledit.add"),b.preventDefault())}).on("click.bjui.tabledit.add","thead .row-add",function(d){var c=1;isNaN(a.$numAdd.val())||(c=parseInt(a.$numAdd.val()));a.add(b,c);d.preventDefault()})},doDel:function(a){var b=this;a.off("click.bjui.tabledit.del").on("click.bjui.tabledit.del",".row-del",function(a){var c=d(this);c.data("confirmMsg")?c.alertmsg("confirm",c.data("confirmMsg"),{okCall:function(){b.delData(c)}}):b.delData(c);a.preventDefault()})},delData:function(b){var d=this,c=b.closest("tbody"),g=b.data(),f=function(e){b.closest("tr").remove();d.initSuffix(c);d.afterDelete(c);g.callback&&g.callback.toFunc().apply(a,[e])};b.is("[href^\x3djavascript:]")||b.is('[href^\x3d"#"]')?f():b.bjuiajax("doAjax",{url:b.attr("href"),data:g.data,callback:f})},afterDelete:function(b){b=d.Event(h.EVENTS.afterDelete,{relatedTarget:b[0]});a.$element.trigger(b);b.isDefaultPrevented()}}};h.prototype.init=function(){var a=this,b=this.tools,e=this.$element.addClass("bjui-tabledit"),c=e.find("\x3e thead \x3e tr:first"),g=this.$tbody,f=e.find("\x3e thead \x3e tr:first").html();c.find("\x3e th").each(function(){var b=d(this),c=b.attr("title"),e=b.data("addtool");c&&b.html(c);e&&(c=d('\x3cspan style\x3d"position:relative;"\x3e\x3c/span\x3e'),b.empty(),a.$numAdd=d('\x3cinput type\x3d"text" value\x3d"1" class\x3d"form-control num-add" size\x3d"2" title\x3d"\u5f85\u6dfb\u52a0\u7684\u884c\u6570"\x3e'),a.$btnAdd=d('\x3ca href\x3d"javascript:;" class\x3d"row-add" title\x3d"\u6dfb\u52a0\u884c"\x3e\x3ci class\x3d"fa fa-plus-square"\x3e\x3c/i\x3e\x3c/a\x3e'),c.append(a.$numAdd).append(a.$btnAdd).appendTo(b))});e.data("bjui.tabledit.tr",d("\x3ctr\x3e"+f+"\x3c/tr\x3e"));b.initTbody();b.doAdd();b.doDel(g)};h.prototype.add=function(a,b){for(var e=this.tools,c=a.find("\x3e tbody"),g,f=a.data("bjui.tabledit.tr"),h=0;h<b;h++){f.find("\x3e th").each(function(){d(this).replaceWith("\x3ctd\x3e"+d(this).html()+"\x3c/td\x3e")});var k=f.clone();h||(g=k);k.hide().appendTo(c);e.initSuffix(c);e.initEnter(c);k.show().css("display","").initui()}g&&g.length&&g.find(":text").each(function(){var a=d(this);if(!a.prop("readonly"))return a.focus(),!1})};var q=d.fn.tabledit;d.fn.tabledit=l;d.fn.tabledit.Constructor=h;d.fn.tabledit.noConflict=function(){d.fn.tabledit=q;return this};d(document).on(BJUI.eventType.initUI,function(a){a=d(a.target).find('table[data-toggle\x3d"tabledit"]');a.length&&l.call(a)});d(document).on(BJUI.eventType.afterInitUI,function(a){d(a.target).find('table[data-toggle\x3d"tabledit"]').each(function(){if(d(this).is("[data-initnum]")){var a=d(this).data("initnum");0<a&&l.call(d(this),"add",d(this),a)}})});d(document).on("click.bjui.tabledit.data-api",'[data-toggle\x3d"tableditadd"]',function(a){var b=d(this),e=b.data("num")||1,c=b.data("target");c&&d(c).length&&d(c).isTag("table")&&(l.call(b,"add",d(c),e),a.preventDefault())})}(jQuery);+function(d){function l(a){var b=arguments,e=a;return this.each(function(){var c=d(this),g=d.extend({},h.DEFAULTS,c.data(),"object"===typeof a&&a),f=c.data("bjui.spinner");f||c.data("bjui.spinner",f=new h(this,g));if("string"===typeof e&&d.isFunction(f[e]))if([].shift.apply(b),b)f[e].apply(f,b);else f[e]();else f.init()})}var h=function(a,b){this.$element=d(a);this.options=b;this.tools=this.TOOLS();this.$spinner=null;this.height=this.$element.addClass("form-control").innerHeight();this.ivalue=Number(this.$element.val())||0};h.DEFAULTS={min:0,max:100,step:1,decimalPlace:0};h.EVENTS={afterChange:"afterchange.bjui.spinner"};h.prototype.TOOLS=function(){var a=this;return{changeVal:function(b){var d=a.$element,c=Number(d.val())||Number(a.ivalue);b=b.data("add")||-1;var g=a.options.min,f=a.options.max,m=a.options.step;1==b?c<=f-m&&(c+=m):-1==b?c>=g+m&&(c-=m):c>f?c=f:c<g&&(c=g);a.options.decimalPlace&&(c=new String(c.toFixed(a.options.decimalPlace)));a.ivalue=c;d.val(c).trigger(h.EVENTS.afterChange,{value:c})}}};h.prototype.init=function(){isNaN(this.options.min)||isNaN(this.options.max)||isNaN(this.options.step)?BJUI.debug("Spinner Plugin: Parameter is non-numeric type!"):this.addBtn()};h.prototype.addBtn=function(){var a=this,b=a.$element;if(!this.$lookBtn&&!b.parent().hasClass("wrap_bjui_btn_box")){this.$spinner=d(FRAG.spinnerBtn);b.css({paddingRight:"13px"}).wrap('\x3cspan class\x3d"wrap_bjui_btn_box"\x3e\x3c/span\x3e');b=b.parent();b.css("position","relative");this.$spinner.css({height:this.height}).appendTo(b);this.$spinner.on("selectstart",function(){return!1});var e=null;a.$spinner.find("li").on("click",function(b){a.tools.changeVal(d(this))}).on("mousedown",function(){var b=d(this);e=setInterval(function(){a.tools.changeVal(b)},150)}).on("mouseup",function(){clearTimeout(e)})}};h.prototype.destroy=function(){this.$element.parent().hasClass("wrap_bjui_btn_box")&&(this.$element.parent().find(".bjui-spinner").remove(),this.$element.unwrap())};var q=d.fn.spinner;d.fn.spinner=l;d.fn.spinner.Constructor=h;d.fn.spinner.noConflict=function(){d.fn.spinner=q;return this};d(document).on(BJUI.eventType.initUI,function(a){a=d(a.target).find('input[data-toggle\x3d"spinner"]');a.length&&l.call(a)})}(jQuery);+function(d){function l(a){var c=arguments,e=a;return this.each(function(){var f=d(this),g=d.extend({},b.DEFAULTS,f.data(),"object"===typeof a&&a),h=f.data("bjui.lookup");h?f.data("newurl")&&(h.options.url=f.data("newurl"),f.data("bjui.dialog",null)):f.data("bjui.lookup",h=new b(this,g));if("string"===typeof e&&d.isFunction(h[e]))if([].shift.apply(c),c)h[e].apply(h,c);else h[e]();else h.init()})}var h,q,a,b=function(a,b){this.$element=d(a);this.options=b;this.$lookBtn=null};b.DEFAULTS={url:null,id:null,mask:!0,width:600,height:400,title:"Lookup",maxable:!0,resizable:!0};b.EVENTS={afterChange:"afterchange.bjui.lookup"};b.prototype.init=function(){var b=this.options;if(b.url){b.url=decodeURI(b.url).replacePlh(this.$element.closest(".unitBox"));if(!b.url.isFinishedTm())return this.$element.alertmsg("error",b.warn||BJUI.regional.plhmsg),BJUI.debug("Lookup Plugin: The lookup's url is incorrect, url:"+b.url),!1;b.url=encodeURI(b.url)}else return BJUI.debug("Lookup Plugin: Error trying open a lookup dialog, url is undefined!"),!1;h=this.options.group||null;q=this.options.suffix||null;a=this.$element;q&&(q=q.trim());this.open(this.$element)};b.prototype.addBtn=function(){var a=this,b=a.$element;if(!this.$lookBtn&&!b.parent().hasClass("wrap_bjui_btn_box")){this.$lookBtn=d(FRAG.lookupBtn);this.$element.css({paddingRight:"15px"}).wrap('\x3cspan class\x3d"wrap_bjui_btn_box"\x3e\x3c/span\x3e');var b=this.$element.parent(),e=this.$element.addClass("form-control").innerHeight();b.css({position:"relative",display:"inline-block"});d.each(a.options,function(b,c){"toggle"!=b&&a.$lookBtn.data(b,c)});this.$lookBtn.css({height:e,lineHeight:e+"px"}).appendTo(b);this.$lookBtn.on("selectstart",function(){return!1})}};b.prototype.open=function(a){var b=this.options;a.dialog({id:b.id||"lookup_dialog",url:b.url,title:b.title,width:b.width,height:b.height,mask:b.mask,maxable:b.maxable,resizable:b.resizable})};b.prototype.getField=function(a){return(h?h+".":"")+a+(q?q:"")};b.prototype.setSingle=function(a,b){"string"===typeof a&&(a=(new Function("return "+a))());this.setVal(a,b)};b.prototype.setMult=function(a,b){var c={};this.$element.closest(".unitBox").find('[name\x3d"'+a+'"]').filter(":checked").each(function(){var a=(new Function("return "+d(this).val()))(),b;for(b in a)c[b]=(c[b]?c[b]+",":"")+a[b]});d.isEmptyObject(c)?this.$element.alertmsg("error",this.$element.data("warn")||BJUI.regional.selectmsg):this.setVal(c,b)};b.prototype.setVal=function(c,e){var f=this,g=a.closest(".unitBox"),h;a.data("customEvent")?a.trigger("customEvent.bjui.lookup",[c]):g.find(":input").each(function(){var a=d(this),g=a.attr("name"),m;for(m in c)if(f.getField(m)==g){h=1==e?a.val()?a.val()+","+c[m]:c[m]:c[m];a.val(h).trigger(b.EVENTS.afterChange,{value:c[m]});break}});this.$element.dialog("closeCurrent")};var e=d.fn.lookup;d.fn.lookup=l;d.fn.lookup.Constructor=b;d.fn.lookup.noConflict=function(){d.fn.lookup=e;return this};d(document).on(BJUI.eventType.initUI,function(a){a=d(a.target).find('[data-toggle\x3d"lookup"]');a.length&&l.call(a,"addBtn")});d(document).on("click.bjui.lookup.data-api",'[data-toggle\x3d"lookupbtn"]',function(a){var b=d(this);b.attr("href")&&!b.data("url")&&b.attr("data-url",b.attr("href"));b.data("title")||b.attr("data-title",b.text());l.call(b);a.preventDefault()});d(document).on("click.bjui.lookupback.data-api",'[data-toggle\x3d"lookupback"]',function(a){var b=d(this),c=b.data("args"),e=b.data("lookupid"),h=d('input[name\x3d"lookupType"]:checked').val();c?l.call(b,"setSingle",c,h):e&&l.call(b,"setMult",e,h);a.preventDefault()})}(jQuery);+function(d){function l(a){var b=arguments,c=a;return this.each(function(){d(this);var e={};d.extend(!0,e,n.DEFAULTS,"object"===typeof a&&a);e=new n(this,e);if("string"===typeof c&&d.isFunction(e[c]))if([].shift.apply(b),b)e[c].apply(e,b);else e[c]();else e.init()})}var h,q,a,b,e,c,g,f,m,k,n=function(a,b){this.$element=d(a);this.options=b;this.$findBtn=null};n.DEFAULTS={pk:null,oldData:null,group:null,suffix:null,include:null,exclude:null,multiple:!1,append:!1,empty:!0,dialogOptions:{id:null,mask:!0,width:600,height:400,title:"FindGrid",maxable:!0,resizable:!0},gridOptions:{width:"100%",height:"100%",columnMenu:!1,sortAll:!0,filterAll:!0,fullGrid:!0},context:null,onSelect:null};n.EVENTS={afterChange:"afterchange.bjui.findgrid"};n.getField=function(a){return(h?h+".":"")+a+(q?q:"")};n.empty=function(){if(b){for(var a=b.split(","),c=m.find(":text, :input:hidden, textarea, select"),d={},e=0;e<a.length;e++){var f=a[e].split(":"),g;2==f.length?(g=f[0].trim(),f=f[1].trim()):f=g=a[e].trim();d[this.getField(g)]=!0}for(f in d)c.filter('[name\x3d"'+f+'"]').val("").trigger(n.EVENTS.afterChange,{value:"",data:""})}else BJUI.debug("FindGrid Plugin: No set options 'include' !")};n.setSingle=function(a){var c=this,f=function(b,d,e){c.getField(d)==b.attr("name")&&(b.val(e).trigger(n.EVENTS.afterChange,{value:e,data:a}),b.isTag("select")&&b.data("toggle")&&"selectpicker"===b.data("toggle")&&b.selectpicker("refresh"))};m.find("input:text, input:hidden, textarea, select").each(function(){var c=d(this),g,h=[];if(b)for(var m=b.split(","),k=0;k<m.length;k++){var l=m[k].split(":");2==l.length?(g=l[0].trim(),l=l[1].trim()):l=g=m[k].trim();"undefined"!==typeof a[l]&&f(c,g,a[l])}else for(l in a){if(e&&(d.each(e.split(","),function(a,b){h.push(b.trim())}),-1!=d.inArray(l,h)))continue;f(c,l,a[l])}})};n.setMult=function(h){if("function"===typeof f)f.call(l,t.data);else{var l=this,r=d("#"+h).data("selectedDatas"),t,q,u=function(a){a.isTag("select")&&a.data("toggle")&&"selectpicker"===a.data("toggle")&&a.selectpicker("refresh")};if(r&&r.length){h=m.find("input:text, input:hidden, textarea, select");var v,y={},w={},B=[],E;!c&&g&&(g=[]);if(b)for(var F=b.split(","),D=0;D<F.length;D++){var C=F[D].split(":");2==C.length?(v=C[0].trim(),C=C[1].trim()):C=v=F[D].trim();y[l.getField(v)]=C}else for(C in r[0])e?(d.each(e.split(","),function(a,b){B.push(b.trim())}),-1===d.inArray(C,B)&&(y[l.getField(C)]=C)):y[l.getField(C)]=C;h=d(d.map(h,function(a){var b=d(a).attr("name");if(!b||!y[b])return null;w[b]=y[b];return a}));for(l=0;l<r.length;l++)t=r[l],g&&-1!=d.inArray(t[a],g)||h.each(function(b){var e=d(this),f=e.attr("name"),h=e.val();q||(q=[]);q[b]||(q[b]=[]);c?h&&(q[b].push(h),e.isTag("select")&&e.prop("multiple")&&(q[b]="array"===d.type(h)?h:[])):(e.val(""),u(e));q[b].push(t[w[f]]);g&&-1===d.inArray(t[a],g)&&g.push(t[a])});q&&h.each(function(a){var b=d(this);E=q[a].join(",");b.isTag("select")&&b.prop("multiple")&&(E=q[a]);b.val(E).trigger(n.EVENTS.afterChange,{value:E,data:r});k.data("oldData",g);u(b)});BJUI.dialog("closeCurrent")}}};n.prototype.init=function(){var c=this.options;h=c.group||null;q=c.suffix||null;k=this.$element;g=c.oldData;a=c.pk||null;b=c.include||null;e=c.exclude||null;c.context&&(m=c.context instanceof jQuery?c.context:d(c.context));m&&m.length||(m=this.$element.closest(".unitBox"));q&&(q=q.trim());a?k.data("oldData")?g=k.data("oldData"):"undefined"!==typeof g?"string"===typeof g?g=g.split(","):d.isArray(g)||(g=[]):g=[]:g=null;this.open(this.$element)};n.prototype.addBtn=function(){var a=this.$element,b=a.data("bjui.findgrid.options");if(!this.$findBtn&&!a.parent().hasClass("wrap_bjui_btn_box")){this.$findBtn=d(FRAG.findgridBtn);this.$element.css({paddingRight:"15px"}).wrap('\x3cspan class\x3d"wrap_bjui_btn_box"\x3e\x3c/span\x3e');var a=this.$element.parent(),c=this.$element.addClass("form-control").innerHeight();a.css({position:"relative",display:"inline-block"});delete b.toggle;this.$findBtn.data("bjui.findgrid.options",b);this.$findBtn.css({height:c,lineHeight:c+"px"}).appendTo(a);this.$findBtn.on("selectstart",function(){return!1})}};n.prototype.open=function(b){var e=this,h=this.options;b=h.dialogOptions;var m=h.gridOptions,k=(new Date).getTime();b.id||(b.id="dialog_findgrid_"+k);h.gridId||(h.gridId="datagrid_findgrid_"+k);m.showToolbar=!0;h.empty&&!m.toolbarCustom&&(m.toolbarCustom="");h.multiple&&("undefined"===typeof m.showCheckboxcol&&(m.showCheckboxcol=!0),m.toolbarCustom||(m.toolbarCustom=""),m.selectMult=!0,m.toolbarCustom+='\u3000\x3cbutton type\x3d"button" class\x3d"btn-blue" onclick\x3d"$.fn.findgrid.Constructor.setMult(\''+h.gridId+"')\"\x3e"+BJUI.getRegional("findgrid.choose")+"\x3c/button\x3e",m.toolbarCustom+='\u3000\x3clabel class\x3d"ilabel"\x3e\x3cinput type\x3d"checkbox" data-toggle\x3d"icheck" id\x3d"checkbox_findgrid_'+k+'" '+(h.append?"checked":"")+"\x3e\x26nbsp;"+BJUI.getRegional("findgrid.append")+"\x3c/label\x3e",h.append&&(c=!0));h.empty&&(m.toolbarCustom+='\u3000\x3cbutton type\x3d"button" class\x3d"btn-orange" onclick\x3d"$.fn.findgrid.Constructor.empty(\''+h.gridId+"')\"\x3e"+BJUI.getRegional("findgrid.empty")+"\x3c/button\x3e");delete b.url;delete b.target;h.onSelect?(f=h.onSelect,"string"===typeof f&&(f=f.toFunc())):f=null;b.html='\x3cdiv class\x3d"bjui-pageContent tableContent"\x3e\x3ctable id\x3d"'+h.gridId+'"\x3e\x3c/table\x3e\x3c/div\x3e';b.onLoad=function(b){b="#"+h.gridId;var l=d(b);l.datagrid(m);if(d.isArray(g)&&g.length&&a)d(document).on("afterLoad.bjui.datagrid",b,function(b,c){c.datas&&d.each(c.datas,function(b,c){c[a]&&"-1"!=d.inArray(c[a],g)&&l.datagrid("selectedRows",b,!0)})});if(!h.multiple)d(document).on("clicked.bjui.datagrid.tr",b,function(a,b){"function"===typeof f?f.call(e,b.data):(n.setSingle(b.data),BJUI.dialog("closeCurrent"))});d(document).on("ifChanged","#checkbox_findgrid_"+k,function(a){c=d(this).is(":checked")})};BJUI.dialog(b)};var v=d.fn.findgrid;d.fn.findgrid=l;d.fn.findgrid.Constructor=n;d.fn.findgrid.noConflict=function(){d.fn.findgrid=v;return this};d(document).on(BJUI.eventType.initUI,function(a){d(a.target).find('input[data-toggle\x3d"findgrid"]').each(function(){var a=d(this),b=a.data(),c=b.options;c&&("string"===typeof c&&(c=c.trim().startsWith("{")?c.toObj():c.toFunc()),"function"===typeof c&&(c=c.apply()),"object"===typeof c&&(delete b.options,d.extend(b,c)));a.data("bjui.findgrid.options",b);l.call(a,"addBtn")})});d(document).on("click.bjui.findgrid.data-api",'[data-toggle\x3d"findgridbtn"]',function(a){var b=d(this),c=b.data("bjui.findgrid.options");if(!c){var c=b.data(),e=c.options;e&&("string"===typeof e&&(e=e.trim().startsWith("{")?e.toObj():e.toFunc()),"function"===typeof e&&(e=e.apply()),"object"===typeof e&&(delete c.options,d.extend(c,e)))}delete c["bjui.findgrid.options"];l.call(b,c);a.preventDefault()})}(jQuery);+function(d){function l(a){var b=arguments,e=a;return this.each(function(){var c=d(this),g=d.extend({},h.DEFAULTS,c.data(),"object"===typeof a&&a),f=c.data("bjui.tags");f||c.data("bjui.tags",f=new h(this,g));if("string"===typeof e&&d.isFunction(f[e]))if([].shift.apply(b),b)f[e].apply(f,b);else f[e]();else f.init()})}var h=function(a,b){this.$element=d(a).addClass("tag-input");this.options=b;this.tools=this.TOOLS();this.$box=d(this.$element.wrap('\x3cdiv class\x3d"bjui-tags"\x3e\x3c/div\x3e')).parent();this.timeout=null;this.$tagsArr={};this.tags=[]};h.DEFAULTS={width:300,url:"",global:!1,type:"GET",tagname:"tag",max:0,clear:!1,lightCls:"tags-highlight"};h.EVENTS={afterCreated:"aftercreated.bjui.tags"};h.prototype.TOOLS=function(){var a=this,b=this.options;d(a.$element).val();return{keyDown:function(a){if(13==a.which)return!1},keyUp:function(e){switch(e.which){case BJUI.keyCode.BACKSPACE:if(!d.trim(a.$element.val()).length)return a.tools.removeMenu(),!1;break;case BJUI.keyCode.ESC:a.tools.removeMenu();break;case BJUI.keyCode.DOWN:if(!a.$menu||!a.$menu.length)break;e=a.$menu.find("\x3e ."+b.lightCls);var c=a.$menu.find("\x3e li:first-child");e.length?(e=e.removeClass(b.lightCls).next(),e.length?e.addClass(b.lightCls):c.addClass(b.lightCls)):c.addClass(b.lightCls);return!1;case BJUI.keyCode.UP:if(!a.$menu||!a.$menu.length)break;e=a.$menu.find("\x3e ."+b.lightCls);c=a.$menu.find("\x3e li:last-child");e.length?(e=e.removeClass(b.lightCls).prev(),e.length?e.addClass(b.lightCls):c.addClass(b.lightCls)):c.addClass(b.lightCls);return!1;case BJUI.keyCode.ENTER:if(0<b.max&&a.$tagsArr.length>=b.max)return!1;var g=e=!1,c=null,f=a.$menu&&a.$menu.find("\x3e ."+b.lightCls);if(f&&f.length)e=f.text(),c=f.data("item"),g=c.value;else{e=d.trim(a.$element.val());if(!e.length)return!1;if(b.clear&&-1==d.inArray(e,a.tags))return a.$element.val(""),!1;g=e}if(e){var h=!1;console.log(a);a.$tagsArr.length&&a.$tagsArr.each(function(){d(this).val()==g&&(h=!0)});if(h)return a.$element.val(""),!1;a.tools.createTag(e,g);a.tools.removeMenu();a.$element.val("");d.proxy(a.tools.onAfterCreated(c,g),a);return!1}}},query:function(){a.timeout&&clearTimeout(a.timeout);a.timeout=setTimeout(a.tools.doQuery,300)},doQuery:function(){if(!(0<b.max&&a.$tagsArr.length>=b.max)){var e=a.$element.val(),c=a.$box.find("\x3e .tags-menu"),g=[],f=null,h=a.$element.closest(".navtab-panel").length?d.CurrentNavtab:d.CurrentDialog;a.$element.closest(".bjui-layout").length&&(h=a.$element.closest(".bjui-layout"));e.length&&(a.$element.one("ajaxStart",function(){h.trigger("bjui.ajaxStart")}).one("ajaxStop",function(){h.trigger("bjui.ajaxStop")}),d.ajax({url:b.url,global:b.global,type:b.type,data:{term:e},dataType:"json",success:function(e){if(0!=e.length){c.length||(c=d('\x3cul class\x3d"tags-menu"\x3e\x3c/ul\x3e'));c.empty().hide().appendTo(a.$box);for(var h=0;h<e.length;h++)f=d('\x3cli class\x3d"tags-item"\x3e'+e[h].label+"\x3c/li\x3e").data("item",e[h]),f.appendTo(c),g.push(e[h].label);a.tags=g;c.css({top:a.$element.position().top+a.$element.outerHeight(),left:a.$element.position().left}).fadeIn().find("\x3e li").hover(function(){d(this).addClass(b.lightCls).siblings().removeClass(b.lightCls)},function(){d(this).removeClass(b.lightCls)}).click(function(){var b=d(this).text(),e=d(this).data("item"),f=e.value,g=!1;a.$box.find("input:hidden").each(function(){d(this).val()==f&&(g=!0)});g?(a.$element.val(""),c.remove()):(d.proxy(a.tools.createTag(b,f),a),c.remove(),a.$element.val(""),d.proxy(a.tools.onAfterCreated(e,f),a))});a.$menu=c}}}))}},createTag:function(b,c){var e=d('\x3cspan class\x3d"label label-tag" data-value\x3d"'+c+'" style\x3d"margin-left: 1px; margin-top: 1px;"\x3e\x3ci class\x3d"fa fa-tag"\x3e\x3c/i\x3e '+b+'\x26nbsp;\x26nbsp;\x3ca href\x3d"#" class\x3d"close"\x3e\x26times;\x3c/a\x3e\x3c/span\x3e');e.insertBefore(a.$element).find("a.close").click(function(){var b=e.data("value");a.$box.find("input:hidden").each(function(){d(this).val()==b&&d(this).remove()});e.remove();a.$tagsArr=a.$box.find('input[name\x3d"'+a.options.tagname+'"]')});d('\x3cinput type\x3d"hidden" name\x3d"'+a.options.tagname+'"\x3e').val(c).appendTo(a.$box);a.$tagsArr=a.$box.find('input[name\x3d"'+a.options.tagname+'"]')},removeMenu:function(){a.$menu&&a.$menu.remove()},onAfterCreated:function(b,c){var e=[];a.$tagsArr.length&&a.$tagsArr.each(function(){e.push(d(this).val())});a.$element.trigger(h.EVENTS.afterCreated,{item:b,value:c,tags:e.join(",")})}}};h.prototype.init=function(){var a=this,b=this.$element,e=this.options;if(e.url)if(e.url=decodeURI(e.url).replacePlh(b.closest(".unitBox")),e.url.isFinishedTm())if(e.url=encodeURI(e.url),isNaN(this.options.max))BJUI.debug("Tags Plugin: Parameter 'max' is non-numeric type!");else{var c=b.val();c&&(c=c.split(/,|\||\s/),d.each(c,function(b,c){a.tools.createTag(c,c)}),b.val(""));a.$box.width(e.width).on("click",function(){b.focus()});b.on("keydown",d.proxy(this.tools.keyDown,this)).on("keyup",d.proxy(this.tools.keyUp,this));if(d.support.leadingWhitespace)b.on("input",d.proxy(this.tools.query,this));else b.on("propertychange",d.proxy(this.tools.query,this));d(document).on("click.bjui.tags",d.proxy(function(a){d(a.target).closest(this.$box).length||this.tools.removeMenu()},this))}else b.alertmsg("error",e.warn||BJUI.regional.plhmsg),BJUI.debug("Tags Plugin: The query tags url is incorrect, url: "+e.url);else BJUI.debug("Tags Plugin: Do query tags, url is undefined!")};h.prototype.destroy=function(){this.$tags&&(this.$element.upwrap(),$tags.remove())};var q=d.fn.tags;d.fn.tags=l;d.fn.tags.Constructor=h;d.fn.tags.noConflict=function(){d.fn.tags=q;return this};d(document).on(BJUI.eventType.initUI,function(a){a=d(a.target).find('input[data-toggle\x3d"tags"]');a.length&&l.call(a)})}(jQuery);+function(d){function l(a){var b=arguments,e=a;if(window.FileReader)return this.each(function(){var c=d(this),g=d.extend({},h.DEFAULTS,c.data(),"object"===typeof a&&a),f=c.data("bjui.upload");f||c.data("bjui.upload",f=new h(this,g));if("string"===typeof e&&d.isFunction(f[e]))if([].shift.apply(b),b)f[e].apply(f,b);else f[e]();else f.init()});this.each(function(){if(d.fn.uploadify){var a={swf:BJUI.PLUGINPATH+"uploadify/scripts/uploadify.swf",fileTypeExts:"*.jpg;*.png",id:"fileInput",fileObjName:"file",fileSizeLimit:204800,buttonText:"\u9009\u62e9\u4e0a\u4f20\u6587\u4ef6",auto:!1,multi:!1,height:24},b=d(this),e=b.data();e.id||(e.id=b.attr("id"));d.extend(a,e);if(a.uploader)if(a.uploader=decodeURI(a.uploader).replacePlh(b.closest(".unitBox")),a.uploader.isFinishedTm()){a.uploader=encodeURI(a.uploader);"fileInput"==a.id&&(a.id+=(new Date).getTime());var h=d('\x3cinput type\x3d"file" name\x3d"'+a.name+'" id\x3d"'+a.id+'"\x3e');a.onInit&&"string"===typeof a.onInit&&(a.onInit=a.onInit.toFunc());a.onCancel&&"string"===typeof a.onCancel&&(a.onCancel=a.onCancel.toFunc());a.onSelect&&"string"===typeof a.onSelect&&(a.onSelect=a.onSelect.toFunc());a.onUploadSuccess&&"string"===typeof a.onUploadSuccess&&(a.onUploadSuccess=a.onUploadSuccess.toFunc());a.onUploadComplete&&"string"===typeof a.onUploadComplete&&(a.onUploadComplete=a.onUploadComplete.toFunc());a.onUploadError&&"string"===typeof a.onUploadError&&(a.onUploadError=a.onUploadError.toFunc());h.appendTo(b);if(!a.auto){var k=d('\x3cbutton class\x3d"btn btn-orange" data-icon\x3d"cloud-upload"\x3e\u5f00\u59cb\u4e0a\u4f20\x3c/button\x3e');k.hide().insertAfter(b).click(function(){h.uploadify("upload","*");d(this).hide()});a.onSelect=function(){k.show()}}h.uploadify(a)}else b.alertmsg("error",a.warn||BJUI.regional.plhmsg),BJUI.debug("Upload Plugin: The options uploader is incorrect: "+a.uploader);else BJUI.debug("Upload Plugin: The options uploader is undefined!")}})}var h=function(a,b){this.$element=d(a);this.options=b;this.tools=this.TOOLS()};h.DEFAULTS={fileTypeExts:"*.jpg;*.png",uploader:"",auto:!1,method:"POST",multi:!1,formData:{},fileObjName:"file",fileSizeLimit:204800,previewImg:!0,previewLoadimg:null,dragDrop:!1,showUploadedPercent:!0,showUploadedSize:!0,buttonText:"\u4e0a\u4f20\u6587\u4ef6",removeTimeout:1E3,itemTemplate:FRAG.uploadTemp,breakPoints:!1,fileSplitSize:1048576,onUploadStart:null,onUploadSuccess:null,onUploadComplete:null,onUploadError:null,onInit:null,onCancel:null,onSelect:null};h.MIMETYPES={zip:["application/x-zip-compressed"],jpg:["image/jpeg"],png:["image/png"],gif:["image/gif"],swf:["application/x-shockwave-flash"],doc:["application/msword"],xls:["application/vnd.ms-excel"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["application/vnd.ms-powerpoint"],pptx:["application/vnd.openxmlformats-officedocument.presentationml.presentation"],mp3:["audio/mpeg"],mp4:["video/mp4"],pdf:["application/pdf"],txt:["text/plain"],xml:["text/xml"]};h.prototype.TOOLS=function(){var a=this,b=this.options,e={formatFileSize:function(a,b){return a=1048576<a&&!b?(Math.round(100*a/1048576)/100).toString()+"MB":(Math.round(100*a/1024)/100).toString()+"KB"},getFile:function(a,b){for(var c=0;c<b.length;c++)if(b[c].index==a)return b[c];return!1},getFileTypes:function(a){var b=[];a=a.split(";");for(var c=0;c<a.length;c++)b.push(a[c].split(".").pop());return b},getMimetype:function(a){return h.MIMETYPES[a]},getAcceptString:function(a){a=this.getFileTypes(a);for(var b=[],c=0;c<a.length;c++){var d=this.getMimetype(a[c]);d?b.push(d):b.push("."+a[c])}return b.join(",")},filter:function(c){var e=[],f=this.getFileTypes(b.fileTypeExts);if(0<f.length)for(var h=0;h<c.length;h++){var k=c[h];parseInt(this.formatFileSize(k.size,!0))>b.fileSizeLimit?a.$element.alertmsg("error",'\u6587\u4ef6"'+k.name+'"\u5927\u5c0f\u8d85\u51fa\u9650\u5236\uff01'):0<=d.inArray(k.name.split(".").pop().toLowerCase(),f)||"*"==b.fileTypeExts?e.push(k):a.$element.alertmsg("error",'\u6587\u4ef6"'+k.name+'"\u7c7b\u578b\u4e0d\u5141\u8bb8\uff01')}return e},getFiles:function(b){b=b.target.files||b.dataTransfer.files;b=this.filter(b);for(var c=0;c<b.length;c++)b[c].id=b[c].lastModifiedDate.getTime()+"_"+b[c].size+"_"+(b[c].type||"").replace(/\W/g,""),this.renderQueueItem(b[c]),a.queueData.files++;return b},renderQueueItem:function(c){var e=0,f=d(b.itemTemplate.replace("{fileId}",c.id).replace("{fileName}",c.name).replace("#upConfirm#",BJUI.regional.upload.upConfirm).replace("#upPause#",BJUI.regional.upload.upPause).replace("#upCancel#",BJUI.regional.upload.upCancel).replace("{percent}","0.00%").replace("{uploadedSize}","0KB").replace("{fileSize}",this.formatFileSize(c.size)));b.auto&&f.find("\x3e .info \x3e .up_confirm").remove();f.data("upfile",c);a.$uploadFileList.append(f);b.breakPoints&&(e=this.getUploadedSize(c.id),e>c.size&&(e=c.size));this.showProgress(c.id,e,c.size);if(b.previewImg&&-1!=c.type.indexOf("image")){var h=f.find("\x3e .preview \x3e .img");b.previewLoadimg&&h.html('\x3cimg src\x3d"'+b.previewLoadimg+'" height\x3d"114"\x3e');this.previewImg(c,h)}else f.find("\x3e .preview").remove();b.showUploadedSize?(h=f.find("\x3e .filesize"),h.find("\x3e .uploadedsize").html(this.formatFileSize(e)),h.find("\x3e .filesize").html(this.formatFileSize(c.size))):f.find("\x3e .filesize").remove();b.showUploadedPercent?f.find("\x3e .percent").html((e/c.size*100).toFixed(2)+"%"):f.find("\x3e .percent").remove();b.onSelect&&b.onSelect(files);b.auto&&a.fileUpload(c,e);f.on("click.bjui.upload.confirm",".up_confirm",function(b){b=d(this);var c=b.closest(".item");b.hide().next().show();a.fileUpload(c.data("upfile"),e)});f.on("click.bjui.upload.cancel",".up_cancel",this.removeQueueItem)},successQueueItem:function(c,g){e.showProgress(c.id,c.size,c.size);b.onUploadSuccess&&b.onUploadSuccess.toFunc().call(a,c,g.responseText,a.$element);setTimeout(function(){a.$element.find("#"+c.id).fadeOut("normal",function(){d(this).remove();a.$element.find("\x3e .queue \x3e .item:visible").length||(a.$element.find("\x3e .queue").hide(),a.$file.val(""))})},b.removeTimeout)},removeQueueItem:function(b,e){e&&e.abort();d(this).closest(".item").fadeOut("normal",function(){d(this).remove();a.$element.find("\x3e .queue \x3e .item:visible").length||a.$element.find("\x3e .queue").hide()});b.preventDefault()},previewImg:function(a,b){if(a&&b.length){var c=new FileReader;c.onload=function(a){b.html('\x3cimg src\x3d"'+a.target.result+'"\x3e')};c.readAsDataURL(a)}},showProgress:function(b,d,e){var c=d/e*100+"%";a.tools.formatFileSize(d);(d/e*100).toFixed(2);a.$element.find("#"+b+" \x3e .progress \x3e .bar").css("width",c)},getUploadedSize:function(a){return 1*localStorage.getItem(a)},saveUploadedSize:function(a,b){localStorage.setItem(a,b)},sendBlob:function(a,d,e,h){var c=new FormData;d.open(b.method,a,!0);d.setRequestHeader("X-Requested-With","XMLHttpRequest");c.append(b.fileObjName,e);if(h)for(var f in h)c.append(f,h[f]);d.send(c)}};return e};h.prototype.init=function(){var a=this,b=this.$element,e=this.options;if(e.uploader)if(e.uploader=decodeURI(e.uploader).replacePlh(b.closest(".unitBox")),e.uploader.isFinishedTm()){if(e.uploader=encodeURI(e.uploader),!b.hasClass("bjui-upload")){e.formData&&"string"===typeof e.formData&&(e.formData=e.formData.toObj());var c=d(FRAG.uploadFrag.replaceAll("#multi#",e.multi?"multiple":"").replaceAll("#accept#",a.tools.getAcceptString(e.fileTypeExts)).replaceAll("#btnTxt#",(e.icon?'\x3ci class\x3d"fa fa-'+e.icon+'"\x3e\x26nbsp;\x26nbsp;':"")+e.buttonText));b.addClass("bjui-upload").append(c);this.$file=b.find("\x3e .bjui-upload-select-file");this.$uploadFileList=b.find("\x3e .queue");this.queueData={files:0,success:0,error:0};b.on("change.bjui.upload",".bjui-upload-select-file",function(b){a.fileSelect(b)}).on("click.bjui.upload",".bjui-upload-select",function(b){a.$file.trigger("click")});e.onInit&&e.onInit();e.dragDrop&&(b[0].ondragover=function(a){a.preventDefault();return!0},b[0].ondrop=function(b){a.fileSelect(b);b.stopPropagation();b.preventDefault()})}}else b.alertmsg("error",e.warn||BJUI.regional.plhmsg),BJUI.debug("Upload Plugin: The options uploader is incorrect: "+e.uploader);else BJUI.debug("Upload Plugin: The options uploader is undefined!")};h.prototype.fileSelect=function(a){this.$uploadFileList.show();this.tools.getFiles(a)};h.prototype.fileUpload=function(a,b){var e=this,c=e.$element,g=e.options,f=e.tools,h=!1,k=a,h=new XMLHttpRequest;g.breakPoints&&(a=k.slice(b,b+g.fileSplitSize));h.upload&&(h.upload.onprogress=function(b){e.onProgress(a,b.loaded,k.size)},h.onreadystatechange=function(c){4==h.readyState&&200==h.status?(JSON.parse(h.responseText),c=!1,g.breakPoints?(b+=g.fileSplitSize,f.saveUploadedSize(k.id,b),b<k.size?(a=k.slice(b,b+g.fileSplitSize),f.sendBlob(g.uploader,h,a,g.formData)):c=!0):c=!0,c&&(e.queueData.success++,f.successQueueItem(k,h),g.onUploadComplete&&g.onUploadComplete(k,h.responseText))):(e.queueData.error++,g.onUploadError&&g.onUploadError(k,h.responseText));if(g.onQueueComplete&&(e.queueData.files=e.queueData.success+e.queueData.error))option.onQueueComplete(e.queueData)},g.onUploadStart&&g.onUploadStart(),g.formData.fileName=k.name,g.formData.lastModifiedDate=k.lastModifiedDate.getTime(),f.sendBlob(g.uploader,h,a,g.formData));c.find("#"+k.id+" \x3e .info \x3e .up_pause").on("click.bjui.upload.pause",function(a){h.abort();d(this).hide().prev().show()});c.find("#"+k.id+" \x3e .info \x3e .up_cancel").off("click.bjui.upload.cancel").on("click.bjui.upload.cancel",d.proxy(function(a){this.tools.removeQueueItem(a,h)},this))};h.prototype.onProgress=function(a,b,d){var c=this.options,e=this.$element.find("#"+a.id+" .progress"),f=b,h=e.attr("lastLoaded")||0;b-=parseInt(h);b>a.size&&(b=a.size);this.$progressBar=e.children(".bar");a=c.breakPoints?parseFloat(this.$progressBar.get(0).style.width||0):0;d=(b/d*100+a).toFixed(2);d=100<d?"100%":d+"%";c.showUploadedSize&&e.nextAll(".filesize").find("\x3e .uploadedsize").text(this.tools.formatFileSize(b));c.showUploadedPercent&&e.nextAll(".up_percent").text(d);this.$progressBar.css("width",d);f<c.fileSplitSize?e.attr("lastLoaded",f):e.removeAttr("lastLoaded")};h.prototype.destroy=function(){};var q=d.fn.upload;d.fn.upload=l;d.fn.upload.Constructor=h;d.fn.upload.noConflict=function(){d.fn.upload=q;return this};d(document).on(BJUI.eventType.initUI,function(a){a=d(a.target).find('[data-toggle\x3d"upload"]');a.length&&l.call(a)})}(jQuery);+function(d){function l(b){var c=arguments,e=b;return this.each(function(){var f=d(this),g=d.extend({},a.DEFAULTS,f.data(),"object"===typeof b&&b),h=f.data("bjui.theme");h||f.data("bjui.theme",h=new a(this,g));if("string"===typeof e&&d.isFunction(h[e]))if([].shift.apply(c),c)h[e].apply(h,c);else h[e]();else h.init()})}var h,q;d(function(){h=d("#bjui-link-theme");q=d("#bjui-themes");if(d.cookie){var a=d.cookie("bjui_theme")||"blue";q.find("a.theme_"+a).theme({})}});var a=function(a,b){this.$element=d(a);this.options=b};a.DEFAULTS={theme:"purple"};a.prototype.init=function(){if(h.length){var a=h.attr("href"),a=a.substring(0,a.lastIndexOf("/")),a=a.substring(0,a.lastIndexOf("/")),a=a+("/"+this.options.theme+"/core.css");h.attr("href",a);var a=this.$element.closest("ul").prev(),b=a.attr("class"),b=b.replace(/(theme[\s][a-z]*)/g,"");a.removeClass().addClass(b).addClass("theme").addClass(this.options.theme);q.find("li").removeClass("active");this.$element.parent().addClass("active");this.cookie()}};a.prototype.setTheme=function(a){q.find("a.theme_"+a).trigger("click")};a.prototype.cookie=function(){var a=this.options.theme;d.cookie&&d.cookie("bjui_theme",a,{path:"/",expires:30})};var b=d.fn.theme;d.fn.theme=l;d.fn.theme.Constructor=a;d.fn.theme.noConflict=function(){d.fn.theme=b;return this};d(document).on("click.bjui.theme.data-api",'[data-toggle\x3d"theme"]',function(a){l.call(d(this));a.preventDefault()})}(jQuery);+function(d){function l(a){var b=arguments,e=a;return this.each(function(){var c=d(this),g=d.extend({},h.DEFAULTS,c.data(),"object"===typeof a&&a),k=c.data("bjui.initui");k||c.data("bjui.initui",k=new h(this,g));if("string"===typeof e&&d.isFunction(k[e]))if([].shift.apply(b),b)k[e].apply(k,b);else k[e]();else k.init()})}var h=function(a,b){this.$element=d(a);this.options=b};h.DEFAULTS={};h.prototype.init=function(){var a=this.$element;d.when(this.initUI()).done(function(){a.trigger(BJUI.eventType.afterInitUI)})};h.prototype.initUI=function(){var a=this.$element;d.when(a.trigger(BJUI.eventType.beforeInitUI)).done(function(){a.trigger(BJUI.eventType.initUI)})};var q=d.fn.initui;d.fn.initui=l;d.fn.initui.Constructor=h;d.fn.initui.noConflict=function(){d.fn.initui=q;return this};d(document).on("click.bjui.initui.data-api",'[data-toggle\x3d"initui"]',function(a){l.call($this,$this.data());a.preventDefault()});d(document).on(BJUI.eventType.beforeInitUI,function(a){a=d(a.target);var b=[],e=a.find("[data-noinit]");a.find("\x3e .bjui-maskProgress").find(".progress").stop().animate({width:"85%"},"fast");e.each(function(a){a=d(this);var c={};c.$target=a;c.$next=a.next();c.$prev=a.prev();c.$parent=a.parent();c.visible=a.is(":visible")?!0:!1;b.push(c);a.remove()});a.data("bjui.noinit",b)});d(document).on(BJUI.eventType.initUI,function(a){d(a.target).find("\x3e .bjui-maskProgress").find(".progress").stop().animate({width:"95%"},"fast")});d(document).on(BJUI.eventType.afterInitUI,function(a){var b=d(a.target);a=b.data("bjui.noinit");var e=b.find("\x3e .bjui-pageContent").find("form");a&&d.each(a,function(a,c){c.$next.length?c.$next.before(c.$target):c.$prev.length?c.$prev.after(c.$target):c.$parent.length&&c.$parent.append(c.$target);c.visible&&c.$target.show();b.removeData("bjui.noinit")});b.resizePageH();if(e.length)b.find("\x3e .bjui-pageFooter").find(":submit").on("click.bjui.submit",function(a){a.preventDefault();e.submit()});b.find("\x3e .bjui-maskProgress").find(".progress").stop().animate({width:"100%"},"fast",function(){b.find("\x3e .bjui-ajax-mask").fadeOut("normal",function(){d(this).remove()})})});d(document).one(BJUI.eventType.afterInitUI,function(a){a=d("#bjui-hnav-navbar").find("\x3e li.active");a.length&&a.find("\x3e .items").length&&a.find("\x3e a").trigger("click")});var a=function(a){var b=a;"static"==a.css("position")&&(b=a.offsetParent());var b=parseInt(b.css("zIndex"))||0,e=a.find("\x3e .bjui-maskBackground"),f=a.find("\x3e .bjui-maskProgress");e.length||(e=d(FRAG.maskBackground),f=d(BJUI.doRegional(FRAG.maskProgress,BJUI.regional)),a.prepend(e).prepend(f));parseInt(e.css("zIndex"));parseInt(f.css("zIndex"));e.css("zIndex",b+1);f.css("zIndex",b+2);return{$bg:e,$pr:f}};d(document).on("bjui.ajaxStart",function(b,c,g){b=a(d(b.target));b.$bg.fadeIn();b.$pr.fadeIn();b.$pr.find(".progress").animate({width:"80%"},c||500);g&&setTimeout(function(){g.toFunc().call(this)},25)}).on("bjui.ajaxStop",function(b){var c=a(d(b.target));c.$pr.find(".progress").animate({width:"100%"},"fast",function(){c.$bg.remove();c.$pr.remove()})}).on("bjui.ajaxError",function(b){b=a(d(b.target));b.$bg.remove();b.$pr.remove()});d(document).on(BJUI.eventType.ajaxStatus,function(b){b=d(b.target);var c=a(b);b.one("ajaxStart",function(){c.$bg.fadeIn();c.$pr.fadeIn();c.$pr.find(".progress").animate({width:"10%"},"fast")}).one("ajaxStop",function(){}).one("ajaxError",function(){c.$bg.remove();c.$pr.remove()})});var b=function(a){a.find('select[data-toggle\x3d"selectpicker"]').selectpicker("destroyMenu");a.find('[data-toggle\x3d"selectztree"]').trigger("destroy.bjui.selectztree")};d(document).on(BJUI.eventType.beforeLoadDialog,function(a){}).on(BJUI.eventType.beforeAjaxLoad,function(a){b(d(a.target))}).on(BJUI.eventType.beforeCloseNavtab,function(a){b(d(a.target))}).on(BJUI.eventType.beforeCloseDialog,function(a){b(d(a.target))});d(function(){d(document).on("keydown keyup",function(a){a.which===BJUI.keyCode.CTRL&&(BJUI.KeyPressed.ctrl="keydown"==a.type?!0:!1);a.which===BJUI.keyCode.SHIFT&&(BJUI.KeyPressed.shift="keydown"==a.type?!0:!1)})})}(jQuery);+function(d){d(document).on(BJUI.eventType.initUI,function(l){var h=d(l.target);d.fn.iCheck&&(l=h.find('input[data-toggle\x3d"icheck"]'),l.each(function(a){a=d(this);var b=a.attr("id"),e=a.attr("name"),c=a.data("label");c&&a.after('\x3clabel for\x3d"'+b+'" class\x3d"ilabel"\x3e'+c+"\x3c/label\x3e");a.on("ifCreated",function(a){a=d(this).closest("div");var c=a.next('[for\x3d"'+b+'"]');a.attr("data-icheck",e);c.attr("data-icheck",e)}).iCheck({checkboxClass:"icheckbox_minimal-purple",radioClass:"iradio_minimal-purple",increaseArea:"20%"}).on("ifChanged",function(){d.fn.validator&&d(this).trigger("validate")});a.prop("disabled")&&a.iCheck("disable")}),l.filter(".checkboxCtrl").on("ifChanged",function(a){a=1==a.target.checked?"check":"uncheck";var b=d(this).data("group");h.find(':checkbox[name\x3d"'+b+'"]').iCheck(a)}));h.find("button").each(function(){var a=d(this),b=a.data("icon");a.addClass("btn");b&&!a.find("\x3e i").length&&(b="fa-"+b.replace("fa-",""),a.data("bjui.icon")||a.html('\x3ci class\x3d"fa '+b+'"\x3e\x3c/i\x3e '+a.html()).data("bjui.icon",!0))});h.find("input:text, input:password").each(function(){var a=d(this).addClass("form-control"),b=10*(a.attr("size")||0);b&&a.css("width",b)});h.find("textarea").each(function(){var a=d(this).addClass("form-control"),b=10*(a.attr("cols")||0),e=a.attr("data-toggle");b&&a.css("width",b);e&&"autoheight"==e&&d.fn.autosize&&a.addClass("autosize").autosize()});h.find("a.btn").each(function(){var a=d(this),b=a.data("icon");b&&!a.find("\x3e i").length&&(b="fa-"+b.replace("fa-",""),a.data("bjui.icon")||a.html('\x3ci class\x3d"fa '+b+'"\x3e\x3c/i\x3e '+a.html()).data("bjui.icon",!0))});d.fn.validator&&h.find('form[data-toggle\x3d"validate"]').each(function(){var a=d(this),b="undefined"==typeof a.data("alertmsg")?!0:a.data("alertmsg");d(this).validator({valid:function(a){d(a).bjuiajax("ajaxForm",d(a).data())},validClass:"ok",theme:"red_right_effect"}).on("invalid.form",function(a,c,g){b&&d(c).alertmsg("error",BJUI.regional.validatemsg.replaceMsg(g.length))})});h.find('[data-toggle\x3d"moresearch"]').each(function(){var a=d(this),b=a.closest(".bjui-pageHeader"),e=b&&b.find(".bjui-moreSearch"),c=a.data("name");a.attr("title")||a.attr("title","\u66f4\u591a\u67e5\u8be2\u6761\u4ef6");a.click(function(g){e.length?(e.css("top",b.outerHeight()-1),e.is(":visible")?(a.html('\x3ci class\x3d"fa fa-angle-double-down"\x3e\x3c/i\x3e'),c&&d("body").data("moresearch."+c,!1)):(a.html('\x3ci class\x3d"fa fa-angle-double-up"\x3e\x3c/i\x3e'),c&&d("body").data("moresearch."+c,!0)),e.fadeToggle("slow","linear"),g.preventDefault()):BJUI.debug("Not created 'moresearch' box[class\x3d\"bjui-moreSearch\"]!")});c&&d("body").data("moresearch."+c)&&(e.css("top",b.outerHeight()-1).fadeIn(),a.html('\x3ci class\x3d"fa fa-angle-double-up"\x3e\x3c/i\x3e'))});if(d.fn.selectpicker){l=h.find('select[data-toggle\x3d"selectpicker"]');var q=function(a,b){if(b&&b.length){var e=a.data("refurl"),c=function(a){if((a=d(a.data("nextselect")))&&a.length){var b=a.data("emptytxt")||"\x26nbsp;";a.html("\x3coption\x3e"+b+"\x3c/option\x3e").selectpicker("refresh");c(a)}};if(b&&b.length&&e){var g=a.data("val");b.data("val");"undefined"===typeof g&&(g=a.val());d.ajax({type:"POST",dataType:"json",url:e.replace("{value}",encodeURIComponent(g)),cache:!1,data:{},success:function(d){if(d){d=d.data;var e="";"[object Array]"===toString.apply(d)&&(d={0:d[0]});for(var f in d)e+='\x3coption value\x3d"'+f+'"\x3e'+d[f]+"\x3c/option\x3e";e='\x3coption value\x3d""\x3e--\u8bf7\u9009\u62e9--\x3c/option\x3e'+e;a.removeAttr("data-val").removeData("val");b.removeAttr("data-val").removeData("val");e||(e=b.data("emptytxt")||"\x26nbsp;",e="\x3coption\x3e"+e+"\x3c/option\x3e");b.html(e).selectpicker("refresh");c(b)}},error:BJUI.ajaxError})}}};l.each(function(){var a=d(this),b=a.data(),e=d(b.nextselect);a.addClass("show-tick");b.style||a.data("style","btn-default");b.width||a.data("width","auto");b.container?1==b.container&&a.attr("data-container","false").data("container",!1):a.data("container","body");a.selectpicker();e&&e.length&&"undefined"!=typeof e.data("val")&&q(a,e)});l.change(function(){var a=d(this),b=d(a.data("nextselect"));q(a,b);a.attr("aria-required")&&d.fn.validator&&a.trigger("validate")})}d.fn.zTree&&(h.find('[data-toggle\x3d"ztree"]').each(function(){function a(a,b){var c=b.level,e=d("#"+b.tId+l),g=d("#diyBtn_add_"+b.id),h=d("#diyBtn_del_"+b.id);!g.length&&c<f.maxAddLevel&&(g=d('\x3cspan class\x3d"tree_add" id\x3d"diyBtn_add_'+b.id+'" title\x3d"\u6dfb\u52a0"\x3e\x3c/span\x3e'),g.appendTo(e),g.on("click",function(){q.addNodes(b,{name:"\u65b0\u589eItem"})}));h.length||(h=d('\x3cspan class\x3d"tree_del" id\x3d"diyBtn_del_'+b.id+'" title\x3d"\u5220\u9664"\x3e\x3c/span\x3e'),h.appendTo(e).on("click",function(c){var d=function(){h.alertmsg("confirm","\u786e\u8ba4\u8981\u5220\u9664 "+b.name+" \u5417\uff1f",{okCall:function(){q.removeNode(b);if(f.onRemove){var d=f.onRemove.toFunc();d&&d.call(this,c,a,b)}},cancelCall:function(){}})};if(f.beforeRemove){var e=f.beforeRemove.toFunc();e&&(e=e.call(e,a,b))&&1==e&&d()}else d()}))}function b(a,b){var c=d("#diyBtn_add_"+b.id),e=d("#diyBtn_del_"+b.id);c&&c.length&&c.off("click").remove();e&&e.length&&e.off("click").remove()}function e(a,b){for(var c=0;c<b.length;c++)if(!1===b[c].drag)return!1;return!0}function c(a,b,c,d){return c?!1!==c.drop:!0}var g=d(this),f=g.data(),h=f.options;h&&"string"===typeof h&&(h=h.toObj());h&&d.extend(f,"object"===typeof h&&h);h=f.setting;f.nodes?("string"===typeof f.nodes&&(f.nodes.trim().startsWith("[")||f.nodes.trim().startsWith("{")?f.nodes=f.nodes.toObj():f.nodes=f.nodes.toFunc()),"function"===typeof f.nodes&&(f.nodes=f.nodes.call(this)),g.removeAttr("data-nodes")):(f.nodes=[],g.find("\x3e li").each(function(){var a=d(this),b=a.data();b.pid&&(b.pId=b.pid);b.name=a.html();f.nodes.push(b)}),g.empty());f.showRemoveBtn||(f.showRemoveBtn=!1);f.showRenameBtn||(f.showRenameBtn=!1);f.addHoverDom&&"function"!==typeof f.addHoverDom&&(f.addHoverDom="edit"===f.addHoverDom?a:f.addHoverDom.toFunc());f.removeHoverDom&&"function"!==typeof f.removeHoverDom&&(f.removeHoverDom="edit"===f.removeHoverDom?b:f.removeHoverDom.toFunc());f.maxAddLevel||(f.maxAddLevel=2);var k={view:{addHoverDom:f.addHoverDom||null,removeHoverDom:f.removeHoverDom||null,addDiyDom:f.addDiyDom?f.addDiyDom.toFunc():null},edit:{enable:f.editEnable,showRemoveBtn:f.showRemoveBtn,showRenameBtn:f.showRenameBtn},check:{enable:f.checkEnable,chkStyle:f.chkStyle,radioType:f.radioType},callback:{onClick:f.onClick?f.onClick.toFunc():null,beforeDrag:f.beforeDrag?f.beforeDrag.toFunc():e,beforeDrop:f.beforeDrop?f.beforeDrop.toFunc():c,onDrop:f.onDrop?f.onDrop.toFunc():null,onCheck:f.onCheck?f.onCheck.toFunc():null,beforeRemove:f.beforeRemove?f.beforeRemove.toFunc():null,onRemove:f.onRemove?f.onRemove.toFunc():null,onNodeCreated:function(a,b,c){if(c.faicon){var e=d("#"+c.tId+"_a");e.data("faicon")||e.data("faicon",!0).addClass("faicon").find("\x3e span.button").append('\x3ci class\x3d"fa fa-'+c.faicon+'"\x3e\x3c/i\x3e')}f.onNodeCreated&&f.onNodeCreated.toFunc().call(this,a,b,c)},onCollapse:function(a,b,c){c.faiconClose&&d("#"+c.tId+"_ico").find("\x3e i").attr("class","fa fa-"+c.faiconClose);f.onCollapse&&f.onCollapse.toFunc().call(this,a,b,c)},onExpand:function(a,b,c){c.faicon&&c.faiconClose&&d("#"+c.tId+"_ico").find("\x3e i").attr("class","fa fa-"+c.faicon);f.onExpand&&f.onExpand.toFunc().call(this,a,b,c)}},data:{simpleData:{enable:f.simpleData||!0},key:{title:f.title||""}}};h&&"string"===typeof h&&(h=h.toObj());h&&d.extend(!0,k,"object"===typeof h&&h);d.fn.zTree.init(g,k,f.nodes);var l="_a",q=d.fn.zTree.getZTreeObj(g.attr("id"));f.expandAll&&q.expandAll(!0)}),h.find('[data-toggle\x3d"selectztree"]').each(function(){var a=d(this),b=a.data(),e=d(b.tree);parseFloat(a.css("width"));var c=a.outerHeight();b.width=b.width||a.outerWidth();b.height=b.height||"auto";if(e&&e.length){var g=e.attr("id"),f=d("#"+g+"_select_box"),h=function(f){var g=a.offset().top,h=a.offset().left,k=e.clone().appendTo(d("body")),l=k.outerHeight();k.remove();k=d(window).height()-l-g-c;l=d(window).height()-g-c;"auto"==b.height&&0>k&&(l+=k);f.css({top:g+c,left:h,"max-height":l})};a.click(function(){if(!f||!f.length){var c=2,k=d.CurrentDialog;k&&k.length&&(c=k.css("zIndex")+1);f=d('\x3cdiv id\x3d"'+g+'_select_box" class\x3d"tree-box"\x3e\x3c/div\x3e').css({position:"absolute",zIndex:c,"min-width":b.width,height:b.height,overflow:"auto",background:"#FAFAFA",border:"1px #EEE solid"}).hide().appendTo(d("body"));e.appendTo(f).css("width","100%").data("fromObj",a).removeClass("hide").show()}h(f);f.show()});d("body").on("mousedown",function(b){var c=d(b.target);a[0]==b.target||f&&0<f.length&&0<c.closest(".tree-box").length||f.hide()});var k=a.closest(".bjui-pageContent");k&&k.length&&k.scroll(function(){f&&f.length&&h(f)});a.on("destroy.bjui.selectztree",function(){f.remove()})}}));h.find('[data-toggle\x3d"accordion"]').each(function(){var a=d(this),b=a.data("heightbox"),e=a.data("height"),c=function(b,c){var e=a.data("offsety")||0;c=c||d(b).outerHeight()-1*e;var e=a.find(".panel-heading"),f=e.outerHeight(),f=(f+1)*e.length;a.css("height",c);c-=f;a.find(".panel-collapse").find(".panel-body").css("height",c)};a.find("\x3e .panel").length&&(b||e)&&(c(b,e),d(window).resize(function(){c(b,e)}),a.on("hidden.bs.collapse",function(a){a=d(this).find("\x3e .panel:last");a.find("\x3e .panel-heading \x3e h4 \x3e a").hasClass("collapsed")&&a.css("border-bottom","1px #ddd solid")}))});d.fn.colorpicker&&(h.find('[data-toggle\x3d"colorpicker"]').each(function(){var a=d(this),b=a.data("bgcolor");a.colorpicker();if(b)a.on("changeColor",function(b){a.css("background-color",b.color.toHex())})}),h.find('[data-toggle\x3d"clearcolor"]').each(function(){var a=d(this),b=a.data("target")?d(a.data("target")):null;b&&b.length&&a.click(function(){b.val("");b.data("bgcolor")&&b.css("background-color","")})}));h.find('[data-toggle\x3d"tooltip"]').each(function(){d(this).tooltip()});h.find('[data-toggle\x3d"dropdown"]').parent().on("show.bs.dropdown",function(a){a=d(this);a.outerWidth();a.find("\x3e .dropdown-menu").outerWidth()});d.fn.validator&&h.find('form[data-toggle\x3d"ajaxform"]').each(function(){d(this).validator({ignore:":input"});d(this).validator("destroy")});h.find('[data-toggle\x3d"highcharts"]').each(function(){var a=d(this),b=a.data();d.get(b.url,function(b){a.highcharts(b)},"json")});UE&&h.find('[data-toggle\x3d"ueditor"]').each(function(){var a=d(this).data("name"),b=d(this).data("id"),e=d(this).val(),c=d(this).attr("style");"undefined"==typeof a&&(a="");if(""==b||"undefined"==typeof b)b=parseInt(1E3*Math.random());b="ueditor"+b;d(this).after('\x3cscript style\x3d"'+c+'" id\x3d"'+b+'" name\x3d"'+a+'" type\x3d"text/plain"\x3e'+e+"\x3c/script\x3e");d(this).remove();ue=UE.getEditor(b)});h.find('[data-toggle\x3d"autocomplete"]').each(function(){var a=d(this).width(),b=d(this).data("url"),e=d(this).data("callback");d(this).attr("autocomplete","off");d(this).bigAutocomplete({width:a+10,url:b,callback:function(a){if(""!=e&&"undefined"!=typeof e)window[e](a)}})})})}(jQuery);function createPage(d,l){var h=nextCss=html=lastCss=lastNextCss=indexDis=lastDis="",q=prePage=lastPage=lastNextPage=0;d=parseInt(d);l=parseInt(l);1==d?(indexDis="disabled",h="display: none;"):(q=1,prePage=d-1,1>=prePage&&(prePage=1),nextCss="display: none;");d==l?(lastDis="disabled",lastCss="display: none;"):(lastPage=l,lastNextPage=d+1,lastNextPage>=l&&(lastNextPage=l),lastNextCss="display: none;");html='\x3cli class\x3d"j-first '+indexDis+'" data-page\x3d"'+q+'"\x3e\x3ca class\x3d"first" href\x3d"javascript:;" style\x3d"'+h+'"\x3e\x3ci class\x3d"fa fa-step-backward"\x3e\x3c/i\x3e \u9996\u9875\x3c/a\x3e\x3cspan class\x3d"first" style\x3d"'+nextCss+'"\x3e\x3ci class\x3d"fa fa-step-backward"\x3e\x3c/i\x3e \u9996\u9875\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"j-prev '+indexDis+'" data-page\x3d"'+prePage+'"\x3e\x3ca class\x3d"previous" href\x3d"javascript:;" style\x3d"'+h+'"\x3e\x3ci class\x3d"fa fa-backward"\x3e\x3c/i\x3e \u4e0a\u4e00\u9875\x3c/a\x3e\x3cspan class\x3d"previous" style\x3d"'+nextCss+'"\x3e\x3ci class\x3d"fa fa-backward"\x3e\x3c/i\x3e \u4e0a\u4e00\u9875\x3c/span\x3e\x3c/li\x3e';h=1;forSum=d+3;forSum>=l&&(forSum=l);for(3<d&&(h=forSum-6);h<=forSum;h++)selected="",h==d&&(selected="selected"),html+='\x3cli class\x3d"j-num '+selected+'" data-page\x3d"'+h+'"\x3e\x3ca href\x3d"javascript:;"\x3e'+h+"\x3c/a\x3e\x3c/li\x3e";return html+='\x3cli class\x3d"j-next '+lastDis+'" data-page\x3d"'+lastNextPage+'"\x3e\x3ca class\x3d"next" href\x3d"javascript:;" style\x3d"'+lastCss+'"\x3e\u4e0b\u4e00\u9875 \x3ci class\x3d"fa fa-forward"\x3e\x3c/i\x3e\x3c/a\x3e\x3cspan class\x3d"next" style\x3d"'+lastNextCss+'"\x3e\u4e0b\u4e00\u9875 \x3ci class\x3d"fa fa-forward"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"j-last '+lastDis+'" data-page\x3d"'+lastPage+'"\x3e\x3ca class\x3d"last" href\x3d"javascript:;" style\x3d"'+lastCss+'"\x3e\u672b\u9875 \x3ci class\x3d"fa fa-step-forward"\x3e\x3c/i\x3e\x3c/a\x3e\x3cspan class\x3d"last" style\x3d"'+lastNextCss+'"\x3e\u672b\u9875 \x3ci class\x3d"fa fa-step-forward"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/li\x3e'};